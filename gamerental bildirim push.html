<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PS Kiralama Sistemi</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#0a0e1a; --surface:#111827; --surface2:#1a2235; --surface3:#1f2d44;
  --accent:#00c6ff; --accent2:#7b2fff; --accent3:#ff6b35;
  --success:#00e5a0; --warning:#ffc107; --danger:#ff4757;
  --text:#e8eaf0; --text2:#8899aa; --text3:#556677; --border:#1e3050;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Exo 2',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;}
::-webkit-scrollbar{width:6px;height:6px;}
::-webkit-scrollbar-track{background:var(--surface);}
::-webkit-scrollbar-thumb{background:var(--accent2);border-radius:3px;}

.header{background:linear-gradient(135deg,#0d1b2e,#1a0e2e);border-bottom:1px solid var(--border);padding:0 24px;display:flex;align-items:center;justify-content:space-between;height:64px;position:sticky;top:0;z-index:100;box-shadow:0 4px 30px rgba(0,0,0,.5);}
.logo{display:flex;align-items:center;gap:12px;}
.logo-icon{width:40px;height:40px;background:linear-gradient(135deg,var(--accent),var(--accent2));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:20px;box-shadow:0 0 20px rgba(0,198,255,.4);}
.logo-text{font-family:'Rajdhani',sans-serif;font-size:22px;font-weight:700;letter-spacing:1px;}
.logo-text span{color:var(--accent);}
.header-stats{display:flex;gap:20px;}
.hstat{text-align:center;}
.hstat-val{font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;color:var(--accent);}
.hstat-lbl{font-size:11px;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;}
.header-date{font-size:13px;color:var(--text2);}

.nav{background:var(--surface);border-bottom:1px solid var(--border);display:flex;overflow-x:auto;}
.nav-btn{padding:14px 20px;background:none;border:none;cursor:pointer;font-family:'Exo 2',sans-serif;font-size:12px;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;border-bottom:3px solid transparent;transition:all .2s;white-space:nowrap;display:flex;align-items:center;gap:6px;}
.nav-btn:hover{color:var(--text);background:var(--surface2);}
.nav-btn.active{color:var(--accent);border-bottom-color:var(--accent);background:var(--surface2);}
.badge{background:var(--danger);color:#000;font-size:10px;font-weight:700;border-radius:10px;padding:2px 6px;}

.content{padding:20px;max-width:1700px;margin:0 auto;}
.page{display:none;animation:fadeIn .3s ease;}
.page.active{display:block;}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}

.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px;margin-bottom:20px;}
.card{background:var(--surface);border:1px solid var(--border);border-radius:14px;padding:18px;position:relative;overflow:hidden;}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--accent);}
.card.green::before{background:var(--success);}
.card.orange::before{background:var(--accent3);}
.card.purple::before{background:var(--accent2);}
.card.red::before{background:var(--danger);}
.card.yellow::before{background:var(--warning);}
.card-icon{font-size:26px;margin-bottom:8px;}
.card-val{font-family:'Rajdhani',sans-serif;font-size:28px;font-weight:700;line-height:1;}
.card-lbl{font-size:11px;color:var(--text2);margin-top:5px;text-transform:uppercase;letter-spacing:.5px;}
.card-sub{font-size:11px;color:var(--text3);margin-top:3px;}

.section{background:var(--surface);border:1px solid var(--border);border-radius:14px;margin-bottom:16px;overflow:hidden;}
.section-head{padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--surface2);}
.section-title{font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:700;display:flex;align-items:center;gap:8px;}
.section-body{padding:18px;}

.btn{padding:8px 16px;border:none;border-radius:8px;cursor:pointer;font-family:'Exo 2',sans-serif;font-size:12px;font-weight:600;display:inline-flex;align-items:center;gap:5px;transition:all .2s;text-transform:uppercase;letter-spacing:.3px;}
.btn-primary{background:linear-gradient(135deg,var(--accent),#0095db);color:#000;box-shadow:0 0 15px rgba(0,198,255,.3);}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 0 25px rgba(0,198,255,.5);}
.btn-success{background:linear-gradient(135deg,var(--success),#00a870);color:#000;}
.btn-success:hover{transform:translateY(-1px);}
.btn-danger{background:linear-gradient(135deg,var(--danger),#cc2233);color:#fff;}
.btn-outline{background:transparent;border:1px solid var(--border);color:var(--text2);}
.btn-outline:hover{border-color:var(--accent);color:var(--accent);}
.btn-warning{background:linear-gradient(135deg,var(--warning),#e6a800);color:#000;}
.btn-purple{background:linear-gradient(135deg,var(--accent2),#5a1fd1);color:#fff;}
.btn-sm{padding:5px 10px;font-size:11px;}

.tbl-wrap{overflow-x:auto;}
table{width:100%;border-collapse:collapse;}
th{padding:10px 12px;text-align:left;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text2);background:var(--surface2);border-bottom:1px solid var(--border);white-space:nowrap;}
td{padding:10px 12px;font-size:13px;color:var(--text);border-bottom:1px solid rgba(30,48,80,.5);vertical-align:middle;}
tr:last-child td{border-bottom:none;}
tr:hover td{background:rgba(0,198,255,.04);}

.status{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.3px;white-space:nowrap;}
.status::before{content:'';width:5px;height:5px;border-radius:50%;}
.s-mevcut{background:rgba(0,229,160,.15);color:var(--success);border:1px solid rgba(0,229,160,.3);}
.s-mevcut::before{background:var(--success);}
.s-kirada{background:rgba(255,193,7,.15);color:var(--warning);border:1px solid rgba(255,193,7,.3);}
.s-kirada::before{background:var(--warning);}
.s-gecikme{background:rgba(255,71,87,.15);color:var(--danger);border:1px solid rgba(255,71,87,.3);}
.s-gecikme::before{background:var(--danger);animation:pulse 1s infinite;}
.s-rezerv{background:rgba(123,47,255,.15);color:var(--accent2);border:1px solid rgba(123,47,255,.3);}
.s-rezerv::before{background:var(--accent2);}
.s-cikmayor{background:rgba(255,107,53,.15);color:var(--accent3);border:1px solid rgba(255,107,53,.3);}
.s-cikmayor::before{background:var(--accent3);}
.s-karsil{background:rgba(0,229,160,.15);color:var(--success);border:1px solid rgba(0,229,160,.3);}
.s-karsil::before{background:var(--success);}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

.rt-badge{font-size:10px;font-weight:700;padding:2px 7px;border-radius:4px;text-transform:uppercase;}
.rt-primary{background:rgba(0,198,255,.2);color:var(--accent);border:1px solid rgba(0,198,255,.4);}
.rt-secondary{background:rgba(123,47,255,.2);color:var(--accent2);border:1px solid rgba(123,47,255,.4);}
.rt-rezerv{background:rgba(255,193,7,.2);color:var(--warning);border:1px solid rgba(255,193,7,.4);}

.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;}
.form-group{display:flex;flex-direction:column;gap:5px;}
.form-group.full{grid-column:1/-1;}
.form-group.half{grid-column:span 1;}
label{font-size:11px;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.4px;}
input,select,textarea{background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:9px 11px;color:var(--text);font-family:'Exo 2',sans-serif;font-size:13px;transition:border-color .2s;}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,198,255,.1);}
select option{background:var(--surface2);}
textarea{resize:vertical;min-height:70px;}

.toggle-wrap{display:flex;align-items:center;gap:10px;padding:8px 12px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;}
.toggle{position:relative;width:40px;height:22px;flex-shrink:0;}
.toggle input{opacity:0;width:0;height:0;}
.toggle-slider{position:absolute;inset:0;background:#2a3a50;border-radius:11px;cursor:pointer;transition:.3s;}
.toggle-slider::before{content:'';position:absolute;width:16px;height:16px;left:3px;bottom:3px;background:#556677;border-radius:50%;transition:.3s;}
.toggle input:checked+.toggle-slider{background:var(--accent2);}
.toggle input:checked+.toggle-slider::before{transform:translateX(18px);background:#fff;}
.toggle-lbl{font-size:12px;font-weight:600;color:var(--text2);}

.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:1000;align-items:center;justify-content:center;padding:16px;}
.modal-overlay.open{display:flex;}
.modal{background:var(--surface);border:1px solid var(--border);border-radius:16px;width:100%;max-width:660px;max-height:92vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.8);animation:modalIn .25s ease;}
@keyframes modalIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
.modal-head{padding:18px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--surface2);border-radius:16px 16px 0 0;}
.modal-title{font-family:'Rajdhani',sans-serif;font-size:17px;font-weight:700;}
.modal-close{background:none;border:none;color:var(--text2);font-size:20px;cursor:pointer;line-height:1;}
.modal-close:hover{color:var(--danger);}
.modal-body{padding:22px;}
.modal-footer{padding:14px 22px;border-top:1px solid var(--border);display:flex;gap:8px;justify-content:flex-end;}

.profit{color:var(--success);font-weight:600;}
.loss{color:var(--danger);font-weight:600;}
.neutral{color:var(--text2);}

.game-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(270px,1fr));gap:14px;}
.game-card{background:var(--surface2);border:1px solid var(--border);border-radius:12px;overflow:hidden;transition:all .2s;cursor:pointer;}
.game-card:hover{border-color:var(--accent);transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,198,255,.15);}
.game-card.rezerv-card{border-color:rgba(123,47,255,.4);}
.game-card.rezerv-card:hover{border-color:var(--accent2);}
.game-card-header{padding:12px 14px;background:linear-gradient(135deg,var(--surface3),var(--surface2));border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:flex-start;gap:8px;}

.game-body{padding:12px 14px;}
.game-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:7px;font-size:13px;}
.game-row:last-child{margin-bottom:0;}
.game-row-lbl{color:var(--text2);}
.game-row-val{font-weight:600;}

.slot-panel{padding:8px 12px;background:rgba(0,0,0,.25);border-top:1px solid var(--border);border-bottom:1px solid var(--border);display:flex;flex-direction:column;gap:5px;}
.slot-row{display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:7px;border:1px solid transparent;}
.slot-empty{border:1px dashed rgba(255,255,255,.08);background:rgba(255,255,255,.02);}
.slot-occupied{background:rgba(0,198,255,.06);border-color:rgba(0,198,255,.15);}
.slot-occupied.overdue{background:rgba(255,71,87,.08);border-color:rgba(255,71,87,.25);}
.slot-icon{font-size:14px;width:26px;height:26px;border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}
.si-primary{background:rgba(0,198,255,.15);}
.si-secondary{background:rgba(123,47,255,.15);}
.si-rezerv{background:rgba(255,193,7,.15);}
.slot-info{flex:1;min-width:0;}
.slot-type{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text3);}
.slot-free{font-size:12px;color:var(--success);font-weight:600;margin-top:1px;}
.slot-musteri{font-size:12px;font-weight:700;color:var(--text);margin-top:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.slot-dates{font-size:10px;color:var(--text2);margin-top:1px;}
.slot-dates.late{color:var(--danger);font-weight:600;}
.slot-phone{font-size:10px;color:var(--text3);flex-shrink:0;}

.tag{display:inline-flex;align-items:center;gap:3px;padding:2px 7px;border-radius:4px;font-size:11px;font-weight:600;}
.tag-ps5{background:rgba(0,198,255,.15);color:var(--accent);}
.tag-ps4{background:rgba(255,107,53,.15);color:var(--accent3);}
.tag-genre{background:rgba(123,47,255,.15);color:var(--accent2);}

.info-box{background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:12px 14px;}
.info-row{display:flex;justify-content:space-between;padding:5px 0;border-bottom:1px solid rgba(30,48,80,.5);font-size:13px;}
.info-row:last-child{border-bottom:none;}
.info-row-lbl{color:var(--text2);}

.search-bar{display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap;align-items:center;}
.search-input{flex:1;min-width:180px;}
.filter-bar{display:flex;gap:6px;flex-wrap:wrap;}
.filter-btn{padding:5px 11px;border-radius:20px;border:1px solid var(--border);background:none;color:var(--text2);font-size:11px;font-weight:600;cursor:pointer;transition:all .2s;}
.filter-btn:hover,.filter-btn.active{border-color:var(--accent);color:var(--accent);background:rgba(0,198,255,.08);}

.chart-bar-wrap{display:flex;flex-direction:column;gap:8px;}
.chart-bar-row{display:grid;grid-template-columns:130px 1fr 80px;gap:8px;align-items:center;}
.chart-bar-lbl{font-size:12px;color:var(--text2);text-align:right;}
.chart-bar-bg{background:var(--surface2);border-radius:4px;height:20px;overflow:hidden;}
.chart-bar-fill{height:100%;border-radius:4px;transition:width .8s ease;display:flex;align-items:center;padding-left:6px;font-size:11px;font-weight:700;color:#000;}
.chart-bar-val{font-size:12px;font-weight:600;text-align:right;}

.two-col{display:grid;grid-template-columns:1fr 1fr;gap:14px;}
@media(max-width:900px){.two-col{grid-template-columns:1fr;}}

.empty{text-align:center;padding:36px;color:var(--text3);}
.empty-icon{font-size:44px;margin-bottom:10px;opacity:.4;}
.empty-text{font-size:13px;}

.action-btns{display:flex;gap:5px;flex-wrap:wrap;}
tr.overdue td{background:rgba(255,71,87,.05);}

.toast-container{position:fixed;bottom:18px;right:18px;z-index:9999;display:flex;flex-direction:column;gap:7px;}
.toast{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:11px 14px;font-size:13px;min-width:240px;display:flex;align-items:center;gap:9px;animation:toastIn .3s ease;box-shadow:0 8px 30px rgba(0,0,0,.5);}
.toast.success{border-left:3px solid var(--success);}
.toast.error{border-left:3px solid var(--danger);}
.toast.info{border-left:3px solid var(--accent);}
.toast.warning{border-left:3px solid var(--warning);}
@keyframes toastIn{from{opacity:0;transform:translateX(40px)}to{opacity:1;transform:translateX(0)}}

.report-period-bar{display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;align-items:center;}
.period-btn{padding:6px 14px;border-radius:20px;border:1px solid var(--border);background:none;color:var(--text2);font-size:12px;font-weight:600;cursor:pointer;transition:all .2s;}
.period-btn:hover,.period-btn.active{border-color:var(--accent);color:var(--accent);background:rgba(0,198,255,.08);}
.date-range-inputs{display:flex;gap:8px;align-items:center;}
.date-range-inputs input{padding:6px 10px;font-size:12px;}

.indirim-row{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;align-items:end;}
.hediye-info{background:linear-gradient(135deg,rgba(0,229,160,.1),rgba(0,198,255,.08));border:1px solid rgba(0,229,160,.3);border-radius:8px;padding:10px 14px;font-size:12px;color:var(--success);margin-top:8px;display:none;}

.progress-wrap{margin-top:4px;}
.progress-bg{background:var(--surface2);border-radius:3px;height:5px;overflow:hidden;}
.progress-fill{height:100%;border-radius:3px;transition:width .6s;}

.double-primary-badge{font-size:10px;background:rgba(0,198,255,.2);color:var(--accent);border:1px solid rgba(0,198,255,.4);padding:2px 7px;border-radius:4px;font-weight:700;}

/* UZAKTAN DEAKTÄ°F */
.deaktif-banner{background:linear-gradient(135deg,rgba(255,71,87,.15),rgba(255,107,53,.1));border:1px solid rgba(255,71,87,.4);border-radius:8px;padding:10px 14px;margin-bottom:8px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;}
.deaktif-banner-icon{font-size:20px;}
.deaktif-banner-text{flex:1;min-width:0;}
.deaktif-banner-title{font-size:12px;font-weight:700;color:var(--danger);}
.deaktif-banner-sub{font-size:11px;color:var(--text2);margin-top:2px;}
.deaktif-progress{height:6px;background:var(--surface2);border-radius:3px;margin-top:6px;overflow:hidden;}
.deaktif-progress-fill{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--danger),var(--warning));transition:width .6s;}
.game-card.deaktif{border-color:rgba(255,71,87,.4);box-shadow:0 0 15px rgba(255,71,87,.1);}
.game-card.deaktif .game-card-header{background:linear-gradient(135deg,rgba(255,71,87,.08),var(--surface2));}

/* KARA LÄ°STE */
.blacklist-badge{display:inline-flex;align-items:center;gap:4px;background:rgba(255,71,87,.2);color:var(--danger);border:1px solid rgba(255,71,87,.4);padding:2px 8px;border-radius:4px;font-size:10px;font-weight:700;}
.kl-uyari-modal{background:linear-gradient(135deg,rgba(255,71,87,.15),rgba(255,71,87,.08));border:2px solid var(--danger);border-radius:12px;padding:18px;text-align:center;}
.kl-uyari-icon{font-size:48px;margin-bottom:8px;}
.kl-uyari-title{font-size:18px;font-weight:700;color:var(--danger);margin-bottom:6px;}
.kl-uyari-text{font-size:13px;color:var(--text2);line-height:1.5;}

/* EK GELÄ°R */
.s-ekgelir{background:rgba(0,229,160,.15);color:var(--success);border:1px solid rgba(0,229,160,.3);}
.s-ekgelir::before{background:var(--success);}

.game-card-header{padding:12px 14px;background:linear-gradient(135deg,var(--surface3),var(--surface2));border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:flex-start;gap:8px;}
.game-title{font-family:'Rajdhani',sans-serif;font-size:17px;font-weight:700;letter-spacing:0.3px;line-height:1.2;}
.tag{display:inline-flex;align-items:center;gap:3px;padding:2px 8px;border-radius:4px;font-size:11px;font-weight:600;}
.tag-ps5{background:rgba(0,198,255,.15);color:var(--accent);}
.tag-ps4{background:rgba(255,107,53,.15);color:var(--accent3);}
.tag-genre{background:rgba(123,47,255,.15);color:var(--accent2);}
.status{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:20px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.5px;}
.s-mevcut{background:rgba(0,229,160,.15);color:var(--success);border:1px solid rgba(0,229,160,.3);}
.s-kirada{background:rgba(255,193,7,.15);color:var(--warning);border:1px solid rgba(255,193,7,.3);}
.s-cikmayor{background:rgba(255,107,53,.15);color:var(--accent3);border:1px solid rgba(255,107,53,.3);}
.double-primary-badge{font-size:10px;background:rgba(0,198,255,.2);color:var(--accent);border:1px solid rgba(0,198,255,.4);padding:2px 7px;border-radius:4px;font-weight:700;}


.bekleyen-grup{background:var(--surface2);border:1px solid var(--border);border-radius:12px;margin-bottom:12px;overflow:hidden;}
.bekleyen-grup-head{padding:12px 16px;background:linear-gradient(135deg,var(--surface3),var(--surface2));border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:8px;}
.bekleyen-grup-title{font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:700;}
.bekleyen-badge{background:rgba(255,193,7,.2);color:var(--warning);border:1px solid rgba(255,193,7,.4);padding:2px 10px;border-radius:20px;font-size:11px;font-weight:700;}
.bekleyen-row{display:flex;align-items:center;gap:10px;padding:10px 16px;border-bottom:1px solid rgba(255,255,255,.04);}
.bekleyen-row:last-child{border-bottom:none;}
.bekleyen-sira{width:24px;height:24px;background:var(--surface3);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:var(--text3);flex-shrink:0;}
.bekleyen-sira.first{background:rgba(255,193,7,.2);color:var(--warning);border:1px solid rgba(255,193,7,.4);}
.bekleyen-info{flex:1;min-width:0;}
.bekleyen-musteri{font-weight:600;font-size:13px;}
.bekleyen-meta{font-size:11px;color:var(--text3);margin-top:1px;}
.bekleyen-actions{display:flex;gap:5px;flex-shrink:0;}

</style>
<!-- AYARLAR -->
<div class="page" id="page-ayarlar">
  <div class="section">
    <div class="section-head"><div class="section-title">ğŸ’¬ WhatsApp Mesaj ÅablonlarÄ±</div></div>
    <div class="section-body">
      <p style="font-size:13px;color:var(--text3);margin-bottom:20px">
        KullanabileceÄŸin deÄŸiÅŸkenler: <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{isim}</code> mÃ¼ÅŸteri adÄ± &nbsp;Â·&nbsp; <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{oyun}</code> oyun adÄ± &nbsp;Â·&nbsp; <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{gun}</code> gecikme gÃ¼nÃ¼ &nbsp;Â·&nbsp; <code style="background:var(--surface3);padding:2px 6px;border-radius:4px">{ucret}</code> ekstra Ã¼cret
      </p>

      <div style="display:flex;flex-direction:column;gap:20px">

        <div>
          <label style="font-size:13px;font-weight:600;color:var(--text1);display:block;margin-bottom:8px">
            ğŸš¨ GecikmiÅŸ Ä°ade MesajÄ±
          </label>
          <textarea id="sablo-gecikme" rows="4" style="width:100%;background:var(--surface3);border:1px solid var(--border);border-radius:10px;padding:12px;color:var(--text1);font-size:13px;font-family:inherit;resize:vertical;line-height:1.6" placeholder="Gecikme mesajÄ±..."></textarea>
          <div style="font-size:11px;color:var(--text3);margin-top:4px">ğŸ“Œ GecikmiÅŸ kiralamalar iÃ§in Ä°ade butonu yanÄ±ndaki ğŸ’¬ WA butonunda kullanÄ±lÄ±r.</div>
        </div>

        <div>
          <label style="font-size:13px;font-weight:600;color:var(--text1);display:block;margin-bottom:8px">
            ğŸ”” YarÄ±n Bitiyor MesajÄ±
          </label>
          <textarea id="sablo-yaklasan" rows="4" style="width:100%;background:var(--surface3);border:1px solid var(--border);border-radius:10px;padding:12px;color:var(--text1);font-size:13px;font-family:inherit;resize:vertical;line-height:1.6" placeholder="HatÄ±rlatma mesajÄ±..."></textarea>
          <div style="font-size:11px;color:var(--text3);margin-top:4px">ğŸ“Œ SÃ¼resi yarÄ±n dolacak kiralamalar iÃ§in kullanÄ±lÄ±r.</div>
        </div>

        <div>
          <label style="font-size:13px;font-weight:600;color:var(--text1);display:block;margin-bottom:8px">
            ğŸ‘‹ Genel Mesaj
          </label>
          <textarea id="sablo-genel" rows="3" style="width:100%;background:var(--surface3);border:1px solid var(--border);border-radius:10px;padding:12px;color:var(--text1);font-size:13px;font-family:inherit;resize:vertical;line-height:1.6" placeholder="Genel mesaj..."></textarea>
          <div style="font-size:11px;color:var(--text3);margin-top:4px">ğŸ“Œ MÃ¼ÅŸteriler sekmesindeki ğŸ’¬ butonunda kullanÄ±lÄ±r.</div>
        </div>

      </div>

      <div style="display:flex;gap:10px;margin-top:24px;flex-wrap:wrap">
        <button class="btn btn-success" onclick="saveAyarlar()">ğŸ’¾ Kaydet</button>
        <button class="btn btn-outline" onclick="resetSablonlar()">â†©ï¸ VarsayÄ±lana DÃ¶n</button>
      </div>
    </div>
  </div>

  <!-- BÄ°LDÄ°RÄ°MLER -->
  <div class="section" style="margin-top:16px">
    <div class="section-head"><div class="section-title">ğŸ”” Ä°ade HatÄ±rlatÄ±cÄ±larÄ±</div></div>
    <div class="section-body">
      <p style="font-size:13px;color:var(--text3);margin-bottom:16px;line-height:1.6">
        Uygulama aÃ§Ä±ldÄ±ÄŸÄ±nda gecikmiÅŸ iadeler ve yarÄ±n biten kiralamalar iÃ§in otomatik bildirim gÃ¶nderilir.<br>
        <strong>Mobilde en iyi sonuÃ§ iÃ§in</strong> uygulamayÄ± ana ekrana ekleyin.
      </p>
      <div id="notif-durum" style="background:var(--surface3);border-radius:10px;padding:14px 16px;font-size:13px">YÃ¼kleniyor...</div>
    </div>
  </div>

  <!-- VERÄ° YEDEKLEMESÄ° -->
  <div class="section" style="margin-top:16px">
    <div class="section-head"><div class="section-title">ğŸ—„ï¸ Veri Yedekleme & Geri YÃ¼kleme</div></div>
    <div class="section-body">

      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px">
        <div style="background:var(--surface3);border-radius:12px;padding:16px">
          <div style="font-size:13px;font-weight:700;color:var(--text1);margin-bottom:6px">ğŸ“¤ DÄ±ÅŸa Aktar</div>
          <div style="font-size:12px;color:var(--text3);margin-bottom:14px;line-height:1.6">TÃ¼m oyun, mÃ¼ÅŸteri ve kiralama verilerini JSON dosyasÄ± olarak indir. GÃ¼venli yere kaydet.</div>
          <button class="btn btn-primary" style="width:100%" onclick="exportData()">â¬‡ï¸ JSON Ä°ndir</button>
        </div>
        <div style="background:var(--surface3);border-radius:12px;padding:16px">
          <div style="font-size:13px;font-weight:700;color:var(--text1);margin-bottom:6px">ğŸ“¥ Ä°Ã§e Aktar</div>
          <div style="font-size:12px;color:var(--text3);margin-bottom:14px;line-height:1.6">Daha Ã¶nce indirdiÄŸin JSON dosyasÄ±nÄ± yÃ¼kle. <strong style="color:var(--danger)">Mevcut veriler silinir!</strong></div>
          <button class="btn btn-warning" style="width:100%" onclick="document.getElementById('import-file').click()">â¬†ï¸ JSON YÃ¼kle</button>
          <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(event)">
        </div>
      </div>

      <div id="yedek-bilgi" style="background:var(--surface3);border-radius:10px;padding:12px 16px;font-size:12px;color:var(--text3)">
        <span id="yedek-bilgi-text">ğŸ“Š YÃ¼kleniyor...</span>
      </div>

    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>

<!-- PWA Meta Tags -->
<meta name="application-name" content="GameRental">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="GameRental">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0a0a0f">
<meta name="description" content="PS Oyun Kiralama YÃ¶netim Sistemi">

<!-- PWA Icons (inline SVG as data URI) -->
<link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='100' fill='%230a0a0f'/%3E%3Ccircle cx='256' cy='256' r='180' fill='none' stroke='%2300c6ff' stroke-width='12'/%3E%3Cpath d='M180 256 h60 M210 226 v60' stroke='%2300c6ff' stroke-width='18' stroke-linecap='round'/%3E%3Ccircle cx='320' cy='240' r='10' fill='%23ff4757'/%3E%3Ccircle cx='345' cy='265' r='10' fill='%2300c6ff'/%3E%3Ccircle cx='295' cy='265' r='10' fill='%2300e5a0'/%3E%3Ccircle cx='320' cy='290' r='10' fill='%23f0c040'/%3E%3C/svg%3E">

<!-- PWA Manifest (inline) -->
<link rel="manifest" href="data:application/json,%7B%22name%22%3A%22GameRental%22%2C%22short_name%22%3A%22GameRental%22%2C%22description%22%3A%22PS%20Oyun%20Kiralama%22%2C%22start_url%22%3A%22.%22%2C%22display%22%3A%22standalone%22%2C%22background_color%22%3A%22%230a0a0f%22%2C%22theme_color%22%3A%22%230a0a0f%22%2C%22orientation%22%3A%22portrait%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22data%3Aimage%2Fsvg%2Bxml%2C%253Csvg%2520xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%2520viewBox%3D'0%25200%2520512%2520512'%253E%253Crect%2520width%3D'512'%2520height%3D'512'%2520rx%3D'100'%2520fill%3D'%25230a0a0f'%2F%253E%253C%2Fsvg%253E%22%2C%22sizes%22%3A%22512x512%22%2C%22type%22%3A%22image%2Fsvg%2Bxml%22%7D%5D%7D">
</head>
<body>
<!-- LOGIN OVERLAY -->
<div id="login-overlay" style="position:fixed;inset:0;z-index:99999;background:#0a0a0f;display:flex;align-items:center;justify-content:center;">
  <div style="background:#16161e;border:1px solid #2a2a3a;border-radius:20px;padding:40px 36px;width:100%;max-width:380px;box-shadow:0 24px 80px rgba(0,0,0,.6);">
    <div style="text-align:center;margin-bottom:32px">
      <div style="font-size:48px;margin-bottom:10px">ğŸ®</div>
      <div style="font-size:24px;font-weight:800;color:#fff;letter-spacing:-0.5px">GameRental</div>
      <div style="font-size:13px;color:#888;margin-top:6px">Devam etmek iÃ§in giriÅŸ yapÄ±n</div>
    </div>
    <div style="display:flex;flex-direction:column;gap:12px">
      <input type="email" id="login-email" placeholder="E-posta adresi" autocomplete="email" style="background:#1e1e2a;border:1px solid #2a2a3a;border-radius:10px;padding:13px 16px;color:#fff;font-size:14px;width:100%;box-sizing:border-box;outline:none;font-family:inherit;">
      <input type="password" id="login-pass" placeholder="Åifre" autocomplete="current-password" style="background:#1e1e2a;border:1px solid #2a2a3a;border-radius:10px;padding:13px 16px;color:#fff;font-size:14px;width:100%;box-sizing:border-box;outline:none;font-family:inherit;" onkeydown="if(event.key==='Enter')doLogin()">
      <div id="login-error" style="color:#ff4757;font-size:12px;text-align:center;min-height:16px;display:none"></div>
      <button onclick="doLogin()" id="login-btn" style="background:#00c6ff;border:none;border-radius:10px;padding:14px;color:#000;font-size:15px;font-weight:700;cursor:pointer;width:100%;font-family:inherit;transition:opacity .2s;">
        GiriÅŸ Yap
      </button>
    </div>
    <div id="login-loading" style="text-align:center;margin-top:14px;color:#888;font-size:13px;display:none">â³ GiriÅŸ yapÄ±lÄ±yor...</div>
  </div>
</div>


<header class="header">
  <div class="logo">
    <div class="logo-icon">ğŸ®</div>
    <div>
      <div class="logo-text">PS<span>RENTAL</span></div>
      <div style="font-size:10px;color:var(--text2)">Kiralama YÃ¶netim Sistemi</div>
    </div>
  </div>
  <div class="header-stats">
    <div class="hstat"><div class="hstat-val" id="hs-kira">0</div><div class="hstat-lbl">Kiradaki</div></div>
    <div class="hstat"><div class="hstat-val" id="hs-musteri">0</div><div class="hstat-lbl">MÃ¼ÅŸteri</div></div>
    <div class="hstat"><div class="hstat-val" id="hs-gelir">â‚º0</div><div class="hstat-lbl">Bu Ay</div></div>
    <div class="hstat"><div class="hstat-val" id="hs-rezerv">0</div><div class="hstat-lbl">Rezervasyon</div></div>
  </div>
  <div class="header-date" id="header-date"></div>
</header>

<nav class="nav">
  <button class="nav-btn active" onclick="nav('dashboard',this)">ğŸ“Š Dashboard</button>
  <button class="nav-btn" onclick="nav('oyunlar',this)">ğŸ® Oyunlar</button>
  <button class="nav-btn" onclick="nav('musteriler',this)">ğŸ‘¥ MÃ¼ÅŸteriler</button>
  <button class="nav-btn" onclick="nav('kiralamalar',this)">ğŸ“‹ Kiralamalar <span class="badge" id="badge-gecikme" style="display:none">0</span></button>
  <button class="nav-btn" onclick="nav('rezervasyonlar',this)">â³ Bekleme Listesi</button>
  <button class="nav-btn" onclick="nav('karaliste',this)">ğŸš« Kara Liste <span class="badge" id="badge-kl" style="display:none">0</span></button>
  <button class="nav-btn" onclick="nav('ekgelir',this)">ğŸ’µ Ek Gelir</button>
  <button class="nav-btn" onclick="nav('raporlar',this)">ğŸ“ˆ Raporlar</button>

  <button class="nav-btn" onclick="nav('ayarlar',this)">âš™ï¸ Ayarlar</button>
  <div style="display:flex;align-items:center;gap:8px;margin-left:auto;padding-right:4px">
    <div id="sync-status" style="font-size:11px;padding:3px 10px;border-radius:20px;background:rgba(0,229,160,.15);color:#00e5a0;border:1px solid rgba(0,229,160,.3);display:none;white-space:nowrap">â˜ï¸ Senkronize</div>
    <button onclick="doLogout()" id="logout-btn" style="background:rgba(255,71,87,.15);border:1px solid rgba(255,71,87,.3);border-radius:8px;padding:5px 12px;color:#ff4757;font-family:inherit;font-size:12px;font-weight:600;cursor:pointer;display:none;white-space:nowrap">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
  </div>
</nav>

<div class="content">

<!-- DASHBOARD -->
<div class="page active" id="page-dashboard">
  <div class="cards">
    <div class="card"><div class="card-icon">ğŸ®</div><div class="card-val" id="d-toplam">0</div><div class="card-lbl">Toplam Oyun</div></div>
    <div class="card green"><div class="card-icon">âœ…</div><div class="card-val" id="d-musait">0</div><div class="card-lbl">MÃ¼sait</div></div>
    <div class="card orange"><div class="card-icon">ğŸ“¤</div><div class="card-val" id="d-kirada">0</div><div class="card-lbl">Kiradaki</div><div class="card-sub" id="d-kira-sub"></div></div>
    <div class="card purple"><div class="card-icon">ğŸ”–</div><div class="card-val" id="d-rezerv">0</div><div class="card-lbl">Rezervasyon</div></div>
    <div class="card green"><div class="card-icon">ğŸ’°</div><div class="card-val" id="d-ay-gelir">â‚º0</div><div class="card-lbl">Bu Ay Gelir</div></div>
    <div class="card red"><div class="card-icon">â°</div><div class="card-val" id="d-gecikme">0</div><div class="card-lbl">GecikmiÅŸ</div></div>
  </div>

  <!-- AYLIK HEDEF Ã‡UBUÄU -->
  <div id="hedef-bar-wrap" style="margin-bottom:16px;background:var(--surface2);border:1px solid var(--border);border-radius:14px;padding:16px 20px">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:10px;gap:12px;flex-wrap:wrap">
      <div style="font-size:14px;font-weight:700;color:var(--text1)">ğŸ¯ AylÄ±k Gelir Hedefi</div>
      <div style="display:flex;align-items:center;gap:8px">
        <span id="hedef-oran-lbl" style="font-size:13px;font-weight:700;color:var(--success)">%0</span>
        <span style="font-size:12px;color:var(--text3)" id="hedef-rakam-lbl">â‚º0 / â‚º0</span>
        <button onclick="openHedefModal()" style="background:rgba(255,255,255,.07);border:1px solid var(--border);border-radius:8px;padding:4px 10px;font-size:12px;color:var(--text2);cursor:pointer">âœï¸ DÃ¼zenle</button>
      </div>
    </div>
    <div style="background:var(--surface3);border-radius:99px;height:12px;overflow:hidden">
      <div id="hedef-progress" style="height:100%;border-radius:99px;background:linear-gradient(90deg,var(--success),#00c8ff);transition:width .6s ease;width:0%"></div>
    </div>
    <div id="hedef-mesaj" style="margin-top:8px;font-size:12px;color:var(--text3)">Hedef belirlemek iÃ§in âœï¸ DÃ¼zenle butonuna tÄ±klayÄ±n.</div>
  </div>

  <div class="two-col">
    <div class="section">
      <div class="section-head"><div class="section-title">â° GecikmiÅŸ Ä°adeler</div></div>
      <div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
        <thead><tr><th>Oyun</th><th>MÃ¼ÅŸteri</th><th>Tel</th><th>Teslim</th><th>Gecikme</th><th>Ekstra Ãœcret</th><th>Ä°ÅŸlem</th></tr></thead>
        <tbody id="d-gecikme-tbl"></tbody>
      </table></div></div>
    </div>
    <div class="section">
      <div class="section-head"><div class="section-title">ğŸ”” YarÄ±n Biten Kiralamalar</div></div>
      <div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
        <thead><tr><th>Oyun</th><th>MÃ¼ÅŸteri</th><th>Tel</th><th>Tip</th><th>BitiÅŸ</th><th>Ä°ÅŸlem</th></tr></thead>
        <tbody id="d-yaklasan-tbl"></tbody>
      </table></div></div>
    </div>
    <div class="section">
      <div class="section-head"><div class="section-title">ğŸ”¥ En Ã‡ok Kiralanan</div></div>
      <div class="section-body"><div id="d-top-chart" class="chart-bar-wrap"></div></div>
    </div>
  </div>
  <div class="section">
    <div class="section-head"><div class="section-title">ğŸ“‹ Aktif Kiralamalar</div></div>
    <div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
      <thead><tr><th>Oyun</th><th>MÃ¼ÅŸteri</th><th>Tip</th><th>BaÅŸlangÄ±Ã§</th><th>BitiÅŸ</th><th>Tutar</th><th>Durum</th></tr></thead>
      <tbody id="d-aktif-tbl"></tbody>
    </table></div></div>
  </div>
</div>

<!-- OYUNLAR -->
<div class="page" id="page-oyunlar">
  <div class="search-bar">
    <input type="text" class="search-input" placeholder="ğŸ” Oyun ara..." id="oyun-search" oninput="renderOyunlar()">
    <div class="filter-bar">
      <button class="filter-btn active" onclick="setFilter('oyun','hepsi',this)">Hepsi</button>
      <button class="filter-btn" onclick="setFilter('oyun','mevcut',this)">MÃ¼sait</button>
      <button class="filter-btn" onclick="setFilter('oyun','kirada',this)">Kirada</button>
      <button class="filter-btn" onclick="setFilter('oyun','rezerv',this)">Rezerv Bekleniyor</button>
      <button class="filter-btn" onclick="setFilter('oyun','deaktif',this)">ğŸ“¡ Deaktif</button>
      <button class="filter-btn" onclick="setFilter('oyun','PS5',this)">PS5</button>
      <button class="filter-btn" onclick="setFilter('oyun','PS4',this)">PS4</button>
    </div>
    <button class="btn btn-warning btn-sm" onclick="openDeaktifModal()">ğŸ“¡ Uzaktan Deaktif</button>
    <button class="btn btn-primary" onclick="openOyunModal()">+ Oyun Ekle</button>
  </div>
  <div class="game-grid" id="oyun-grid"></div>
</div>

<!-- MÃœÅTERÄ°LER -->
<div class="page" id="page-musteriler">
  <div class="search-bar">
    <input type="text" class="search-input" placeholder="ğŸ” MÃ¼ÅŸteri ara..." id="musteri-search" oninput="renderMusteriler()">
    <button class="btn btn-primary" onclick="openMusteriModal()">+ MÃ¼ÅŸteri Ekle</button>
  </div>
  <div class="section"><div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
    <thead><tr><th>#</th><th>Ad Soyad</th><th>Telefon</th><th>E-posta</th><th>Toplam Kiralama</th><th>Aktif</th><th>Toplam Harcama</th><th>Ä°ÅŸlem</th></tr></thead>
    <tbody id="musteri-tbl"></tbody>
  </table></div></div></div>
</div>

<!-- KÄ°RALAMALAR -->
<div class="page" id="page-kiralamalar">
  <div id="kira-gecikme-banner" style="display:none;margin-bottom:10px;background:rgba(255,71,87,.12);border:1px solid rgba(255,71,87,.35);border-radius:10px;padding:10px 16px;font-size:13px;color:var(--danger)"></div>
  <div id="kira-yaklasan-banner" style="display:none;margin-bottom:10px;background:rgba(255,193,7,.1);border:1px solid rgba(255,193,7,.35);border-radius:10px;padding:10px 16px;font-size:13px;color:#ffc107"></div>
  <div class="search-bar">
    <input type="text" class="search-input" placeholder="ğŸ” Ara..." id="kiralama-search" oninput="renderKiralamalar()">
    <div class="filter-bar">
      <button class="filter-btn active" onclick="setFilter('kira','hepsi',this)">Hepsi</button>
      <button class="filter-btn" onclick="setFilter('kira','aktif',this)">Aktif</button>
      <button class="filter-btn" onclick="setFilter('kira','gecikme',this)">GecikmiÅŸ</button>
      <button class="filter-btn" onclick="setFilter('kira','teslim',this)">Teslim</button>
    </div>
    <button class="btn btn-primary" onclick="openKiralamaModal()">+ Kiralama OluÅŸtur</button>
  </div>
  <div class="section"><div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
    <thead><tr><th>#</th><th>Oyun</th><th>MÃ¼ÅŸteri</th><th>Tip</th><th>BaÅŸlangÄ±Ã§</th><th>BitiÅŸ</th><th>GÃ¼n</th><th>BrÃ¼t</th><th>Ä°ndirim</th><th>Net</th><th>Durum</th><th>Ä°ÅŸlem</th></tr></thead>
    <tbody id="kiralama-tbl"></tbody>
  </table></div></div></div>
</div>

<!-- REZERVASYONLAR -->
<div class="page" id="page-rezervasyonlar">
  <div class="search-bar" style="flex-wrap:wrap;gap:8px">
    <input type="text" class="search-input" placeholder="ğŸ” Oyun veya mÃ¼ÅŸteri ara..." id="rezerv-search" oninput="renderRezervasyonlar()" style="flex:1;min-width:200px">
    <button class="btn btn-purple" onclick="openRezervModal()">+ Beklemeye Al</button>
  </div>

  <!-- Bekleyen uyarÄ±sÄ± banner -->
  <div id="bekleyen-uyari" style="display:none;margin:0 0 12px;background:linear-gradient(135deg,rgba(255,193,7,.15),rgba(255,107,53,.1));border:1px solid rgba(255,193,7,.4);border-radius:10px;padding:12px 16px;font-size:13px;color:var(--warning)"></div>

  <!-- Oyuna gÃ¶re gruplu bekleme listesi -->
  <div id="bekleyen-gruplar"></div>
</div>


<!-- UZATMA -->
<div class="modal-overlay" id="modal-uzatma">
  <div class="modal" style="max-width:480px">
    <div class="modal-head">
      <div class="modal-title">ğŸ”„ Kiralama Uzat</div>
      <button class="modal-close" onclick="closeModal('modal-uzatma')">âœ•</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="uzatma-kira-id">
      <!-- Mevcut kiralama bilgisi -->
      <div id="uzatma-bilgi" style="background:var(--surface3);border-radius:8px;padding:10px 14px;margin-bottom:14px;font-size:13px;line-height:1.7"></div>
      <!-- Bekleyen uyarÄ±sÄ± -->
      <div id="uzatma-uyari" style="display:none;background:rgba(255,193,7,.12);border:1px solid rgba(255,193,7,.4);border-radius:8px;padding:10px 14px;margin-bottom:14px;font-size:12px;color:var(--warning)"></div>
      <div class="form-grid">
        <div class="form-group"><label>Uzatma SÃ¼resi (gÃ¼n) *</label><input type="number" id="uzatma-gun" min="1" max="365" placeholder="KaÃ§ gÃ¼n?" oninput="calcUzatma()"></div>
        <div class="form-group"><label>Yeni BitiÅŸ Tarihi</label><div id="uzatma-yeni-bit" style="padding:8px 12px;background:var(--surface3);border-radius:8px;font-weight:600;color:var(--success);font-size:14px">â€”</div></div>
        <div class="form-group"><label>Uzatma Ãœcreti (â‚º)</label><input type="number" id="uzatma-ucret" min="0" placeholder="0"></div>
        <div class="form-group"><label>Not (opsiyonel)</label><input type="text" id="uzatma-not" placeholder="Uzatma notu..."></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-uzatma')">Ä°ptal</button>
      <button class="btn btn-primary" onclick="saveUzatma()">ğŸ”„ Uzat</button>
    </div>
  </div>
</div>


<!-- HEDEF MODAL -->
<div class="modal-overlay" id="modal-hedef">
  <div class="modal" style="max-width:380px">
    <div class="modal-head">
      <div class="modal-title">ğŸ¯ AylÄ±k Gelir Hedefi</div>
      <button class="modal-close" onclick="closeModal('modal-hedef')">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Bu ay iÃ§in hedef gelir (â‚º)</label>
        <input type="number" id="hedef-input" min="0" step="1000" placeholder="Ã–rn: 15000">
      </div>
      <div style="font-size:12px;color:var(--text3);margin-top:6px">Hedef her ay sÄ±fÄ±rlanmaz, istediÄŸin zaman gÃ¼ncelleyebilirsin.</div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-hedef')">Ä°ptal</button>
      <button class="btn btn-success" onclick="saveHedef()">ğŸ’¾ Kaydet</button>
    </div>
  </div>
</div>

<!-- KARA LÄ°STE -->
<div class="page" id="page-karaliste">
  <div class="search-bar">
    <input type="text" class="search-input" placeholder="ğŸ” Kara listede ara..." id="kl-search" oninput="renderKaraListe()">
    <button class="btn btn-danger" onclick="openKLModal()">ğŸš« Kara Listeye Ekle</button>
  </div>
  <div class="section">
    <div class="section-head">
      <div class="section-title">ğŸš« Kara Liste</div>
      <div style="font-size:12px;color:var(--text2)">Bu mÃ¼ÅŸterilere kiralama yapÄ±lmak istendiÄŸinde sistem otomatik uyarÄ± verir</div>
    </div>
    <div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
      <thead><tr><th>MÃ¼ÅŸteri</th><th>Telefon</th><th>Eklenme Tarihi</th><th>Sebep</th><th>Ä°ÅŸlem</th></tr></thead>
      <tbody id="kl-tbl"></tbody>
    </table></div></div>
  </div>
</div>

<!-- EK GELÄ°R -->
<div class="page" id="page-ekgelir">
  <div class="search-bar">
    <input type="text" class="search-input" placeholder="ğŸ” Ara..." id="eg-search" oninput="renderEkGelir()">
    <button class="btn btn-success" onclick="openEkGelirModal()">+ Gelir Ekle</button>
  </div>
  <div class="cards">
    <div class="card green"><div class="card-icon">ğŸ’µ</div><div class="card-val" id="eg-toplam">â‚º0</div><div class="card-lbl">Toplam Ek Gelir</div></div>
    <div class="card"><div class="card-icon">ğŸ“…</div><div class="card-val" id="eg-bu-ay">â‚º0</div><div class="card-lbl">Bu Ay</div></div>
    <div class="card purple"><div class="card-icon">ğŸ“</div><div class="card-val" id="eg-kayit">0</div><div class="card-lbl">KayÄ±t SayÄ±sÄ±</div></div>
  </div>
  <div class="section"><div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
    <thead><tr><th>Tarih</th><th>AÃ§Ä±klama</th><th>Kaynak</th><th>Tutar</th><th>Ä°ÅŸlem</th></tr></thead>
    <tbody id="eg-tbl"></tbody>
  </table></div></div></div>
</div>

<!-- RAPORLAR -->
<div class="page" id="page-raporlar">
  <div class="report-period-bar">
    <button class="period-btn" onclick="setPeriod('gunluk',this)">GÃ¼nlÃ¼k</button>
    <button class="period-btn" onclick="setPeriod('haftalik',this)">HaftalÄ±k</button>
    <button class="period-btn active" onclick="setPeriod('aylik',this)">AylÄ±k</button>
    <button class="period-btn" onclick="setPeriod('yillik',this)">YÄ±llÄ±k</button>
    <button class="period-btn" onclick="setPeriod('ozel',this)">Ã–zel AralÄ±k</button>
    <div class="date-range-inputs" id="ozel-range" style="display:none">
      <input type="date" id="rep-baslangic">
      <span style="color:var(--text2)">â€”</span>
      <input type="date" id="rep-bitis">
      <button class="btn btn-primary btn-sm" onclick="renderRaporlar()">Uygula</button>
    </div>
  </div>
  <!-- GENEL KAR/ZARAR Ã–ZETÄ° -->
  <div id="karz-panel" style="background:var(--surface2);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:16px">
    <div style="font-size:13px;font-weight:700;color:var(--text2);margin-bottom:14px;text-transform:uppercase;letter-spacing:.5px">ğŸ“Š Genel KÃ¢r / Zarar Ã–zeti</div>
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:16px">
      <div style="background:var(--surface3);border-radius:10px;padding:12px 16px">
        <div style="font-size:11px;color:var(--text3);margin-bottom:4px">ğŸ’° Toplam PS Geliri</div>
        <div id="karz-ps-gelir" style="font-size:20px;font-weight:800;color:var(--success)">â‚º0</div>
      </div>
      <div style="background:var(--surface3);border-radius:10px;padding:12px 16px">
        <div style="font-size:11px;color:var(--text3);margin-bottom:4px">ğŸ’µ Toplam Ek Gelir</div>
        <div id="karz-ek-gelir" style="font-size:20px;font-weight:800;color:var(--success)">â‚º0</div>
      </div>
      <div style="background:var(--surface3);border-radius:10px;padding:12px 16px">
        <div style="font-size:11px;color:var(--text3);margin-bottom:4px">ğŸ›’ Oyun AlÄ±ÅŸ Maliyeti</div>
        <div id="karz-alis" style="font-size:20px;font-weight:800;color:var(--danger)">â‚º0</div>
      </div>
      <div style="background:var(--surface3);border-radius:10px;padding:12px 16px">
        <div style="font-size:11px;color:var(--text3);margin-bottom:4px">ğŸ® DLC / Ek Maliyet</div>
        <div id="karz-dlc" style="font-size:20px;font-weight:800;color:var(--danger)">â‚º0</div>
      </div>
    </div>
    <!-- Hesaplama gÃ¶sterimi -->
    <div style="background:var(--surface3);border-radius:10px;padding:14px 18px;display:flex;align-items:center;gap:10px;flex-wrap:wrap;font-size:13px">
      <span style="color:var(--success);font-weight:700" id="karz-toplam-gelir-lbl">â‚º0</span>
      <span style="color:var(--text3)">toplam gelir</span>
      <span style="color:var(--text3)">âˆ’</span>
      <span style="color:var(--danger);font-weight:700" id="karz-toplam-maliyet-lbl">â‚º0</span>
      <span style="color:var(--text3)">toplam maliyet</span>
      <span style="color:var(--text3)">=</span>
      <span id="karz-net-lbl" style="font-size:18px;font-weight:900">â‚º0</span>
      <span id="karz-net-badge" style="border-radius:6px;padding:3px 10px;font-size:12px;font-weight:700"></span>
    </div>
    <!-- Amorti Ã§ubuÄŸu -->
    <div style="margin-top:12px">
      <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--text3);margin-bottom:5px">
        <span>Maliyet KarÅŸÄ±lama OranÄ±</span>
        <span id="karz-oran-lbl">%0</span>
      </div>
      <div style="background:var(--surface3);border-radius:99px;height:8px;overflow:hidden">
        <div id="karz-oran-bar" style="height:100%;border-radius:99px;transition:width .6s;width:0%"></div>
      </div>
      <div id="karz-amorti-mesaj" style="font-size:12px;color:var(--text3);margin-top:6px"></div>
    </div>
  </div>

  <div class="cards">
    <div class="card green"><div class="card-icon">ğŸ’°</div><div class="card-val" id="rep-gelir">â‚º0</div><div class="card-lbl">DÃ¶nem PS Geliri</div></div>
    <div class="card green"><div class="card-icon">ğŸ’µ</div><div class="card-val" id="rep-ek-gelir">â‚º0</div><div class="card-lbl">DÃ¶nem Ek Gelir</div></div>
    <div class="card red"><div class="card-icon">ğŸ“‰</div><div class="card-val" id="rep-maliyet">â‚º0</div><div class="card-lbl">Toplam Maliyet</div><div class="card-sub" id="rep-mal-sub"></div></div>
    <div class="card"><div class="card-icon">ğŸ“Š</div><div class="card-val" id="rep-net">â‚º0</div><div class="card-lbl">Net K/Z</div></div>
    <div class="card purple"><div class="card-icon">ğŸ®</div><div class="card-val" id="rep-kira-sayisi">0</div><div class="card-lbl">DÃ¶nem Kiralamalar</div></div>
    <div class="card yellow"><div class="card-icon">ğŸ·ï¸</div><div class="card-val" id="rep-indirim">â‚º0</div><div class="card-lbl">Verilen Ä°ndirim</div></div>
    <div class="card orange"><div class="card-icon">ğŸ</div><div class="card-val" id="rep-hediye">0</div><div class="card-lbl">Hediye GÃ¼n</div></div>
  </div>
  <div class="section">
    <div class="section-head">
      <div class="section-title">ğŸ® Oyun BazlÄ± Maliyet & Kar/Zarar</div>
      <button class="btn btn-warning btn-sm" onclick="openMaliyetModal()">+ DLC / Ek Maliyet</button>
    </div>
    <div style="padding:12px 16px;border-bottom:1px solid var(--border);display:flex;gap:8px;flex-wrap:wrap;align-items:center">
      <input type="text" id="rep-oyun-search" placeholder="ğŸ” Oyun ara..." oninput="renderRaporlar()" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:6px 12px;color:var(--text);font-family:inherit;font-size:12px;width:160px">
      <div style="display:flex;gap:4px;flex-wrap:wrap">
        <button class="filter-btn active" id="rf-hepsi" onclick="setRepFilter('hepsi',this)">Hepsi</button>
        <button class="filter-btn" id="rf-karsil" onclick="setRepFilter('karsil',this)">âœ… KarÅŸÄ±landÄ±</button>
        <button class="filter-btn" id="rf-karsil-degil" onclick="setRepFilter('karsil-degil',this)">â³ KarÅŸÄ±lanmadÄ±</button>
        <button class="filter-btn" id="rf-super" onclick="setRepFilter('super',this)">ğŸ’ 2x+</button>
        <button class="filter-btn" id="rf-efsane" onclick="setRepFilter('efsane',this)">ğŸ† 5x+</button>
      </div>
      <select id="rep-oyun-sort" onchange="renderRaporlar()" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:6px 10px;color:var(--text);font-family:inherit;font-size:12px;cursor:pointer">
        <option value="net-desc">ğŸ’° En Ã‡ok Kar</option>
        <option value="net-asc">ğŸ“‰ En Az Kar</option>
        <option value="ratio-desc">ğŸ† En Ã‡ok Tamamlanan (x)</option>
        <option value="gelir-desc">ğŸ“ˆ En YÃ¼ksek Gelir</option>
        <option value="kira-desc">ğŸ® En Ã‡ok Kiralanan</option>
        <option value="maliyet-desc">ğŸ’¸ En YÃ¼ksek Maliyet</option>
        <option value="ad-asc">ğŸ”¤ A â†’ Z</option>
      </select>
    </div>
    <div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
      <thead><tr><th>Oyun</th><th>AlÄ±ÅŸ</th><th>Ek Maliyet</th><th>Toplam Maliyet</th><th>DÃ¶nem Geliri</th><th>Toplam Gelir</th><th>Net K/Z</th><th>Durum</th><th></th></tr></thead>
      <tbody id="rep-oyun-tbl"></tbody>
    </table></div></div>
  </div>
  <div class="section">
    <div class="section-head"><div class="section-title">ğŸ’¸ Ek Maliyet KayÄ±tlarÄ±</div></div>
    <div class="section-body" style="padding:0"><div class="tbl-wrap"><table>
      <thead><tr><th>Oyun</th><th>AÃ§Ä±klama</th><th>Tarih</th><th>Tutar</th><th>Ä°ÅŸlem</th></tr></thead>
      <tbody id="rep-dlc-tbl"></tbody>
    </table></div></div>
  </div>
  <div class="section">
    <div class="section-head"><div class="section-title" id="rep-chart-title">ğŸ“Š DÃ¶nem Gelir GrafiÄŸi</div></div>
    <div class="section-body" id="rep-chart"></div>
  </div>
</div>

<div class="section" style="margin-top:16px">
  <div class="section-head">
    <div class="section-title">ğŸ‘¥ MÃ¼ÅŸteri Raporu</div>
    <select id="rep-mus-sort" onchange="renderMusRapor()" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:6px 10px;color:var(--text);font-family:inherit;font-size:12px;cursor:pointer">
      <option value="gelir">ğŸ’° En Ã‡ok Gelir</option>
      <option value="sayi">ğŸ® En Ã‡ok Kiralama</option>
      <option value="ortalama">ğŸ“Š En YÃ¼ksek Ortalama</option>
      <option value="son">ğŸ• Son Kiralama</option>
    </select>
  </div>
  <div class="section-body" style="padding:12px">
    <div id="rep-mus-podium" style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:14px"></div>
    <div style="overflow-x:auto">
      <table class="table" style="margin:0">
        <thead><tr>
          <th style="width:36px;text-align:center">#</th>
          <th>MÃ¼ÅŸteri</th>
          <th style="text-align:right">Kiralama</th>
          <th style="text-align:right">Toplam Gelir</th>
          <th style="text-align:right">Ortalama</th>
          <th>Favori Oyun</th>
          <th style="text-align:center">Tip</th>
          <th>Son Kiralama</th>
        </tr></thead>
        <tbody id="rep-mus-tbl"></tbody>
      </table>
    </div>
    <div id="rep-mus-footer" style="text-align:center;font-size:12px;color:var(--text3);padding:8px 0 2px"></div>
  </div>
</div>

<!-- ======= MODALS ======= -->

<!-- OYUN -->
<div class="modal-overlay" id="modal-oyun">
  <div class="modal">
    <div class="modal-head"><div class="modal-title" id="modal-oyun-title">ğŸ® Yeni Oyun Ekle</div><button class="modal-close" onclick="closeModal('modal-oyun')">âœ•</button></div>
    <div class="modal-body">
      <input type="hidden" id="oyun-eid">
      <div class="form-grid">
        <div class="form-group full"><label>Oyun AdÄ± *</label><input type="text" id="oyun-ad" placeholder="Ã–rn: GTA VI"></div>
        <div class="form-group"><label>Platform *</label><select id="oyun-platform"><option>PS5</option><option>PS4</option><option>PS4/PS5</option></select></div>
        <div class="form-group"><label>TÃ¼r</label><select id="oyun-tur"><option>Aksiyon</option><option>Spor</option><option>RPG</option><option>FPS</option><option>YarÄ±ÅŸ</option><option>Macera</option><option>DÃ¶vÃ¼ÅŸ</option><option>Korku</option><option>Strateji</option><option>DiÄŸer</option></select></div>
        <div class="form-group"><label>Ã‡Ä±kÄ±ÅŸ Tarihi</label><input type="date" id="oyun-cikis"></div>
        <div class="form-group"><label>AlÄ±ÅŸ FiyatÄ± (â‚º)</label><input type="number" id="oyun-alis" placeholder="0" min="0"></div>
        <div class="form-group"><label>ğŸ”µ Primary GÃ¼nlÃ¼k (â‚º)</label><input type="number" id="oyun-gunluk-pri" placeholder="0" min="0"></div>
        <div class="form-group"><label>ğŸŸ£ Secondary GÃ¼nlÃ¼k (â‚º)</label><input type="number" id="oyun-gunluk-sec" placeholder="0" min="0"></div>
        <div class="form-group"><label>ğŸ”µ Primary HaftalÄ±k (â‚º) <span style="color:var(--text3);font-size:11px">(opsiyonel, boÅŸsa gÃ¼nlÃ¼kÃ—7)</span></label><input type="number" id="oyun-haftalik-pri" placeholder="0" min="0"></div>
        <div class="form-group"><label>ğŸŸ£ Secondary HaftalÄ±k (â‚º) <span style="color:var(--text3);font-size:11px">(opsiyonel, boÅŸsa gÃ¼nlÃ¼kÃ—7)</span></label><input type="number" id="oyun-haftalik-sec" placeholder="0" min="0"></div>
        <div class="form-group full">
          <label>Ã‡ift Primary Kiralama</label>
          <div class="toggle-wrap">
            <label class="toggle"><input type="checkbox" id="oyun-cift-primary"><span class="toggle-slider"></span></label>
            <span class="toggle-lbl">Bu oyun aynÄ± anda 2 Primary hesapta kiralanabilir (Dijital kopya paylaÅŸÄ±mÄ± vb.)</span>
          </div>
        </div>
        <div class="form-group full"><label>Notlar</label><textarea id="oyun-notlar" placeholder="Notlar..."></textarea></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-oyun')">Ä°ptal</button>
      <button class="btn btn-primary" onclick="saveOyun()">ğŸ’¾ Kaydet</button>
    </div>
  </div>
</div>

<!-- MÃœÅTERÄ° -->
<div class="modal-overlay" id="modal-musteri">
  <div class="modal">
    <div class="modal-head"><div class="modal-title" id="modal-musteri-title">ğŸ‘¤ Yeni MÃ¼ÅŸteri</div><button class="modal-close" onclick="closeModal('modal-musteri')">âœ•</button></div>
    <div class="modal-body">
      <input type="hidden" id="musteri-eid">
      <div class="form-grid">
        <div class="form-group"><label>Ad *</label><input type="text" id="musteri-ad" placeholder="Ad"></div>
        <div class="form-group"><label>Soyad *</label><input type="text" id="musteri-soyad" placeholder="Soyad"></div>
        <div class="form-group"><label>Telefon *</label><input type="tel" id="musteri-tel" placeholder="05xx xxx xx xx"></div>
        <div class="form-group"><label>E-posta</label><input type="email" id="musteri-email" placeholder="@"></div>
        <div class="form-group full"><label>Adres</label><textarea id="musteri-adres" placeholder="Adres..."></textarea></div>
        <div class="form-group full"><label>Notlar</label><textarea id="musteri-notlar" placeholder="..."></textarea></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-musteri')">Ä°ptal</button>
      <button class="btn btn-primary" onclick="saveMusteri()">ğŸ’¾ Kaydet</button>
    </div>
  </div>
</div>

<!-- KÄ°RALAMA -->
<div class="modal-overlay" id="modal-kiralama">
  <div class="modal" style="max-width:720px">
    <div class="modal-head"><div class="modal-title" id="kira-modal-title">ğŸ“‹ Kiralama OluÅŸtur</div><button class="modal-close" onclick="closeModal('modal-kiralama')">âœ•</button></div>
    <div class="modal-body">
      <input type="hidden" id="kira-eid">
      <div class="form-grid">
        <div class="form-group"><label>MÃ¼ÅŸteri *</label><select id="kira-musteri"></select></div>
        <div class="form-group"><label>Oyun *</label><select id="kira-oyun" onchange="onKiraOyunChange()"></select></div>
        <div class="form-group" id="kopya-secim-grup" style="display:none"><label>ğŸ“€ Hesap SeÃ§imi</label><select id="kira-kopya-idx" onchange="calcKira()"><option value="0">ğŸ® Ana Hesap</option></select></div>
        <div class="form-group"><label>Kiralama Tipi *</label><select id="kira-tip" onchange="calcKira()"><option value="primary">ğŸ”µ Primary</option><option value="secondary">ğŸŸ£ Secondary</option></select></div>
        <div class="form-group"><label>SÃ¼re Tipi</label><select id="kira-sure-tip" onchange="calcKira()"><option value="gunluk">GÃ¼nlÃ¼k</option><option value="haftalik">HaftalÄ±k</option><option value="manuel">Manuel</option></select></div>
        <div class="form-group"><label>BaÅŸlangÄ±Ã§ *</label><input type="date" id="kira-bas" onchange="calcKira()"></div>
        <div class="form-group"><label>BitiÅŸ *</label><input type="date" id="kira-bit" onchange="calcKira()"></div>
        <div class="form-group"><label>BrÃ¼t Ãœcret (â‚º)</label><input type="number" id="kira-ucret" placeholder="0" min="0" oninput="calcIndirim()"></div>
        <div class="form-group"><label>Ä°ndirim (%)</label><input type="number" id="kira-indirim-pct" placeholder="0" min="0" max="100" oninput="calcIndirim()"></div>
        <div class="form-group"><label>Ä°ndirim (â‚º)</label><input type="number" id="kira-indirim-tl" placeholder="0" min="0" oninput="calcIndirimTL()"></div>
        <div class="form-group"><label>Net Ãœcret (â‚º)</label><input type="number" id="kira-net" placeholder="0" min="0" style="border-color:var(--success);color:var(--success);font-weight:700"></div>
        <div class="form-group"><label>Ã–n Ã–deme (â‚º)</label><input type="number" id="kira-on-odeme" placeholder="0" min="0"></div>
        <div class="form-group full"><label>Notlar</label><textarea id="kira-notlar" placeholder="..."></textarea></div>
      </div>
      <div class="hediye-info" id="hediye-info" style="display:none">
        <div style="font-weight:700;margin-bottom:8px">ğŸ Hediye GÃ¼n SeÃ§in (opsiyonel):</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <label style="display:flex;align-items:center;gap:6px;cursor:pointer;padding:7px 12px;border-radius:8px;border:1px solid rgba(0,229,160,.3);background:rgba(0,229,160,.07);font-size:12px;font-weight:600;text-transform:none;letter-spacing:0">
            <input type="radio" name="hediye" value="0" id="h0" style="background:none;border:none;padding:0;width:auto"> Hediye Verme
          </label>
          <label id="h10-label" style="display:flex;align-items:center;gap:6px;cursor:pointer;padding:7px 12px;border-radius:8px;border:1px solid rgba(0,229,160,.3);background:rgba(0,229,160,.07);font-size:12px;font-weight:600;text-transform:none;letter-spacing:0">
            <input type="radio" name="hediye" value="5" id="h10" style="background:none;border:none;padding:0;width:auto"> 10 gÃ¼n al â†’ <span style="color:var(--success)">+5 gÃ¼n hediye</span>
          </label>
          <label id="h20-label" style="display:flex;align-items:center;gap:6px;cursor:pointer;padding:7px 12px;border-radius:8px;border:1px solid rgba(0,229,160,.3);background:rgba(0,229,160,.07);font-size:12px;font-weight:600;text-transform:none;letter-spacing:0">
            <input type="radio" name="hediye" value="10" id="h20" style="background:none;border:none;padding:0;width:auto"> 20 gÃ¼n al â†’ <span style="color:var(--success)">+10 gÃ¼n hediye</span>
          </label>
        </div>
        <div id="hediye-uyari" style="margin-top:6px;font-size:11px;color:var(--text3)"></div>
      </div>
      <div class="info-box" id="kira-ozet" style="margin-top:12px;display:none">
        <div class="info-row"><span class="info-row-lbl">BrÃ¼t Tutar</span><span id="ko-brut">â‚º0</span></div>
        <div class="info-row"><span class="info-row-lbl">Ä°ndirim</span><span id="ko-ind" class="loss">â‚º0</span></div>
        <div class="info-row"><span class="info-row-lbl">Net Tutar</span><span id="ko-net" class="profit">â‚º0</span></div>
        <div class="info-row"><span class="info-row-lbl">SÃ¼re</span><span id="ko-sure">-</span></div>
        <div class="info-row"><span class="info-row-lbl">Tip</span><span id="ko-tip">-</span></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-kiralama')">Ä°ptal</button>
      <button class="btn btn-success" id="kira-save-btn" onclick="saveKiralama()">âœ… Kiralama BaÅŸlat</button>
    </div>
  </div>
</div>

<!-- REZERVASYON -->
<div class="modal-overlay" id="modal-rezerv">
  <div class="modal" style="max-width:500px">
    <div class="modal-head">
      <div class="modal-title">â³ Bekleme Listesine Ekle</div>
      <button class="modal-close" onclick="closeModal('modal-rezerv')">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="form-grid">
        <div class="form-group full"><label>MÃ¼ÅŸteri *</label><select id="rezerv-musteri"></select></div>
        <div class="form-group full"><label>Oyun *</label><select id="rezerv-oyun"></select></div>
        <div class="form-group"><label>Kiralama Tipi</label><select id="rezerv-tip"><option value="primary">ğŸ”µ Primary</option><option value="secondary">ğŸŸ£ Secondary</option></select></div>
        <div class="form-group"><label>Tahmini Uygunluk Tarihi</label><input type="date" id="rezerv-tarih"></div>
        <div class="form-group full"><label>Not (opsiyonel)</label><textarea id="rezerv-not" placeholder="MÃ¼ÅŸterinin notu..."></textarea></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-rezerv')">Ä°ptal</button>
      <button class="btn btn-purple" onclick="saveRezervason()">â³ Beklemeye Al</button>
    </div>
  </div>
</div>

<!-- EK MALÄ°YET -->
<div class="modal-overlay" id="modal-maliyet">
  <div class="modal" style="max-width:480px">
    <div class="modal-head"><div class="modal-title">ğŸ’¸ Ek Maliyet (DLC/Season Pass)</div><button class="modal-close" onclick="closeModal('modal-maliyet')">âœ•</button></div>
    <div class="modal-body">
      <div class="form-grid">
        <div class="form-group full"><label>Oyun *</label><select id="maliyet-oyun"></select></div>
        <div class="form-group full"><label>AÃ§Ä±klama *</label><input type="text" id="maliyet-aciklama" placeholder="DLC paketi, Season Pass..."></div>
        <div class="form-group"><label>Tutar (â‚º) *</label><input type="number" id="maliyet-tutar" placeholder="0" min="0"></div>
        <div class="form-group"><label>Tarih *</label><input type="date" id="maliyet-tarih"></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-maliyet')">Ä°ptal</button>
      <button class="btn btn-warning" onclick="saveMaliyet()">ğŸ’¾ Kaydet</button>
    </div>
  </div>
</div>

<!-- MÃœÅTERÄ° DETAY -->
<div class="modal-overlay" id="modal-musteri-detay">
  <div class="modal" style="max-width:720px">
    <div class="modal-head"><div class="modal-title" id="mmd-title">MÃ¼ÅŸteri</div><button class="modal-close" onclick="closeModal('modal-musteri-detay')">âœ•</button></div>
    <div class="modal-body" id="mmd-body"></div>
  </div>
</div>

<!-- OYUN DETAY -->
<div class="modal-overlay" id="modal-oyun-detay">
  <div class="modal" style="max-width:720px">
    <div class="modal-head"><div class="modal-title" id="mod-title">Oyun</div><button class="modal-close" onclick="closeModal('modal-oyun-detay')">âœ•</button></div>
    <div class="modal-body" id="mod-body"></div>
  </div>
</div>

<!-- KARA LÄ°STE EKLE -->
<div class="modal-overlay" id="modal-kl-ekle">
  <div class="modal" style="max-width:500px">
    <div class="modal-head"><div class="modal-title">ğŸš« Kara Listeye Ekle</div><button class="modal-close" onclick="closeModal('modal-kl-ekle')">âœ•</button></div>
    <div class="modal-body">
      <div class="form-grid">
        <div class="form-group full"><label>MÃ¼ÅŸteri *</label><select id="kl-musteri"></select></div>
        <div class="form-group full"><label>Sebep *</label><textarea id="kl-sebep" placeholder="Neden kara listeye alÄ±ndÄ±ÄŸÄ±nÄ± yazÄ±n... (Ã¶deme sorunu, hasarlÄ± iade, vb.)"></textarea></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-kl-ekle')">Ä°ptal</button>
      <button class="btn btn-danger" onclick="saveKL()">ğŸš« Kara Listeye Ekle</button>
    </div>
  </div>
</div>

<!-- KARA LÄ°STE UYARI -->
<div class="modal-overlay" id="modal-kl-uyari">
  <div class="modal" style="max-width:460px">
    <div class="modal-head"><div class="modal-title" style="color:var(--danger)">âš ï¸ Kara Liste UyarÄ±sÄ±</div><button class="modal-close" onclick="closeModal('modal-kl-uyari')">âœ•</button></div>
    <div class="modal-body">
      <div class="kl-uyari-modal">
        <div class="kl-uyari-icon">ğŸš«</div>
        <div class="kl-uyari-title">Bu MÃ¼ÅŸteri Kara Listede!</div>
        <div class="kl-uyari-text" id="kl-uyari-text"></div>
      </div>
      <div style="margin-top:16px;padding:12px;background:var(--surface2);border-radius:8px;font-size:12px;color:var(--text2)">
        Yine de devam etmek istiyor musunuz? Bu mÃ¼ÅŸteriyle kiralama yapmak riskli olabilir.
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-kl-uyari')">âŒ VazgeÃ§</button>
      <button class="btn btn-danger" id="kl-devam-btn">âš ï¸ Devam Et (Riskli)</button>
    </div>
  </div>
</div>

<!-- UZAKTAN DEAKTÄ°F -->
<div class="modal-overlay" id="modal-deaktif">
  <div class="modal" style="max-width:480px">
    <div class="modal-head"><div class="modal-title">ğŸ“¡ Uzaktan Primary Deaktif</div><button class="modal-close" onclick="closeModal('modal-deaktif')">âœ•</button></div>
    <div class="modal-body">
      <div style="background:rgba(255,71,87,.1);border:1px solid rgba(255,71,87,.3);border-radius:10px;padding:14px;margin-bottom:16px">
        <div style="font-weight:700;color:var(--danger);margin-bottom:6px">âš ï¸ Dikkat!</div>
        <div style="font-size:12px;color:var(--text2);line-height:1.6">Bu iÅŸlem, seÃ§ilen oyunun primary hesabÄ±nÄ± <strong style="color:var(--text)">uzaktan deaktif</strong> etmek iÃ§in kullanÄ±lÄ±r. Bu Ã¶zelliÄŸi yalnÄ±zca gerektiÄŸinde ve PlayStation'Ä±n <strong style="color:var(--warning)">6 ay kuralÄ±na</strong> uygun ÅŸekilde kullanÄ±n.</div>
      </div>
      <div class="form-grid">
        <div class="form-group full"><label>Oyun *</label><select id="deaktif-oyun"></select></div>
        <div class="form-group full"><label>Tarih</label><input type="date" id="deaktif-tarih"></div>
        <div class="form-group full"><label>Not</label><textarea id="deaktif-not" placeholder="Ä°steÄŸe baÄŸlÄ± not..."></textarea></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-deaktif')">Ä°ptal</button>
      <button class="btn btn-danger" onclick="saveDeaktif()">ğŸ“¡ Deaktif Et</button>
    </div>
  </div>
</div>

<!-- EK GELÄ°R EKLE -->
<div class="modal-overlay" id="modal-eg">
  <div class="modal" style="max-width:480px">
    <div class="modal-head"><div class="modal-title" id="eg-modal-title">ğŸ’µ Ek Gelir Ekle</div><button class="modal-close" onclick="closeModal('modal-eg')">âœ•</button></div>
    <div class="modal-body">
      <input type="hidden" id="eg-eid">
      <div class="form-grid">
        <div class="form-group full"><label>AÃ§Ä±klama *</label><input type="text" id="eg-aciklama" placeholder="Ã–rn: DÃ¼kkan kirasÄ±, konsol satÄ±ÅŸÄ±, aksesuar..."></div>
        <div class="form-group full"><label>Kaynak</label><input type="text" id="eg-kaynak" placeholder="Ã–rn: Kira geliri, ek iÅŸ, vb."></div>
        <div class="form-group"><label>Tutar (â‚º) *</label><input type="number" id="eg-tutar" placeholder="0" min="0"></div>
        <div class="form-group"><label>Tarih *</label><input type="date" id="eg-tarih"></div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-outline" onclick="closeModal('modal-eg')">Ä°ptal</button>
      <button class="btn btn-success" id="eg-save-btn" onclick="saveEkGelir()">ğŸ’¾ Kaydet</button>
    </div>
  </div>
</div>

<div class="toast-container" id="toast-container"></div>

<script>



























// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FIREBASE ENTEGRASYONU
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const firebaseConfig = {
  apiKey: "AIzaSyC6HVGzTwtq_22hu6Y1kv13nEaT6KRimaQ",
  authDomain: "gamerental-fb121.firebaseapp.com",
  projectId: "gamerental-fb121",
  storageBucket: "gamerental-fb121.firebasestorage.app",
  messagingSenderId: "631635609738",
  appId: "1:631635609738:web:e41950bd3e538b1689c573"
};

firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let currentUser = null;
let saveTimeout = null;
let isSyncing = false;

// =================== UTILS ===================
const TR = new Intl.DateTimeFormat('tr-TR',{day:'2-digit',month:'2-digit',year:'numeric'});
function fmtDate(s){ if(!s)return '-'; try{return TR.format(new Date(s+'T00:00:00'));}catch(e){return s;} }
function fmt(n){ return 'â‚º'+(n||0).toLocaleString('tr-TR',{minimumFractionDigits:0,maximumFractionDigits:0}); }
function today(){ return new Date().toISOString().split('T')[0]; }
function isoToday(){ return today(); }
function daysDiff(d1,d2){ return Math.round((new Date(d2)-new Date(d1))/(86400000)); }
function addDays(d,n){ const dt=new Date(d+'T00:00:00'); dt.setDate(dt.getDate()+n); return dt.toISOString().split('T')[0]; }

function toast(msg,type='info'){
  const c=document.getElementById('toast-container');
  const t=document.createElement('div');
  t.className=`toast ${type}`;
  t.innerHTML=`<span>${{success:'âœ…',error:'âŒ',info:'â„¹ï¸',warning:'âš ï¸'}[type]||'â„¹ï¸'}</span><span>${msg}</span>`;
  c.appendChild(t);
  setTimeout(()=>{t.style.opacity='0';t.style.transition='opacity .3s';setTimeout(()=>t.remove(),300);},3200);
}

function openModal(id){ document.getElementById(id).classList.add('open'); }
function closeModal(id){ document.getElementById(id).classList.remove('open'); }
document.addEventListener('click',e=>{ if(e.target.classList.contains('modal-overlay')) e.target.classList.remove('open'); });

// =================== DATA ===================
let D={
  oyunlar:[],musteriler:[],kiralamalar:[],rezervasyonlar:[],ekMaliyetler:[],
  karaListe:[],   // {id, musteriId, sebep, tarih}
  ekGelirler:[],  // {id, aciklama, kaynak, tutar, tarih}
  // deaktif geÃ§miÅŸi oyun iÃ§inde tutulacak: o.deaktifGecmisi=[{tarih, not}]
  nextId:{o:1,m:1,k:1,r:1,mal:1,kl:1,eg:1}
};
function save(){
  try{localStorage.setItem('psv4',JSON.stringify(D));}catch(e){}
  if(!currentUser) return;
  clearTimeout(saveTimeout);
  setSyncStatus('saving');
  saveTimeout=setTimeout(async()=>{ await saveToFirestore(); },1500);
}
function load(){
  // Eski Ã¶rnek verileri temizle
  localStorage.removeItem('psv3');
  try{
    const d=localStorage.getItem('psv4');
    if(d){
      const parsed=JSON.parse(d);
      // EÄŸer Ã¶rnek mÃ¼ÅŸteri (Ahmet/Mehmet/Zeynep) varsa eski veri - sÄ±fÄ±rla
      const ornekVar=parsed.musteriler&&parsed.musteriler.some(m=>['Ahmet','Mehmet','Zeynep'].includes(m.ad));
      if(!ornekVar){D=parsed;return;}
      localStorage.removeItem('psv4');
    }
  }catch(e){}
  // Ä°lk aÃ§Ä±lÄ±ÅŸta gerÃ§ek veri yÃ¼kle
  const realData={"oyunlar":[{"id":1,"ad":"Astro Bot","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1635.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":62,"toplamGelir":12699.0},{"id":2,"ad":"Star Wars Outlaws","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":2450.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":900.0},{"id":3,"ad":"FIFA 25","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1230.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":100.0},{"id":4,"ad":"Call of Duty Black Ops6","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":2475.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":25,"toplamGelir":7120.0},{"id":5,"ad":"Silent Hill2","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1680.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":16,"toplamGelir":3430.0},{"id":6,"ad":"Metaphore reFantazio","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":2250.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":1000.0},{"id":7,"ad":"Life is Strange Double Exposure","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1625.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":9,"toplamGelir":1800.0},{"id":8,"ad":"Lego Horizon","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1630.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":525.0},{"id":9,"ad":"Dragon Age Veilguard","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":2065.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":3,"toplamGelir":800.0},{"id":10,"ad":"Smurfs Dreams","platform":"PS5","tur":"DiÄŸer","gunluk":20,"haftalik":140,"alis":1240.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":370.0},{"id":11,"ad":"Kingdom Come Deliverance2","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":3077.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":6,"toplamGelir":2795.0},{"id":12,"ad":"Split Fiction","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1800.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":33,"toplamGelir":7900.0},{"id":13,"ad":"Assasin's Creed Shadows","platform":"PS5","tur":"DiÄŸer","gunluk":32,"haftalik":224,"alis":3000.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":9,"toplamGelir":3243.0},{"id":14,"ad":"Khazan","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1775.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":200.0},{"id":15,"ad":"Doom the DarkAges","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":3280.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":3,"toplamGelir":1550.0},{"id":16,"ad":"The Alters","platform":"PS5","tur":"DiÄŸer","gunluk":20,"haftalik":140,"alis":1229.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":2,"toplamGelir":175.0},{"id":17,"ad":"Death Stranding2","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":2743.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":10,"toplamGelir":2920.0},{"id":18,"ad":"Wuchang Fallen Feathers","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1410.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":3,"toplamGelir":875.0},{"id":19,"ad":"Mafia the Old Country","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":2350.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":15,"toplamGelir":3255.0},{"id":20,"ad":"Echoes of the End","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1749.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":2,"toplamGelir":400.0},{"id":21,"ad":"Metal Gear Solid Delta: Snake Eater","platform":"PS5","tur":"DiÄŸer","gunluk":40,"haftalik":280,"alis":2350.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":11,"toplamGelir":2520.0},{"id":22,"ad":"Gears of War Reloaded","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1407.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":3,"toplamGelir":525.0},{"id":23,"ad":"Cronos: the New Dawn","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1867.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":10,"toplamGelir":2255.0},{"id":24,"ad":"Lost Soul Aside","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":1867.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":175.0},{"id":25,"ad":"Hell is Us","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":1870.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":870.0},{"id":26,"ad":"Borderlands4","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":2339.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":3,"toplamGelir":875.0},{"id":27,"ad":"Dying Light: the Beast","platform":"PS5","tur":"DiÄŸer","gunluk":35,"haftalik":245,"alis":1871.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":8,"toplamGelir":1525.0},{"id":28,"ad":"Silent Hill f","platform":"PS5","tur":"DiÄŸer","gunluk":40,"haftalik":280,"alis":2339.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":9,"toplamGelir":2925.0},{"id":29,"ad":"Ghost of Yotei","platform":"PS5","tur":"DiÄŸer","gunluk":40,"haftalik":280,"alis":2344.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":28,"toplamGelir":13800.0},{"id":30,"ad":"Call of Duty Black Ops7","platform":"PS5","tur":"DiÄŸer","gunluk":45,"haftalik":315,"alis":3199.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":2590.0},{"id":31,"ad":"Battlefield6","platform":"PS5","tur":"DiÄŸer","gunluk":40,"haftalik":280,"alis":2350.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":11,"toplamGelir":3050.0},{"id":32,"ad":"Little Nightmares3","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1410.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":1250.0},{"id":33,"ad":"Ninja Gaiden4","platform":"PS5","tur":"DiÄŸer","gunluk":45,"haftalik":315,"alis":2865.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":4,"toplamGelir":850.0},{"id":34,"ad":"Vampire: the Masquerade Bloodlines2","platform":"PS5","tur":"DiÄŸer","gunluk":40,"haftalik":280,"alis":1910.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":3,"toplamGelir":655.0},{"id":35,"ad":"The Outer Worlds2","platform":"PS5","tur":"DiÄŸer","gunluk":45,"haftalik":315,"alis":2999.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":2,"toplamGelir":540.0},{"id":36,"ad":"Dispatch","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1499.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":11,"toplamGelir":2135.0},{"id":37,"ad":"Stalker2","platform":"PS5","tur":"DiÄŸer","gunluk":45,"haftalik":315,"alis":2353.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":2,"toplamGelir":1300.0},{"id":38,"ad":"Lego Party","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":956.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":250.0},{"id":39,"ad":"Lego Voyagers","platform":"PS5","tur":"DiÄŸer","gunluk":20,"haftalik":140,"alis":863.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":200.0},{"id":40,"ad":"Code Vein2","platform":"PS5","tur":"DiÄŸer","gunluk":40,"haftalik":280,"alis":2581.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":1,"toplamGelir":175.0},{"id":41,"ad":"Reanimal","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1749.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":7,"toplamGelir":1185.0},{"id":42,"ad":"God of War Sons of Sparta","platform":"PS5","tur":"DiÄŸer","gunluk":30,"haftalik":210,"alis":1749.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":5,"toplamGelir":1025.0},{"id":45,"ad":"Tomb Raider Remastered","platform":"PS5","tur":"DiÄŸer","gunluk":25,"haftalik":175,"alis":1574.0,"cikis":null,"ciftPrimary":false,"notlar":"","deaktifGecmisi":[],"durum":"mevcut","kiralamaSayisi":0,"toplamGelir":0}],"musteriler":[{"id":1,"ad":"","soyad":"MERT","tel":"MERT","email":"","adres":"","notlar":"Numara: MERT"},{"id":2,"ad":"","soyad":"5305575627","tel":"5305575627","email":"","adres":"","notlar":"Numara: 5305575627"},{"id":3,"ad":"","soyad":"5389125557","tel":"5389125557","email":"","adres":"","notlar":"Numara: 5389125557"},{"id":4,"ad":"","soyad":"5384437939","tel":"5384437939","email":"","adres":"","notlar":"Numara: 5384437939"},{"id":5,"ad":"","soyad":"5372036879","tel":"5372036879","email":"","adres":"","notlar":"Numara: 5372036879"},{"id":6,"ad":"","soyad":"5318182441","tel":"5318182441","email":"","adres":"","notlar":"Numara: 5318182441"},{"id":7,"ad":"","soyad":"5337859390","tel":"5337859390","email":"","adres":"","notlar":"Numara: 5337859390"},{"id":8,"ad":"","soyad":"5465543501","tel":"5465543501","email":"","adres":"","notlar":"Numara: 5465543501"},{"id":9,"ad":"","soyad":"5432919433","tel":"5432919433","email":"","adres":"","notlar":"Numara: 5432919433"},{"id":10,"ad":"","soyad":"5319487999","tel":"5319487999","email":"","adres":"","notlar":"Numara: 5319487999"},{"id":11,"ad":"","soyad":"5327496021","tel":"5327496021","email":"","adres":"","notlar":"Numara: 5327496021"},{"id":12,"ad":"","soyad":"17632769434","tel":"17632769434","email":"","adres":"","notlar":"Numara: 17632769434"},{"id":13,"ad":"","soyad":"5532156105","tel":"5532156105","email":"","adres":"","notlar":"Numara: 5532156105"},{"id":14,"ad":"","soyad":"5359810081","tel":"5359810081","email":"","adres":"","notlar":"Numara: 5359810081"},{"id":15,"ad":"","soyad":"5426958054","tel":"5426958054","email":"","adres":"","notlar":"Numara: 5426958054"},{"id":16,"ad":"","soyad":"5374740177","tel":"5374740177","email":"","adres":"","notlar":"Numara: 5374740177"},{"id":17,"ad":"","soyad":"5323033935","tel":"5323033935","email":"","adres":"","notlar":"Numara: 5323033935"},{"id":18,"ad":"","soyad":"5532999028","tel":"5532999028","email":"","adres":"","notlar":"Numara: 5532999028"},{"id":19,"ad":"","soyad":"5301702504","tel":"5301702504","email":"","adres":"","notlar":"Numara: 5301702504"},{"id":20,"ad":"","soyad":"5301678505","tel":"5301678505","email":"","adres":"","notlar":"Numara: 5301678505"},{"id":21,"ad":"","soyad":"5078357457","tel":"5078357457","email":"","adres":"","notlar":"Numara: 5078357457"},{"id":22,"ad":"","soyad":"5379811130","tel":"5379811130","email":"","adres":"","notlar":"Numara: 5379811130"},{"id":23,"ad":"","soyad":"5545491008","tel":"5545491008","email":"","adres":"","notlar":"Numara: 5545491008"},{"id":24,"ad":"","soyad":"5464829922","tel":"5464829922","email":"","adres":"","notlar":"Numara: 5464829922"},{"id":25,"ad":"","soyad":"447570537139","tel":"447570537139","email":"","adres":"","notlar":"Numara: 447570537139"},{"id":26,"ad":"","soyad":"5374703206","tel":"5374703206","email":"","adres":"","notlar":"Numara: 5374703206"},{"id":27,"ad":"","soyad":"5462582509","tel":"5462582509","email":"","adres":"","notlar":"Numara: 5462582509"},{"id":28,"ad":"","soyad":"5394632767","tel":"5394632767","email":"","adres":"","notlar":"Numara: 5394632767"},{"id":29,"ad":"","soyad":"5316849572","tel":"5316849572","email":"","adres":"","notlar":"Numara: 5316849572"},{"id":30,"ad":"","soyad":"5365628720","tel":"5365628720","email":"","adres":"","notlar":"Numara: 5365628720"},{"id":31,"ad":"","soyad":"5546660866","tel":"5546660866","email":"","adres":"","notlar":"Numara: 5546660866"},{"id":32,"ad":"","soyad":"5434363241","tel":"5434363241","email":"","adres":"","notlar":"Numara: 5434363241"},{"id":33,"ad":"","soyad":"5071896176","tel":"5071896176","email":"","adres":"","notlar":"Numara: 5071896176"},{"id":34,"ad":"","soyad":"5534273793","tel":"5534273793","email":"","adres":"","notlar":"Numara: 5534273793"},{"id":35,"ad":"","soyad":"5399338674","tel":"5399338674","email":"","adres":"","notlar":"Numara: 5399338674"},{"id":36,"ad":"","soyad":"5358472465","tel":"5358472465","email":"","adres":"","notlar":"Numara: 5358472465"},{"id":37,"ad":"","soyad":"5052963604","tel":"5052963604","email":"","adres":"","notlar":"Numara: 5052963604"},{"id":38,"ad":"","soyad":"5383005583","tel":"5383005583","email":"","adres":"","notlar":"Numara: 5383005583"},{"id":39,"ad":"","soyad":"5434198560","tel":"5434198560","email":"","adres":"","notlar":"Numara: 5434198560"},{"id":40,"ad":"","soyad":"5315427680","tel":"5315427680","email":"","adres":"","notlar":"Numara: 5315427680"},{"id":41,"ad":"","soyad":"5528083510","tel":"5528083510","email":"","adres":"","notlar":"Numara: 5528083510"},{"id":42,"ad":"","soyad":"5512125707","tel":"5512125707","email":"","adres":"","notlar":"Numara: 5512125707"},{"id":43,"ad":"","soyad":"5439468221","tel":"5439468221","email":"","adres":"","notlar":"Numara: 5439468221"},{"id":44,"ad":"","soyad":"5055626278","tel":"5055626278","email":"","adres":"","notlar":"Numara: 5055626278"},{"id":45,"ad":"","soyad":"REÄ°S","tel":"REÄ°S","email":"","adres":"","notlar":"Numara: REÄ°S"},{"id":46,"ad":"","soyad":"5078260249","tel":"5078260249","email":"","adres":"","notlar":"Numara: 5078260249"},{"id":47,"ad":"","soyad":"5305589586","tel":"5305589586","email":"","adres":"","notlar":"Numara: 5305589586"},{"id":48,"ad":"","soyad":"5320533987","tel":"5320533987","email":"","adres":"","notlar":"Numara: 5320533987"},{"id":49,"ad":"","soyad":"5535473510","tel":"5535473510","email":"","adres":"","notlar":"Numara: 5535473510"},{"id":50,"ad":"","soyad":"5442519634","tel":"5442519634","email":"","adres":"","notlar":"Numara: 5442519634"},{"id":51,"ad":"","soyad":"5375932872","tel":"5375932872","email":"","adres":"","notlar":"Numara: 5375932872"},{"id":52,"ad":"","soyad":"5427102677","tel":"5427102677","email":"","adres":"","notlar":"Numara: 5427102677"},{"id":53,"ad":"","soyad":"5078260229","tel":"5078260229","email":"","adres":"","notlar":"Numara: 5078260229"},{"id":54,"ad":"","soyad":"5348374124","tel":"5348374124","email":"","adres":"","notlar":"Numara: 5348374124"},{"id":55,"ad":"","soyad":"5050127690","tel":"5050127690","email":"","adres":"","notlar":"Numara: 5050127690"},{"id":56,"ad":"","soyad":"5416032026","tel":"5416032026","email":"","adres":"","notlar":"Numara: 5416032026"},{"id":57,"ad":"","soyad":"5326425313","tel":"5326425313","email":"","adres":"","notlar":"Numara: 5326425313"},{"id":58,"ad":"","soyad":"OÄŸuz","tel":"OÄŸuz","email":"","adres":"","notlar":"Numara: OÄŸuz"},{"id":59,"ad":"","soyad":"5312909852","tel":"5312909852","email":"","adres":"","notlar":"Numara: 5312909852"},{"id":60,"ad":"","soyad":"5519893686","tel":"5519893686","email":"","adres":"","notlar":"Numara: 5519893686"},{"id":61,"ad":"","soyad":"5076668866","tel":"5076668866","email":"","adres":"","notlar":"Numara: 5076668866"},{"id":62,"ad":"","soyad":"5336043898","tel":"5336043898","email":"","adres":"","notlar":"Numara: 5336043898"},{"id":63,"ad":"","soyad":"5416290482","tel":"5416290482","email":"","adres":"","notlar":"Numara: 5416290482"},{"id":64,"ad":"","soyad":"5354962821","tel":"5354962821","email":"","adres":"","notlar":"Numara: 5354962821"},{"id":65,"ad":"","soyad":"5065414514","tel":"5065414514","email":"","adres":"","notlar":"Numara: 5065414514"},{"id":66,"ad":"","soyad":"5389808280","tel":"5389808280","email":"","adres":"","notlar":"Numara: 5389808280"},{"id":67,"ad":"","soyad":"5423876025","tel":"5423876025","email":"","adres":"","notlar":"Numara: 5423876025"},{"id":68,"ad":"","soyad":"5452681150","tel":"5452681150","email":"","adres":"","notlar":"Numara: 5452681150"},{"id":69,"ad":"","soyad":"5468611420","tel":"5468611420","email":"","adres":"","notlar":"Numara: 5468611420"},{"id":70,"ad":"","soyad":"5057080736","tel":"5057080736","email":"","adres":"","notlar":"Numara: 5057080736"},{"id":71,"ad":"","soyad":"5327920902","tel":"5327920902","email":"","adres":"","notlar":"Numara: 5327920902"},{"id":72,"ad":"","soyad":"5469545553","tel":"5469545553","email":"","adres":"","notlar":"Numara: 5469545553"},{"id":73,"ad":"","soyad":"5345986214","tel":"5345986214","email":"","adres":"","notlar":"Numara: 5345986214"},{"id":74,"ad":"","soyad":"5426921199","tel":"5426921199","email":"","adres":"","notlar":"Numara: 5426921199"},{"id":75,"ad":"","soyad":"5527568732","tel":"5527568732","email":"","adres":"","notlar":"Numara: 5527568732"},{"id":76,"ad":"","soyad":"5427453765","tel":"5427453765","email":"","adres":"","notlar":"Numara: 5427453765"},{"id":77,"ad":"","soyad":"5386930122","tel":"5386930122","email":"","adres":"","notlar":"Numara: 5386930122"},{"id":78,"ad":"","soyad":"5522201808","tel":"5522201808","email":"","adres":"","notlar":"Numara: 5522201808"},{"id":79,"ad":"","soyad":"5308815642","tel":"5308815642","email":"","adres":"","notlar":"Numara: 5308815642"},{"id":80,"ad":"","soyad":"5547290432","tel":"5547290432","email":"","adres":"","notlar":"Numara: 5547290432"},{"id":81,"ad":"","soyad":"5545839628","tel":"5545839628","email":"","adres":"","notlar":"Numara: 5545839628"},{"id":82,"ad":"","soyad":"5323565962","tel":"5323565962","email":"","adres":"","notlar":"Numara: 5323565962"},{"id":83,"ad":"","soyad":"5550679301","tel":"5550679301","email":"","adres":"","notlar":"Numara: 5550679301"},{"id":84,"ad":"","soyad":"5544389616","tel":"5544389616","email":"","adres":"","notlar":"Numara: 5544389616"},{"id":85,"ad":"","soyad":"5453445514","tel":"5453445514","email":"","adres":"","notlar":"Numara: 5453445514"},{"id":86,"ad":"","soyad":"5526328690","tel":"5526328690","email":"","adres":"","notlar":"Numara: 5526328690"},{"id":87,"ad":"","soyad":"5434997743","tel":"5434997743","email":"","adres":"","notlar":"Numara: 5434997743"},{"id":88,"ad":"","soyad":"5076196436","tel":"5076196436","email":"","adres":"","notlar":"Numara: 5076196436"},{"id":89,"ad":"","soyad":"5374861751","tel":"5374861751","email":"","adres":"","notlar":"Numara: 5374861751"},{"id":90,"ad":"","soyad":"5553443405","tel":"5553443405","email":"","adres":"","notlar":"Numara: 5553443405"},{"id":91,"ad":"","soyad":"5342019418","tel":"5342019418","email":"","adres":"","notlar":"Numara: 5342019418"},{"id":92,"ad":"","soyad":"4917623143677","tel":"4917623143677","email":"","adres":"","notlar":"Numara: 4917623143677"},{"id":93,"ad":"","soyad":"5442172903","tel":"5442172903","email":"","adres":"","notlar":"Numara: 5442172903"},{"id":94,"ad":"","soyad":"5346316799","tel":"5346316799","email":"","adres":"","notlar":"Numara: 5346316799"},{"id":95,"ad":"","soyad":"5379613036","tel":"5379613036","email":"","adres":"","notlar":"Numara: 5379613036"},{"id":96,"ad":"","soyad":"5439568526","tel":"5439568526","email":"","adres":"","notlar":"Numara: 5439568526"},{"id":97,"ad":"","soyad":"5372752466","tel":"5372752466","email":"","adres":"","notlar":"Numara: 5372752466"},{"id":98,"ad":"","soyad":"5355469835","tel":"5355469835","email":"","adres":"","notlar":"Numara: 5355469835"},{"id":99,"ad":"","soyad":"5418120947","tel":"5418120947","email":"","adres":"","notlar":"Numara: 5418120947"},{"id":100,"ad":"","soyad":"5313571785","tel":"5313571785","email":"","adres":"","notlar":"Numara: 5313571785"},{"id":101,"ad":"","soyad":"5075948639","tel":"5075948639","email":"","adres":"","notlar":"Numara: 5075948639"},{"id":102,"ad":"","soyad":"5453371844","tel":"5453371844","email":"","adres":"","notlar":"Numara: 5453371844"},{"id":103,"ad":"","soyad":"5330341428","tel":"5330341428","email":"","adres":"","notlar":"Numara: 5330341428"},{"id":104,"ad":"","soyad":"OÄUZ","tel":"OÄUZ","email":"","adres":"","notlar":"Numara: OÄUZ"},{"id":105,"ad":"","soyad":"5058330555","tel":"5058330555","email":"","adres":"","notlar":"Numara: 5058330555"},{"id":106,"ad":"","soyad":"5314275588","tel":"5314275588","email":"","adres":"","notlar":"Numara: 5314275588"},{"id":107,"ad":"","soyad":"5343309614","tel":"5343309614","email":"","adres":"","notlar":"Numara: 5343309614"},{"id":108,"ad":"","soyad":"5427911375","tel":"5427911375","email":"","adres":"","notlar":"Numara: 5427911375"},{"id":109,"ad":"","soyad":"5458433915","tel":"5458433915","email":"","adres":"","notlar":"Numara: 5458433915"},{"id":110,"ad":"","soyad":"5493700371","tel":"5493700371","email":"","adres":"","notlar":"Numara: 5493700371"},{"id":111,"ad":"","soyad":"5384137588","tel":"5384137588","email":"","adres":"","notlar":"Numara: 5384137588"},{"id":112,"ad":"","soyad":"5358757909","tel":"5358757909","email":"","adres":"","notlar":"Numara: 5358757909"},{"id":113,"ad":"","soyad":"5417371577","tel":"5417371577","email":"","adres":"","notlar":"Numara: 5417371577"},{"id":114,"ad":"","soyad":"5419039518","tel":"5419039518","email":"","adres":"","notlar":"Numara: 5419039518"},{"id":115,"ad":"","soyad":"5306353490","tel":"5306353490","email":"","adres":"","notlar":"Numara: 5306353490"},{"id":116,"ad":"","soyad":"5551056670","tel":"5551056670","email":"","adres":"","notlar":"Numara: 5551056670"},{"id":117,"ad":"","soyad":"5050261939","tel":"5050261939","email":"","adres":"","notlar":"Numara: 5050261939"},{"id":118,"ad":"","soyad":"5537949164","tel":"5537949164","email":"","adres":"","notlar":"Numara: 5537949164"},{"id":119,"ad":"","soyad":"5337927842","tel":"5337927842","email":"","adres":"","notlar":"Numara: 5337927842"},{"id":120,"ad":"","soyad":"5312458443","tel":"5312458443","email":"","adres":"","notlar":"Numara: 5312458443"},{"id":121,"ad":"","soyad":"5076570522","tel":"5076570522","email":"","adres":"","notlar":"Numara: 5076570522"},{"id":122,"ad":"","soyad":"5384337939","tel":"5384337939","email":"","adres":"","notlar":"Numara: 5384337939"},{"id":123,"ad":"","soyad":"5531693401","tel":"5531693401","email":"","adres":"","notlar":"Numara: 5531693401"},{"id":124,"ad":"","soyad":"5327227868","tel":"5327227868","email":"","adres":"","notlar":"Numara: 5327227868"},{"id":125,"ad":"","soyad":"5347187328","tel":"5347187328","email":"","adres":"","notlar":"Numara: 5347187328"},{"id":126,"ad":"","soyad":"5064894468","tel":"5064894468","email":"","adres":"","notlar":"Numara: 5064894468"},{"id":127,"ad":"","soyad":"5309658062","tel":"5309658062","email":"","adres":"","notlar":"Numara: 5309658062"},{"id":128,"ad":"","soyad":"5452973595","tel":"5452973595","email":"","adres":"","notlar":"Numara: 5452973595"},{"id":129,"ad":"","soyad":"5442207078","tel":"5442207078","email":"","adres":"","notlar":"Numara: 5442207078"},{"id":130,"ad":"","soyad":"5054227605","tel":"5054227605","email":"","adres":"","notlar":"Numara: 5054227605"},{"id":131,"ad":"","soyad":"5343854161","tel":"5343854161","email":"","adres":"","notlar":"Numara: 5343854161"},{"id":132,"ad":"","soyad":"5347241923","tel":"5347241923","email":"","adres":"","notlar":"Numara: 5347241923"},{"id":133,"ad":"","soyad":"5337398299","tel":"5337398299","email":"","adres":"","notlar":"Numara: 5337398299"},{"id":134,"ad":"","soyad":"5539516953","tel":"5539516953","email":"","adres":"","notlar":"Numara: 5539516953"},{"id":135,"ad":"","soyad":"5456852960","tel":"5456852960","email":"","adres":"","notlar":"Numara: 5456852960"},{"id":136,"ad":"","soyad":"491796690142","tel":"491796690142","email":"","adres":"","notlar":"Numara: 491796690142"},{"id":137,"ad":"","soyad":"5393018454","tel":"5393018454","email":"","adres":"","notlar":"Numara: 5393018454"},{"id":138,"ad":"","soyad":"5529518632","tel":"5529518632","email":"","adres":"","notlar":"Numara: 5529518632"},{"id":139,"ad":"","soyad":"5537820303","tel":"5537820303","email":"","adres":"","notlar":"Numara: 5537820303"},{"id":140,"ad":"","soyad":"5322962029","tel":"5322962029","email":"","adres":"","notlar":"Numara: 5322962029"},{"id":141,"ad":"","soyad":"5077319621","tel":"5077319621","email":"","adres":"","notlar":"Numara: 5077319621"},{"id":142,"ad":"","soyad":"5342408488","tel":"5342408488","email":"","adres":"","notlar":"Numara: 5342408488"},{"id":143,"ad":"","soyad":"5301373097","tel":"5301373097","email":"","adres":"","notlar":"Numara: 5301373097"},{"id":144,"ad":"","soyad":"5550667274","tel":"5550667274","email":"","adres":"","notlar":"Numara: 5550667274"},{"id":145,"ad":"","soyad":"1 (318) 904-8848","tel":"1 (318) 904-8848","email":"","adres":"","notlar":"Numara: 1 (318) 904-8848"},{"id":146,"ad":"","soyad":"5314690056","tel":"5314690056","email":"","adres":"","notlar":"Numara: 5314690056"},{"id":147,"ad":"","soyad":"5426554700","tel":"5426554700","email":"","adres":"","notlar":"Numara: 5426554700"},{"id":148,"ad":"","soyad":"5399111656","tel":"5399111656","email":"","adres":"","notlar":"Numara: 5399111656"},{"id":149,"ad":"","soyad":"5541973853","tel":"5541973853","email":"","adres":"","notlar":"Numara: 5541973853"},{"id":150,"ad":"","soyad":"5348590646","tel":"5348590646","email":"","adres":"","notlar":"Numara: 5348590646"},{"id":151,"ad":"","soyad":"5461481993","tel":"5461481993","email":"","adres":"","notlar":"Numara: 5461481993"}],"kiralamalar":[{"id":1,"oyunId":1,"musteriId":1,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":2,"oyunId":1,"musteriId":2,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":3,"oyunId":1,"musteriId":3,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":110.0,"indirim":0,"net":110.0,"onOdeme":110.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":4,"oyunId":2,"musteriId":4,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":5,"oyunId":2,"musteriId":5,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":6,"oyunId":1,"musteriId":6,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":7,"oyunId":1,"musteriId":7,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":110.0,"indirim":0,"net":110.0,"onOdeme":110.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":8,"oyunId":1,"musteriId":8,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":9,"oyunId":1,"musteriId":9,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":10,"oyunId":1,"musteriId":10,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":11,"oyunId":1,"musteriId":11,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":12,"oyunId":1,"musteriId":12,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":13,"oyunId":3,"musteriId":13,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":14,"oyunId":1,"musteriId":14,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":425.0,"indirim":0,"net":425.0,"onOdeme":425.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":15,"oyunId":1,"musteriId":15,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":154.0,"indirim":0,"net":154.0,"onOdeme":154.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":16,"oyunId":1,"musteriId":16,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":176.0,"indirim":0,"net":176.0,"onOdeme":176.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":17,"oyunId":1,"musteriId":17,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":18,"oyunId":4,"musteriId":18,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":19,"oyunId":5,"musteriId":12,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":180.0,"indirim":0,"net":180.0,"onOdeme":180.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":20,"oyunId":5,"musteriId":19,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":21,"oyunId":5,"musteriId":20,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":22,"oyunId":6,"musteriId":14,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":1000.0,"indirim":0,"net":1000.0,"onOdeme":1000.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":23,"oyunId":5,"musteriId":21,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":375.0,"indirim":0,"net":375.0,"onOdeme":375.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":24,"oyunId":5,"musteriId":4,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":180.0,"indirim":0,"net":180.0,"onOdeme":180.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":25,"oyunId":5,"musteriId":22,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":225.0,"indirim":0,"net":225.0,"onOdeme":225.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":26,"oyunId":7,"musteriId":23,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":27,"oyunId":1,"musteriId":4,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":28,"oyunId":5,"musteriId":24,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":29,"oyunId":4,"musteriId":25,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":30,"oyunId":7,"musteriId":26,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":31,"oyunId":4,"musteriId":27,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":32,"oyunId":5,"musteriId":28,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":33,"oyunId":4,"musteriId":29,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":34,"oyunId":5,"musteriId":30,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":35,"oyunId":1,"musteriId":31,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":36,"oyunId":4,"musteriId":28,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":37,"oyunId":7,"musteriId":32,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":38,"oyunId":4,"musteriId":33,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":420.0,"indirim":0,"net":420.0,"onOdeme":420.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":39,"oyunId":8,"musteriId":34,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":40,"oyunId":4,"musteriId":35,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":41,"oyunId":4,"musteriId":36,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":42,"oyunId":4,"musteriId":16,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":43,"oyunId":9,"musteriId":37,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":275.0,"indirim":0,"net":275.0,"onOdeme":275.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":44,"oyunId":4,"musteriId":38,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":45,"oyunId":7,"musteriId":39,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":46,"oyunId":1,"musteriId":40,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":47,"oyunId":1,"musteriId":41,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":48,"oyunId":8,"musteriId":42,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":49,"oyunId":4,"musteriId":43,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":50,"oyunId":5,"musteriId":39,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":51,"oyunId":1,"musteriId":44,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":110.0,"indirim":0,"net":110.0,"onOdeme":110.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":52,"oyunId":10,"musteriId":45,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":50.0,"indirim":0,"net":50.0,"onOdeme":50.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":53,"oyunId":8,"musteriId":46,"tip":"secondary","bas":"2025-01-01","bit":"2025-01-01","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":54,"oyunId":1,"musteriId":47,"tip":"primary","bas":"2024-11-18","bit":"2024-11-18","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":55,"oyunId":4,"musteriId":48,"tip":"primary","bas":"2024-11-18","bit":"2024-11-18","ucret":210.0,"indirim":0,"net":210.0,"onOdeme":210.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":56,"oyunId":5,"musteriId":49,"tip":"primary","bas":"2024-11-18","bit":"2024-11-18","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":57,"oyunId":4,"musteriId":48,"tip":"secondary","bas":"2024-11-18","bit":"2024-11-18","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":58,"oyunId":1,"musteriId":50,"tip":"secondary","bas":"2024-11-23","bit":"2024-11-23","ucret":110.0,"indirim":0,"net":110.0,"onOdeme":110.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":59,"oyunId":4,"musteriId":51,"tip":"primary","bas":"2024-11-25","bit":"2024-11-25","ucret":600.0,"indirim":0,"net":600.0,"onOdeme":600.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":60,"oyunId":4,"musteriId":2,"tip":"primary","bas":"2024-11-25","bit":"2024-11-25","ucret":210.0,"indirim":0,"net":210.0,"onOdeme":210.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":61,"oyunId":4,"musteriId":52,"tip":"secondary","bas":"2024-11-28","bit":"2024-11-28","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":62,"oyunId":9,"musteriId":53,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":63,"oyunId":7,"musteriId":54,"tip":"primary","bas":"2024-12-02","bit":"2024-12-02","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":64,"oyunId":10,"musteriId":55,"tip":"primary","bas":"2024-12-02","bit":"2024-12-02","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":65,"oyunId":1,"musteriId":39,"tip":"primary","bas":"2024-12-04","bit":"2024-12-04","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":66,"oyunId":4,"musteriId":56,"tip":"secondary","bas":"2024-12-11","bit":"2024-12-11","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":67,"oyunId":7,"musteriId":57,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":500.0,"indirim":0,"net":500.0,"onOdeme":500.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":68,"oyunId":10,"musteriId":58,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":20.0,"indirim":0,"net":20.0,"onOdeme":20.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":69,"oyunId":1,"musteriId":22,"tip":"primary","bas":"2024-12-13","bit":"2024-12-13","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":70,"oyunId":1,"musteriId":59,"tip":"primary","bas":"2024-12-13","bit":"2024-12-13","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":71,"oyunId":1,"musteriId":60,"tip":"secondary","bas":"2024-12-16","bit":"2024-12-16","ucret":110.0,"indirim":0,"net":110.0,"onOdeme":110.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":72,"oyunId":9,"musteriId":61,"tip":"primary","bas":"2024-12-17","bit":"2024-12-17","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":73,"oyunId":1,"musteriId":62,"tip":"primary","bas":"2024-12-20","bit":"2024-12-20","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":74,"oyunId":7,"musteriId":61,"tip":"primary","bas":"2024-12-21","bit":"2024-12-21","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":75,"oyunId":1,"musteriId":61,"tip":"primary","bas":"2024-12-21","bit":"2024-12-21","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":76,"oyunId":4,"musteriId":63,"tip":"primary","bas":"2024-12-24","bit":"2024-12-24","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":77,"oyunId":1,"musteriId":64,"tip":"primary","bas":"2024-12-26","bit":"2024-12-26","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":78,"oyunId":1,"musteriId":62,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":79,"oyunId":4,"musteriId":64,"tip":"secondary","bas":"2024-12-30","bit":"2024-12-30","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":80,"oyunId":1,"musteriId":65,"tip":"primary","bas":"2025-01-01","bit":"2025-01-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":81,"oyunId":1,"musteriId":66,"tip":"primary","bas":"2025-01-03","bit":"2025-01-03","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":82,"oyunId":1,"musteriId":67,"tip":"secondary","bas":"2025-01-17","bit":"2025-01-17","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":83,"oyunId":1,"musteriId":68,"tip":"secondary","bas":"2025-01-12","bit":"2025-01-12","ucret":484.0,"indirim":0,"net":484.0,"onOdeme":484.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":84,"oyunId":1,"musteriId":69,"tip":"primary","bas":"2025-12-14","bit":"2025-12-14","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":85,"oyunId":1,"musteriId":70,"tip":"primary","bas":"2025-01-18","bit":"2025-01-18","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":86,"oyunId":7,"musteriId":70,"tip":"primary","bas":"2025-01-18","bit":"2025-01-18","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":87,"oyunId":1,"musteriId":71,"tip":"primary","bas":"2025-01-16","bit":"2025-01-16","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":88,"oyunId":4,"musteriId":72,"tip":"primary","bas":"2025-01-16","bit":"2025-01-16","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":89,"oyunId":1,"musteriId":64,"tip":"primary","bas":"2025-01-25","bit":"2025-01-25","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":90,"oyunId":1,"musteriId":73,"tip":"primary","bas":"2025-01-31","bit":"2025-01-31","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":91,"oyunId":11,"musteriId":13,"tip":"secondary","bas":"2025-02-03","bit":"2025-02-03","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":92,"oyunId":11,"musteriId":74,"tip":"primary","bas":"2025-02-03","bit":"2025-02-03","ucret":425.0,"indirim":0,"net":425.0,"onOdeme":425.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":93,"oyunId":2,"musteriId":70,"tip":"primary","bas":"2025-02-08","bit":"2025-02-08","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":94,"oyunId":11,"musteriId":75,"tip":"primary","bas":"2025-02-05","bit":"2025-02-05","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":95,"oyunId":7,"musteriId":57,"tip":"primary","bas":"2025-02-09","bit":"2025-02-09","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":96,"oyunId":12,"musteriId":73,"tip":"primary","bas":"2025-03-06","bit":"2025-03-06","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":97,"oyunId":12,"musteriId":57,"tip":"primary","bas":"2025-03-07","bit":"2025-03-07","ucret":625.0,"indirim":0,"net":625.0,"onOdeme":625.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":98,"oyunId":12,"musteriId":72,"tip":"secondary","bas":"2025-03-08","bit":"2025-03-08","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":99,"oyunId":4,"musteriId":76,"tip":"primary","bas":"2025-03-08","bit":"2025-03-08","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":100,"oyunId":12,"musteriId":13,"tip":"secondary","bas":"2025-03-10","bit":"2025-03-10","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":101,"oyunId":12,"musteriId":12,"tip":"primary","bas":"2025-11-12","bit":"2025-11-12","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":102,"oyunId":10,"musteriId":77,"tip":"primary","bas":"2025-03-13","bit":"2025-03-13","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":103,"oyunId":12,"musteriId":78,"tip":"secondary","bas":"2025-03-15","bit":"2025-03-15","ucret":800.0,"indirim":0,"net":800.0,"onOdeme":800.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":104,"oyunId":12,"musteriId":49,"tip":"primary","bas":"2025-03-16","bit":"2025-03-16","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":105,"oyunId":12,"musteriId":79,"tip":"primary","bas":"2025-03-17","bit":"2025-03-17","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":106,"oyunId":12,"musteriId":80,"tip":"primary","bas":"2025-03-20","bit":"2025-03-20","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":107,"oyunId":13,"musteriId":4,"tip":"primary","bas":"2025-03-20","bit":"2025-03-20","ucret":160.0,"indirim":0,"net":160.0,"onOdeme":160.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":108,"oyunId":13,"musteriId":78,"tip":"primary","bas":"2025-03-20","bit":"2025-03-20","ucret":829.0,"indirim":0,"net":829.0,"onOdeme":829.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":109,"oyunId":12,"musteriId":77,"tip":"primary","bas":"2025-03-21","bit":"2025-03-21","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":110,"oyunId":13,"musteriId":18,"tip":"secondary","bas":"2025-03-23","bit":"2025-03-23","ucret":135.0,"indirim":0,"net":135.0,"onOdeme":135.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":111,"oyunId":13,"musteriId":81,"tip":"primary","bas":"2025-03-25","bit":"2025-03-25","ucret":224.0,"indirim":0,"net":224.0,"onOdeme":224.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":112,"oyunId":12,"musteriId":82,"tip":"primary","bas":"2025-03-27","bit":"2025-03-27","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":113,"oyunId":12,"musteriId":83,"tip":"primary","bas":"2025-03-27","bit":"2025-03-27","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":114,"oyunId":1,"musteriId":64,"tip":"primary","bas":"2025-03-27","bit":"2025-03-27","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":115,"oyunId":13,"musteriId":60,"tip":"secondary","bas":"2025-03-28","bit":"2025-03-28","ucret":540.0,"indirim":0,"net":540.0,"onOdeme":540.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":116,"oyunId":12,"musteriId":45,"tip":"secondary","bas":"2025-03-28","bit":"2025-03-28","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":117,"oyunId":14,"musteriId":46,"tip":"secondary","bas":"2025-03-29","bit":"2025-03-29","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":118,"oyunId":12,"musteriId":80,"tip":"primary","bas":"2025-04-02","bit":"2025-04-02","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":119,"oyunId":12,"musteriId":84,"tip":"primary","bas":"2025-04-08","bit":"2025-04-08","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":120,"oyunId":12,"musteriId":68,"tip":"secondary","bas":"2025-04-13","bit":"2025-04-13","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":121,"oyunId":4,"musteriId":85,"tip":"primary","bas":"2025-04-13","bit":"2025-04-13","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":122,"oyunId":1,"musteriId":18,"tip":"secondary","bas":"2025-04-15","bit":"2025-04-15","ucret":110.0,"indirim":0,"net":110.0,"onOdeme":110.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":123,"oyunId":8,"musteriId":18,"tip":"secondary","bas":"2025-04-15","bit":"2025-04-15","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":124,"oyunId":13,"musteriId":18,"tip":"primary","bas":"2025-04-16","bit":"2025-04-16","ucret":256.0,"indirim":0,"net":256.0,"onOdeme":256.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":125,"oyunId":13,"musteriId":86,"tip":"secondary","bas":"2025-04-18","bit":"2025-04-18","ucret":189.0,"indirim":0,"net":189.0,"onOdeme":189.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":126,"oyunId":4,"musteriId":87,"tip":"secondary","bas":"2025-04-21","bit":"2025-04-21","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":127,"oyunId":1,"musteriId":88,"tip":"primary","bas":"2025-04-26","bit":"2025-04-26","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":128,"oyunId":1,"musteriId":88,"tip":"secondary","bas":"2025-04-26","bit":"2025-04-26","ucret":25.0,"indirim":0,"net":25.0,"onOdeme":25.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":129,"oyunId":1,"musteriId":89,"tip":"secondary","bas":"2025-04-29","bit":"2025-04-29","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":130,"oyunId":11,"musteriId":74,"tip":"primary","bas":"2025-05-12","bit":"2025-05-12","ucret":1620.0,"indirim":0,"net":1620.0,"onOdeme":1620.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":131,"oyunId":4,"musteriId":74,"tip":"primary","bas":"2025-05-12","bit":"2025-05-12","ucret":1830.0,"indirim":0,"net":1830.0,"onOdeme":1830.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":132,"oyunId":15,"musteriId":4,"tip":"primary","bas":"2025-05-13","bit":"2025-05-13","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":133,"oyunId":1,"musteriId":90,"tip":"primary","bas":"2025-05-15","bit":"2025-05-15","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":134,"oyunId":12,"musteriId":90,"tip":"primary","bas":"2025-05-15","bit":"2025-05-15","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":135,"oyunId":12,"musteriId":91,"tip":"primary","bas":"2025-05-23","bit":"2025-05-23","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":136,"oyunId":1,"musteriId":84,"tip":"primary","bas":"2025-05-31","bit":"2025-05-31","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":137,"oyunId":1,"musteriId":92,"tip":"secondary","bas":"2025-06-03","bit":"2025-06-03","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":138,"oyunId":12,"musteriId":93,"tip":"primary","bas":"2025-06-03","bit":"2025-06-03","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":139,"oyunId":12,"musteriId":57,"tip":"primary","bas":"2025-06-07","bit":"2025-06-07","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":140,"oyunId":13,"musteriId":87,"tip":"secondary","bas":"2025-06-07","bit":"2025-06-07","ucret":270.0,"indirim":0,"net":270.0,"onOdeme":270.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":141,"oyunId":15,"musteriId":92,"tip":"primary","bas":"2025-06-09","bit":"2025-06-09","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":142,"oyunId":13,"musteriId":94,"tip":"primary","bas":"2025-06-13","bit":"2025-06-13","ucret":640.0,"indirim":0,"net":640.0,"onOdeme":640.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":143,"oyunId":16,"musteriId":46,"tip":"primary","bas":"2025-06-14","bit":"2025-06-14","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":144,"oyunId":1,"musteriId":68,"tip":"secondary","bas":"2025-06-17","bit":"2025-06-17","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":145,"oyunId":17,"musteriId":49,"tip":"primary","bas":"2025-06-19","bit":"2025-06-19","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":146,"oyunId":17,"musteriId":61,"tip":"primary","bas":"2025-06-19","bit":"2025-06-19","ucret":525.0,"indirim":0,"net":525.0,"onOdeme":525.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":147,"oyunId":17,"musteriId":18,"tip":"secondary","bas":"2025-06-19","bit":"2025-06-19","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":148,"oyunId":16,"musteriId":18,"tip":"secondary","bas":"2025-06-20","bit":"2025-06-20","ucret":75.0,"indirim":0,"net":75.0,"onOdeme":75.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":149,"oyunId":17,"musteriId":4,"tip":"primary","bas":"2025-06-26","bit":"2025-06-26","ucret":315.0,"indirim":0,"net":315.0,"onOdeme":315.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":150,"oyunId":12,"musteriId":95,"tip":"primary","bas":"2025-06-28","bit":"2025-06-28","ucret":500.0,"indirim":0,"net":500.0,"onOdeme":500.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":151,"oyunId":17,"musteriId":96,"tip":"secondary","bas":"2025-07-02","bit":"2025-07-02","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":152,"oyunId":17,"musteriId":97,"tip":"primary","bas":"2025-07-05","bit":"2025-07-05","ucret":245.0,"indirim":0,"net":245.0,"onOdeme":245.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":153,"oyunId":17,"musteriId":44,"tip":"primary","bas":"2025-07-08","bit":"2025-07-08","ucret":210.0,"indirim":0,"net":210.0,"onOdeme":210.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":154,"oyunId":4,"musteriId":90,"tip":"secondary","bas":"2025-07-13","bit":"2025-07-13","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":155,"oyunId":1,"musteriId":98,"tip":"primary","bas":"2025-07-13","bit":"2025-07-13","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":156,"oyunId":5,"musteriId":99,"tip":"primary","bas":"2025-07-14","bit":"2025-07-14","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":157,"oyunId":15,"musteriId":100,"tip":"primary","bas":"2025-07-18","bit":"2025-07-18","ucret":1050.0,"indirim":0,"net":1050.0,"onOdeme":1050.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":158,"oyunId":18,"musteriId":14,"tip":"primary","bas":"2025-07-27","bit":"2025-07-27","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":159,"oyunId":18,"musteriId":5,"tip":"primary","bas":"2025-07-27","bit":"2025-07-27","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":160,"oyunId":1,"musteriId":101,"tip":"primary","bas":"2025-07-30","bit":"2025-07-30","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":161,"oyunId":19,"musteriId":102,"tip":"primary","bas":"2025-08-08","bit":"2025-08-08","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":162,"oyunId":1,"musteriId":103,"tip":"secondary","bas":"2025-08-03","bit":"2025-08-03","ucret":440.0,"indirim":0,"net":440.0,"onOdeme":440.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":163,"oyunId":19,"musteriId":1,"tip":"primary","bas":"2025-08-08","bit":"2025-08-08","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":164,"oyunId":19,"musteriId":16,"tip":"secondary","bas":"2025-08-08","bit":"2025-08-08","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":165,"oyunId":19,"musteriId":98,"tip":"primary","bas":"2025-08-11","bit":"2025-08-11","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":166,"oyunId":18,"musteriId":14,"tip":"primary","bas":"2025-08-13","bit":"2025-08-13","ucret":375.0,"indirim":0,"net":375.0,"onOdeme":375.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":167,"oyunId":12,"musteriId":104,"tip":"primary","bas":"2025-08-14","bit":"2025-08-14","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":168,"oyunId":19,"musteriId":105,"tip":"primary","bas":"2025-08-14","bit":"2025-08-14","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":169,"oyunId":19,"musteriId":93,"tip":"primary","bas":"2025-08-17","bit":"2025-08-17","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":170,"oyunId":19,"musteriId":106,"tip":"primary","bas":"2025-08-18","bit":"2025-08-18","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":171,"oyunId":1,"musteriId":107,"tip":"primary","bas":"2025-08-20","bit":"2025-08-20","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":172,"oyunId":19,"musteriId":108,"tip":"primary","bas":"2025-08-22","bit":"2025-08-22","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":173,"oyunId":20,"musteriId":46,"tip":"primary","bas":"2025-08-26","bit":"2025-08-26","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":174,"oyunId":21,"musteriId":4,"tip":"primary","bas":"2025-08-28","bit":"2025-08-28","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":175,"oyunId":22,"musteriId":102,"tip":"primary","bas":"2025-08-27","bit":"2025-08-27","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":176,"oyunId":2,"musteriId":87,"tip":"secondary","bas":"2025-08-26","bit":"2025-08-26","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":177,"oyunId":19,"musteriId":109,"tip":"primary","bas":"2025-08-27","bit":"2025-08-27","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":178,"oyunId":21,"musteriId":92,"tip":"primary","bas":"2025-08-28","bit":"2025-08-28","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":179,"oyunId":20,"musteriId":110,"tip":"secondary","bas":"2025-08-28","bit":"2025-08-28","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":180,"oyunId":21,"musteriId":111,"tip":"secondary","bas":"2025-08-30","bit":"2025-08-30","ucret":245.0,"indirim":0,"net":245.0,"onOdeme":245.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":181,"oyunId":23,"musteriId":109,"tip":"primary","bas":"2025-09-01","bit":"2025-09-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":182,"oyunId":24,"musteriId":32,"tip":"primary","bas":"2025-09-01","bit":"2025-09-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":183,"oyunId":23,"musteriId":92,"tip":"primary","bas":"2025-09-01","bit":"2025-09-01","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":184,"oyunId":23,"musteriId":46,"tip":"secondary","bas":"2025-09-01","bit":"2025-09-01","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":185,"oyunId":21,"musteriId":74,"tip":"primary","bas":"2025-09-01","bit":"2025-09-01","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":186,"oyunId":12,"musteriId":41,"tip":"primary","bas":"2025-09-02","bit":"2025-09-02","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":187,"oyunId":21,"musteriId":19,"tip":"primary","bas":"2025-09-03","bit":"2025-09-03","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":188,"oyunId":25,"musteriId":4,"tip":"primary","bas":"2025-09-04","bit":"2025-09-04","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":189,"oyunId":25,"musteriId":32,"tip":"primary","bas":"2025-09-04","bit":"2025-09-04","ucret":245.0,"indirim":0,"net":245.0,"onOdeme":245.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":190,"oyunId":1,"musteriId":112,"tip":"primary","bas":"2025-09-04","bit":"2025-09-04","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":191,"oyunId":21,"musteriId":109,"tip":"primary","bas":"2025-09-07","bit":"2025-09-07","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":192,"oyunId":22,"musteriId":32,"tip":"primary","bas":"2025-09-07","bit":"2025-09-07","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":193,"oyunId":23,"musteriId":39,"tip":"primary","bas":"2025-09-07","bit":"2025-09-07","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":194,"oyunId":22,"musteriId":64,"tip":"primary","bas":"2025-09-07","bit":"2025-09-07","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":195,"oyunId":25,"musteriId":46,"tip":"secondary","bas":"2025-09-07","bit":"2025-09-07","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":196,"oyunId":1,"musteriId":113,"tip":"secondary","bas":"2025-09-08","bit":"2025-09-08","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":197,"oyunId":21,"musteriId":41,"tip":"primary","bas":"2025-09-08","bit":"2025-09-08","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":198,"oyunId":5,"musteriId":114,"tip":"primary","bas":"2025-09-10","bit":"2025-09-10","ucret":270.0,"indirim":0,"net":270.0,"onOdeme":270.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":199,"oyunId":23,"musteriId":4,"tip":"primary","bas":"2025-09-12","bit":"2025-09-12","ucret":270.0,"indirim":0,"net":270.0,"onOdeme":270.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":200,"oyunId":26,"musteriId":108,"tip":"primary","bas":"2025-09-12","bit":"2025-09-12","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":201,"oyunId":26,"musteriId":68,"tip":"secondary","bas":"2025-09-14","bit":"2025-09-14","ucret":450.0,"indirim":0,"net":450.0,"onOdeme":450.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":202,"oyunId":27,"musteriId":109,"tip":"secondary","bas":"2025-09-18","bit":"2025-09-18","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":203,"oyunId":27,"musteriId":115,"tip":"primary","bas":"2025-09-21","bit":"2025-09-21","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":204,"oyunId":28,"musteriId":92,"tip":"primary","bas":"2025-09-22","bit":"2025-09-22","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":205,"oyunId":28,"musteriId":109,"tip":"secondary","bas":"2025-09-22","bit":"2025-09-22","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":206,"oyunId":28,"musteriId":19,"tip":"primary","bas":"2025-09-22","bit":"2025-09-22","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":207,"oyunId":27,"musteriId":108,"tip":"primary","bas":"2025-09-22","bit":"2025-09-22","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":208,"oyunId":19,"musteriId":114,"tip":"secondary","bas":"2025-09-22","bit":"2025-09-22","ucret":500.0,"indirim":0,"net":500.0,"onOdeme":500.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":209,"oyunId":5,"musteriId":65,"tip":"primary","bas":"2025-09-26","bit":"2025-09-26","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":210,"oyunId":26,"musteriId":108,"tip":"primary","bas":"2025-09-28","bit":"2025-09-28","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":211,"oyunId":28,"musteriId":57,"tip":"primary","bas":"2025-09-29","bit":"2025-09-29","ucret":600.0,"indirim":0,"net":600.0,"onOdeme":600.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":212,"oyunId":29,"musteriId":4,"tip":"primary","bas":"2025-10-01","bit":"2025-10-01","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":213,"oyunId":29,"musteriId":97,"tip":"primary","bas":"2025-10-01","bit":"2025-10-01","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":214,"oyunId":29,"musteriId":109,"tip":"secondary","bas":"2025-10-01","bit":"2025-10-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":215,"oyunId":29,"musteriId":14,"tip":"primary","bas":"2025-10-01","bit":"2025-10-01","ucret":480.0,"indirim":0,"net":480.0,"onOdeme":480.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":216,"oyunId":29,"musteriId":116,"tip":"primary","bas":"2025-10-01","bit":"2025-10-01","ucret":600.0,"indirim":0,"net":600.0,"onOdeme":600.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":217,"oyunId":28,"musteriId":117,"tip":"secondary","bas":"2025-10-01","bit":"2025-10-01","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":218,"oyunId":29,"musteriId":118,"tip":"secondary","bas":"2025-10-02","bit":"2025-10-02","ucret":1350.0,"indirim":0,"net":1350.0,"onOdeme":1350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":219,"oyunId":19,"musteriId":86,"tip":"primary","bas":"2025-10-02","bit":"2025-10-02","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":220,"oyunId":5,"musteriId":119,"tip":"primary","bas":"2025-10-04","bit":"2025-10-04","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":221,"oyunId":30,"musteriId":46,"tip":"secondary","bas":"2025-10-05","bit":"2025-10-05","ucret":160.0,"indirim":0,"net":160.0,"onOdeme":160.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":222,"oyunId":27,"musteriId":120,"tip":"secondary","bas":"2025-10-06","bit":"2025-10-06","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":223,"oyunId":29,"musteriId":18,"tip":"secondary","bas":"2025-10-06","bit":"2025-10-06","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":224,"oyunId":31,"musteriId":25,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":225,"oyunId":31,"musteriId":18,"tip":"secondary","bas":"2025-10-08","bit":"2025-10-08","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":226,"oyunId":12,"musteriId":92,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":227,"oyunId":31,"musteriId":57,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":600.0,"indirim":0,"net":600.0,"onOdeme":600.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":228,"oyunId":23,"musteriId":32,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":360.0,"indirim":0,"net":360.0,"onOdeme":360.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":229,"oyunId":32,"musteriId":32,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":230,"oyunId":29,"musteriId":49,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":280.0,"indirim":0,"net":280.0,"onOdeme":280.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":231,"oyunId":25,"musteriId":5,"tip":"secondary","bas":"2025-10-08","bit":"2025-10-08","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":232,"oyunId":1,"musteriId":121,"tip":"primary","bas":"2025-10-08","bit":"2025-10-08","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":233,"oyunId":12,"musteriId":78,"tip":"secondary","bas":"2025-10-08","bit":"2025-10-08","ucret":320.0,"indirim":0,"net":320.0,"onOdeme":320.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":234,"oyunId":31,"musteriId":122,"tip":"secondary","bas":"2025-10-08","bit":"2025-10-08","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":235,"oyunId":29,"musteriId":123,"tip":"secondary","bas":"2025-10-11","bit":"2025-10-11","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":236,"oyunId":5,"musteriId":124,"tip":"primary","bas":"2025-10-11","bit":"2025-10-11","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":237,"oyunId":28,"musteriId":92,"tip":"primary","bas":"2025-10-11","bit":"2025-10-11","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":238,"oyunId":27,"musteriId":125,"tip":"primary","bas":"2025-10-11","bit":"2025-10-11","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":239,"oyunId":32,"musteriId":64,"tip":"primary","bas":"2025-10-10","bit":"2025-10-10","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":240,"oyunId":29,"musteriId":108,"tip":"primary","bas":"2025-10-11","bit":"2025-10-11","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":241,"oyunId":32,"musteriId":36,"tip":"primary","bas":"2025-10-12","bit":"2025-10-12","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":242,"oyunId":21,"musteriId":86,"tip":"primary","bas":"2025-10-12","bit":"2025-10-12","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":243,"oyunId":29,"musteriId":125,"tip":"primary","bas":"2025-10-13","bit":"2025-10-13","ucret":560.0,"indirim":0,"net":560.0,"onOdeme":560.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":244,"oyunId":31,"musteriId":126,"tip":"secondary","bas":"2025-10-13","bit":"2025-10-13","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":245,"oyunId":29,"musteriId":121,"tip":"primary","bas":"2025-10-15","bit":"2025-10-15","ucret":600.0,"indirim":0,"net":600.0,"onOdeme":600.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":246,"oyunId":29,"musteriId":105,"tip":"primary","bas":"2025-10-16","bit":"2025-10-16","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":247,"oyunId":31,"musteriId":127,"tip":"secondary","bas":"2025-10-17","bit":"2025-10-17","ucret":245.0,"indirim":0,"net":245.0,"onOdeme":245.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":248,"oyunId":27,"musteriId":128,"tip":"primary","bas":"2025-10-19","bit":"2025-10-19","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":249,"oyunId":29,"musteriId":13,"tip":"secondary","bas":"2025-10-20","bit":"2025-10-20","ucret":1050.0,"indirim":0,"net":1050.0,"onOdeme":1050.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":250,"oyunId":21,"musteriId":129,"tip":"secondary","bas":"2025-10-20","bit":"2025-10-20","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":251,"oyunId":17,"musteriId":125,"tip":"primary","bas":"2025-10-20","bit":"2025-10-20","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":252,"oyunId":33,"musteriId":105,"tip":"primary","bas":"2025-10-20","bit":"2025-10-20","ucret":225.0,"indirim":0,"net":225.0,"onOdeme":225.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":253,"oyunId":34,"musteriId":130,"tip":"primary","bas":"2025-10-20","bit":"2025-10-20","ucret":280.0,"indirim":0,"net":280.0,"onOdeme":280.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":254,"oyunId":34,"musteriId":109,"tip":"secondary","bas":"2025-10-20","bit":"2025-10-20","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":255,"oyunId":33,"musteriId":46,"tip":"secondary","bas":"2025-10-21","bit":"2025-10-21","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":256,"oyunId":29,"musteriId":61,"tip":"primary","bas":"2025-10-21","bit":"2025-10-21","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":257,"oyunId":29,"musteriId":74,"tip":"primary","bas":"2025-10-24","bit":"2025-10-24","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":258,"oyunId":33,"musteriId":4,"tip":"primary","bas":"2025-10-24","bit":"2025-10-24","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":259,"oyunId":1,"musteriId":131,"tip":"primary","bas":"2025-10-24","bit":"2025-10-24","ucret":500.0,"indirim":0,"net":500.0,"onOdeme":500.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":260,"oyunId":33,"musteriId":128,"tip":"primary","bas":"2025-10-24","bit":"2025-10-24","ucret":225.0,"indirim":0,"net":225.0,"onOdeme":225.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":261,"oyunId":34,"musteriId":46,"tip":"primary","bas":"2025-10-24","bit":"2025-10-24","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":262,"oyunId":31,"musteriId":132,"tip":"primary","bas":"2025-10-24","bit":"2025-10-24","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":263,"oyunId":27,"musteriId":125,"tip":"primary","bas":"2025-10-25","bit":"2025-10-25","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":264,"oyunId":31,"musteriId":97,"tip":"primary","bas":"2025-10-26","bit":"2025-10-26","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":265,"oyunId":29,"musteriId":96,"tip":"primary","bas":"2025-10-26","bit":"2025-10-26","ucret":280.0,"indirim":0,"net":280.0,"onOdeme":280.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":266,"oyunId":31,"musteriId":71,"tip":"secondary","bas":"2025-10-27","bit":"2025-10-27","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":267,"oyunId":35,"musteriId":130,"tip":"primary","bas":"2025-10-28","bit":"2025-10-28","ucret":315.0,"indirim":0,"net":315.0,"onOdeme":315.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":268,"oyunId":35,"musteriId":105,"tip":"primary","bas":"2025-10-29","bit":"2025-10-29","ucret":225.0,"indirim":0,"net":225.0,"onOdeme":225.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":269,"oyunId":19,"musteriId":97,"tip":"primary","bas":"2025-10-30","bit":"2025-10-30","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":270,"oyunId":29,"musteriId":61,"tip":"primary","bas":"2025-10-30","bit":"2025-10-30","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":271,"oyunId":28,"musteriId":61,"tip":"primary","bas":"2025-10-31","bit":"2025-10-31","ucret":600.0,"indirim":0,"net":600.0,"onOdeme":600.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":272,"oyunId":19,"musteriId":121,"tip":"primary","bas":"2025-10-31","bit":"2025-10-31","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":273,"oyunId":23,"musteriId":133,"tip":"primary","bas":"2025-11-01","bit":"2025-11-01","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":274,"oyunId":28,"musteriId":125,"tip":"primary","bas":"2025-11-01","bit":"2025-11-01","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":275,"oyunId":29,"musteriId":133,"tip":"primary","bas":"2025-11-05","bit":"2025-11-05","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":276,"oyunId":29,"musteriId":16,"tip":"primary","bas":"2025-11-03","bit":"2025-11-03","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":277,"oyunId":23,"musteriId":125,"tip":"primary","bas":"2025-11-07","bit":"2025-11-07","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":278,"oyunId":12,"musteriId":125,"tip":"primary","bas":"2025-11-07","bit":"2025-11-07","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":279,"oyunId":12,"musteriId":64,"tip":"secondary","bas":"2025-11-10","bit":"2025-11-10","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":280,"oyunId":36,"musteriId":125,"tip":"primary","bas":"2025-11-12","bit":"2025-11-12","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":281,"oyunId":36,"musteriId":16,"tip":"secondary","bas":"2025-11-13","bit":"2025-11-13","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":282,"oyunId":30,"musteriId":108,"tip":"primary","bas":"2025-11-13","bit":"2025-11-13","ucret":955.0,"indirim":0,"net":955.0,"onOdeme":955.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":283,"oyunId":30,"musteriId":57,"tip":"primary","bas":"2025-11-13","bit":"2025-11-13","ucret":1275.0,"indirim":0,"net":1275.0,"onOdeme":1275.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":284,"oyunId":30,"musteriId":109,"tip":"secondary","bas":"2025-11-13","bit":"2025-11-13","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":285,"oyunId":1,"musteriId":134,"tip":"secondary","bas":"2025-11-14","bit":"2025-11-14","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":286,"oyunId":29,"musteriId":135,"tip":"primary","bas":"2025-11-14","bit":"2025-11-14","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":287,"oyunId":17,"musteriId":124,"tip":"primary","bas":"2025-11-16","bit":"2025-11-16","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":288,"oyunId":29,"musteriId":136,"tip":"secondary","bas":"2025-11-16","bit":"2025-11-16","ucret":700.0,"indirim":0,"net":700.0,"onOdeme":700.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":289,"oyunId":36,"musteriId":61,"tip":"primary","bas":"2025-11-16","bit":"2025-11-16","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":290,"oyunId":21,"musteriId":104,"tip":"primary","bas":"2025-11-16","bit":"2025-11-16","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":291,"oyunId":21,"musteriId":1,"tip":"primary","bas":"2025-11-18","bit":"2025-11-18","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":292,"oyunId":1,"musteriId":137,"tip":"primary","bas":"2025-11-18","bit":"2025-11-18","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":293,"oyunId":29,"musteriId":138,"tip":"primary","bas":"2025-11-21","bit":"2025-11-21","ucret":680.0,"indirim":0,"net":680.0,"onOdeme":680.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":294,"oyunId":12,"musteriId":78,"tip":"secondary","bas":"2025-11-21","bit":"2025-11-21","ucret":580.0,"indirim":0,"net":580.0,"onOdeme":580.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":295,"oyunId":36,"musteriId":61,"tip":"primary","bas":"2025-11-22","bit":"2025-11-22","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":296,"oyunId":1,"musteriId":131,"tip":"primary","bas":"2025-11-23","bit":"2025-11-23","ucret":750.0,"indirim":0,"net":750.0,"onOdeme":750.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":297,"oyunId":31,"musteriId":102,"tip":"primary","bas":"2025-11-24","bit":"2025-11-24","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":298,"oyunId":29,"musteriId":91,"tip":"primary","bas":"2025-11-29","bit":"2025-11-29","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":299,"oyunId":17,"musteriId":16,"tip":"secondary","bas":"2025-11-30","bit":"2025-11-30","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":300,"oyunId":36,"musteriId":139,"tip":"primary","bas":"2025-12-03","bit":"2025-12-03","ucret":210.0,"indirim":0,"net":210.0,"onOdeme":210.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":301,"oyunId":36,"musteriId":84,"tip":"primary","bas":"2025-12-07","bit":"2025-12-07","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":302,"oyunId":19,"musteriId":84,"tip":"primary","bas":"2025-12-09","bit":"2025-12-09","ucret":480.0,"indirim":0,"net":480.0,"onOdeme":480.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":303,"oyunId":36,"musteriId":124,"tip":"primary","bas":"2025-12-13","bit":"2025-12-13","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":304,"oyunId":1,"musteriId":135,"tip":"secondary","bas":"2025-12-13","bit":"2025-12-13","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":305,"oyunId":29,"musteriId":44,"tip":"primary","bas":"2025-12-13","bit":"2025-12-13","ucret":320.0,"indirim":0,"net":320.0,"onOdeme":320.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":306,"oyunId":36,"musteriId":42,"tip":"primary","bas":"2025-12-14","bit":"2025-12-14","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":307,"oyunId":37,"musteriId":87,"tip":"secondary","bas":"2025-12-15","bit":"2025-12-15","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":308,"oyunId":12,"musteriId":125,"tip":"primary","bas":"2025-12-20","bit":"2025-12-20","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":309,"oyunId":29,"musteriId":140,"tip":"primary","bas":"2025-12-29","bit":"2025-12-29","ucret":1500.0,"indirim":0,"net":1500.0,"onOdeme":1500.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":310,"oyunId":11,"musteriId":125,"tip":"primary","bas":"2025-12-29","bit":"2025-12-29","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":311,"oyunId":28,"musteriId":133,"tip":"primary","bas":"2025-12-27","bit":"2025-12-27","ucret":400.0,"indirim":0,"net":400.0,"onOdeme":400.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":312,"oyunId":38,"musteriId":141,"tip":"primary","bas":"2025-12-31","bit":"2025-12-31","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":313,"oyunId":39,"musteriId":141,"tip":"primary","bas":"2025-12-31","bit":"2025-12-31","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":314,"oyunId":36,"musteriId":142,"tip":"primary","bas":"2026-01-01","bit":"2026-01-01","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":315,"oyunId":12,"musteriId":95,"tip":"primary","bas":"2026-01-01","bit":"2026-01-01","ucret":100.0,"indirim":0,"net":100.0,"onOdeme":100.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":316,"oyunId":31,"musteriId":118,"tip":"primary","bas":"2026-01-02","bit":"2026-01-02","ucret":280.0,"indirim":0,"net":280.0,"onOdeme":280.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":317,"oyunId":32,"musteriId":143,"tip":"primary","bas":"2026-01-02","bit":"2026-01-02","ucret":800.0,"indirim":0,"net":800.0,"onOdeme":800.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":318,"oyunId":27,"musteriId":87,"tip":"primary","bas":"2026-01-04","bit":"2026-01-04","ucret":350.0,"indirim":0,"net":350.0,"onOdeme":350.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":319,"oyunId":12,"musteriId":144,"tip":"primary","bas":"2026-01-06","bit":"2026-01-06","ucret":275.0,"indirim":0,"net":275.0,"onOdeme":275.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":320,"oyunId":37,"musteriId":145,"tip":"primary","bas":"2026-01-08","bit":"2026-01-08","ucret":900.0,"indirim":0,"net":900.0,"onOdeme":900.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":321,"oyunId":23,"musteriId":57,"tip":"primary","bas":"2026-01-11","bit":"2026-01-11","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":322,"oyunId":36,"musteriId":92,"tip":"primary","bas":"2026-01-12","bit":"2026-01-12","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":323,"oyunId":12,"musteriId":61,"tip":"primary","bas":"2026-01-19","bit":"2026-01-19","ucret":425.0,"indirim":0,"net":425.0,"onOdeme":425.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":324,"oyunId":29,"musteriId":146,"tip":"primary","bas":"2026-01-21","bit":"2026-01-21","ucret":450.0,"indirim":0,"net":450.0,"onOdeme":450.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":325,"oyunId":11,"musteriId":39,"tip":"primary","bas":"2026-01-23","bit":"2026-01-23","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":326,"oyunId":36,"musteriId":136,"tip":"primary","bas":"2026-01-27","bit":"2026-01-27","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":327,"oyunId":40,"musteriId":46,"tip":"secondary","bas":"2026-01-29","bit":"2026-01-29","ucret":175.0,"indirim":0,"net":175.0,"onOdeme":175.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":328,"oyunId":1,"musteriId":147,"tip":"primary","bas":"2026-01-30","bit":"2026-01-30","ucret":250.0,"indirim":0,"net":250.0,"onOdeme":250.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":329,"oyunId":1,"musteriId":147,"tip":"secondary","bas":"2026-02-03","bit":"2026-02-03","ucret":220.0,"indirim":0,"net":220.0,"onOdeme":220.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":330,"oyunId":19,"musteriId":148,"tip":"primary","bas":"2026-02-03","bit":"2026-02-03","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":331,"oyunId":41,"musteriId":26,"tip":"primary","bas":"2026-02-12","bit":"2026-02-12","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":332,"oyunId":41,"musteriId":125,"tip":"primary","bas":"2026-02-13","bit":"2026-02-13","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":333,"oyunId":42,"musteriId":125,"tip":"primary","bas":"2026-02-13","bit":"2026-02-13","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":334,"oyunId":42,"musteriId":57,"tip":"primary","bas":"2026-02-13","bit":"2026-02-13","ucret":450.0,"indirim":0,"net":450.0,"onOdeme":450.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":335,"oyunId":23,"musteriId":4,"tip":"primary","bas":"2026-02-12","bit":"2026-02-12","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":336,"oyunId":41,"musteriId":73,"tip":"secondary","bas":"2026-02-16","bit":"2026-02-16","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":337,"oyunId":42,"musteriId":112,"tip":"primary","bas":"2026-02-17","bit":"2026-02-17","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":338,"oyunId":41,"musteriId":95,"tip":"primary","bas":"2026-02-18","bit":"2026-02-18","ucret":300.0,"indirim":0,"net":300.0,"onOdeme":300.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":339,"oyunId":41,"musteriId":61,"tip":"primary","bas":"2026-02-18","bit":"2026-02-18","ucret":210.0,"indirim":0,"net":210.0,"onOdeme":210.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":340,"oyunId":41,"musteriId":149,"tip":"secondary","bas":"2026-02-18","bit":"2026-02-18","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":341,"oyunId":42,"musteriId":46,"tip":"secondary","bas":"2026-02-22","bit":"2026-02-22","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":342,"oyunId":41,"musteriId":125,"tip":"secondary","bas":"2026-02-22","bit":"2026-02-22","ucret":125.0,"indirim":0,"net":125.0,"onOdeme":125.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":343,"oyunId":42,"musteriId":128,"tip":"primary","bas":"2026-02-23","bit":"2026-02-23","ucret":150.0,"indirim":0,"net":150.0,"onOdeme":150.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":344,"oyunId":1,"musteriId":150,"tip":"primary","bas":"2026-02-23","bit":"2026-02-23","ucret":500.0,"indirim":0,"net":500.0,"onOdeme":500.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":345,"oyunId":12,"musteriId":151,"tip":"secondary","bas":"2026-02-23","bit":"2026-02-23","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"},{"id":346,"oyunId":29,"musteriId":28,"tip":"primary","bas":"2026-02-24","bit":"2026-02-24","ucret":200.0,"indirim":0,"net":200.0,"onOdeme":200.0,"hediyeGun":0,"notlar":"","durum":"teslim"}],"rezervasyonlar":[],"ekMaliyetler":[],"karaListe":[],"ekGelirler":[],"nextId":{"o":46,"m":152,"k":347,"r":1,"mal":1,"kl":1,"eg":1}};
  D=realData;
  save();
}

function sampleData(){
  return; // GerÃ§ek veri yÃ¼klendi
  if(D.oyunlar.length>0) return;
  const past=n=>{const d=new Date();d.setDate(d.getDate()-n);return d.toISOString().split('T')[0];};
  const future=n=>{const d=new Date();d.setDate(d.getDate()+n);return d.toISOString().split('T')[0];};
  const oyunlar=[
    {ad:'FIFA 25',platform:'PS5',tur:'Spor',gunluk:40,haftalik:200,alis:900,cikis:past(400),ciftPrimary:false,notlar:'',deaktifGecmisi:[]},
    {ad:'God of War RagnarÃ¶k',platform:'PS5',tur:'Aksiyon',gunluk:50,haftalik:250,alis:1100,cikis:past(500),ciftPrimary:true,notlar:'Ã‡ift primary aktif',deaktifGecmisi:[]},
    {ad:'Spider-Man 2',platform:'PS5',tur:'Aksiyon',gunluk:50,haftalik:250,alis:1000,cikis:past(300),ciftPrimary:false,notlar:'',deaktifGecmisi:[{tarih:past(10),not:'Test deaktif'}]},
    {ad:'Gran Turismo 7',platform:'PS5',tur:'YarÄ±ÅŸ',gunluk:40,haftalik:200,alis:800,cikis:past(600),ciftPrimary:false,notlar:'',deaktifGecmisi:[]},
    {ad:'GTA V',platform:'PS4',tur:'Aksiyon',gunluk:25,haftalik:120,alis:350,cikis:past(2000),ciftPrimary:true,notlar:'Klasik',deaktifGecmisi:[]},
    {ad:'Hogwarts Legacy',platform:'PS5',tur:'RPG',gunluk:45,haftalik:220,alis:950,cikis:past(700),ciftPrimary:false,notlar:'',deaktifGecmisi:[]},
    {ad:'GTA VI',platform:'PS5',tur:'Aksiyon',gunluk:60,haftalik:300,alis:1200,cikis:future(60),ciftPrimary:false,notlar:'HenÃ¼z Ã§Ä±kmadÄ±',deaktifGecmisi:[]},
    {ad:'Call of Duty BO6',platform:'PS4/PS5',tur:'FPS',gunluk:40,haftalik:200,alis:750,cikis:past(20),ciftPrimary:false,notlar:'Yeni Ã§Ä±ktÄ±',deaktifGecmisi:[]},
  ];
  oyunlar.forEach(o=>D.oyunlar.push({id:D.nextId.o++,...o,kiralamaSayisi:0,toplamGelir:0}));
  const musteriler=[
    {ad:'Ahmet',soyad:'YÄ±lmaz',tel:'0532 111 22 33',email:'ahmet@mail.com',adres:'Ä°stanbul',notlar:''},
    {ad:'Mehmet',soyad:'Kaya',tel:'0544 222 33 44',email:'mehmet@mail.com',adres:'Ankara',notlar:'GÃ¼venilir'},
    {ad:'Zeynep',soyad:'Demir',tel:'0555 333 44 55',email:'zeynep@mail.com',adres:'Ä°zmir',notlar:''},
  ];
  musteriler.forEach(m=>D.musteriler.push({id:D.nextId.m++,...m}));
  const kiralar=[
    {oyunId:1,musteriId:1,tip:'primary',bas:past(10),bit:past(3),ucret:400,indirim:0,net:400,onOdeme:400,hediyeGun:0,notlar:'',durum:'teslim'},
    {oyunId:2,musteriId:2,tip:'secondary',bas:past(5),bit:future(2),ucret:250,indirim:0,net:250,onOdeme:125,hediyeGun:0,notlar:'',durum:'aktif'},
    {oyunId:3,musteriId:3,tip:'primary',bas:past(8),bit:past(1),ucret:350,indirim:50,net:300,onOdeme:300,hediyeGun:0,notlar:'',durum:'aktif'},
    {oyunId:5,musteriId:1,tip:'secondary',bas:past(15),bit:past(8),ucret:225,indirim:0,net:225,onOdeme:225,hediyeGun:0,notlar:'',durum:'teslim'},
  ];
  kiralar.forEach(k=>{
    D.kiralamalar.push({id:D.nextId.k++,...k});
    const o=D.oyunlar.find(x=>x.id===k.oyunId);
    if(o){o.kiralamaSayisi++;o.toplamGelir+=k.net;if(k.durum==='aktif')o.durum='kirada';}
  });
  D.rezervasyonlar.push({id:D.nextId.r++,oyunId:7,musteriId:1,tip:'primary',tarih:future(60),notlar:'GTA VI Ã§Ä±kÄ±ÅŸÄ±nda almak istiyor',alÄ±nanTarih:today()});
  D.ekMaliyetler.push(
    {id:D.nextId.mal++,oyunId:1,aciklama:'FUT Points',tutar:150,tarih:past(20)},
    {id:D.nextId.mal++,oyunId:2,aciklama:'Valhalla DLC',tutar:250,tarih:past(18)},
  );
  // Ã–rnek kara liste
  D.karaListe.push({id:D.nextId.kl++,musteriId:3,sebep:'GeÃ§miÅŸte oyunu hasarlÄ± iade etti',tarih:past(15)});
  // Ã–rnek ek gelir
  D.ekGelirler.push(
    {id:D.nextId.eg++,aciklama:'DÃ¼kkan kirasÄ±',kaynak:'Kira geliri',tutar:3000,tarih:past(25)},
    {id:D.nextId.eg++,aciklama:'Kablo satÄ±ÅŸÄ±',kaynak:'Aksesuar',tutar:150,tarih:past(5)},
  );
  save();
}

// =================== NAV & FILTERS ===================
let filters={oyun:'hepsi',kira:'hepsi'};
let reportPeriod='aylik'; // varsayÄ±lan aylÄ±k
let repOyunFilter='hepsi';

function setRepFilter(val,btn){
  repOyunFilter=val;
  document.querySelectorAll('[id^="rf-"]').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  renderRaporlar();
}

function nav(page,btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('page-'+page).classList.add('active');
  if(btn) btn.classList.add('active');
  renderPage(page);
}

function renderPage(p){
  if(p==='ayarlar'){ renderAyarlar(); return; }
  if(p==='dashboard') renderDashboard();
  else if(p==='oyunlar') renderOyunlar();
  else if(p==='musteriler') renderMusteriler();
  else if(p==='kiralamalar') renderKiralamalar();
  else if(p==='rezervasyonlar') renderRezervasyonlar();
  else if(p==='karaliste') renderKaraListe();
  else if(p==='ekgelir') renderEkGelir();
  else if(p==='raporlar') renderRaporlar();
}

function setFilter(type,val,btn){
  filters[type===('oyun')?'oyun':'kira']=val;
  btn.closest('.filter-bar').querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  if(type==='oyun') renderOyunlar();
  else renderKiralamalar();
}

function setPeriod(p,btn){
  reportPeriod=p;
  document.querySelectorAll('.period-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  document.getElementById('ozel-range').style.display = p==='ozel'?'flex':'none';
  if(p!=='ozel') renderRaporlar();
}

// =================== DATE RANGE HELPER ===================
function periodRange(){
  const now=new Date(); const nStr=today();
  if(reportPeriod==='gunluk') return {s:nStr,e:nStr};
  if(reportPeriod==='haftalik'){const s=new Date(now);s.setDate(s.getDate()-6);return{s:s.toISOString().split('T')[0],e:nStr};}
  if(reportPeriod==='aylik'){const s=new Date(now);s.setDate(1);return{s:s.toISOString().split('T')[0],e:nStr};}
  if(reportPeriod==='yillik'){const s=new Date(now);s.setMonth(0,1);return{s:s.toISOString().split('T')[0],e:nStr};}
  if(reportPeriod==='ozel'){
    const sv=document.getElementById('rep-baslangic').value;
    const ev=document.getElementById('rep-bitis').value;
    return{s:sv||nStr,e:ev||nStr};
  }
  return{s:nStr,e:nStr};
}

// =================== DASHBOARD ===================
function renderDashboard(){
  const now=today();
  const aktifler=D.kiralamalar.filter(k=>k.durum==='aktif');
  const gecikme=aktifler.filter(k=>k.bit<now);
  const thisMonth=now.slice(0,7);
  const ayGelir=D.kiralamalar.filter(k=>k.bas.startsWith(thisMonth)).reduce((s,k)=>s+k.net,0);
  const primK=aktifler.filter(k=>k.tip==='primary').length;
  const secK=aktifler.filter(k=>k.tip==='secondary').length;
  const rezervSayisi=D.rezervasyonlar.filter(r=>r.durum!=='iptal').length;

  document.getElementById('d-toplam').textContent=D.oyunlar.length;
  document.getElementById('d-musait').textContent=D.oyunlar.filter(o=>!o.durum||o.durum==='mevcut').length;
  document.getElementById('d-kirada').textContent=aktifler.length;
  document.getElementById('d-kira-sub').textContent=`${primK} Primary, ${secK} Secondary`;
  document.getElementById('d-rezerv').textContent=rezervSayisi;
  document.getElementById('d-ay-gelir').textContent=fmt(ayGelir);
  renderHedefBar(ayGelir);
  document.getElementById('d-gecikme').textContent=gecikme.length;
  document.getElementById('hs-kira').textContent=aktifler.length;
  document.getElementById('hs-musteri').textContent=D.musteriler.length;
  document.getElementById('hs-gelir').textContent=fmt(ayGelir);
  document.getElementById('hs-rezerv').textContent=rezervSayisi;
  document.getElementById('badge-gecikme').textContent=gecikme.length;
  document.getElementById('badge-gecikme').style.display=gecikme.length?'':'none';

  const gtbl=document.getElementById('d-gecikme-tbl');
  gtbl.innerHTML=gecikme.length?gecikme.map(k=>{
    const o=D.oyunlar.find(x=>x.id===k.oyunId),m=D.musteriler.find(x=>x.id===k.musteriId);
    const gecGun=daysDiff(k.bit,now);
    const gunluk=k.tip==='primary'?(o?.gunluk||0):(o?.gunluk?Math.round(o.gunluk*0.7):0);
    const ekstra=gunluk*gecGun;
    const whatsappMsg=encodeURIComponent(buildWaMsg('gecikme',{isim:(m?.ad||m?.soyad||''),oyun:(o?.ad||''),gun:gecGun,ucret:ekstra}));
    const tel=(m?.tel||'').replace(/[^0-9]/g,'');
    const waLink=tel?'https://wa.me/90'+tel.replace(/^0/,'')+'?text='+whatsappMsg:'#';
    return '<tr class="overdue">'+
      '<td><strong>'+(o?.ad||'-')+'</strong><br><span style="font-size:10px;color:var(--text2)">'+(o?.platform||'')+'</span></td>'+
      '<td><span style="cursor:pointer;color:var(--accent)" onclick="showMusteriDetay('+k.musteriId+')">'+(m?.ad||'')+' '+(m?.soyad||'')+'</span></td>'+
      '<td style="font-size:12px">'+(m?.tel||'â€”')+'</td>'+
      '<td style="color:var(--danger);font-weight:600">'+fmtDate(k.bit)+'</td>'+
      '<td><span class="status s-gecikme">'+gecGun+' gÃ¼n</span></td>'+
      '<td style="color:var(--danger);font-weight:600">'+fmt(ekstra)+'</td>'+
      '<td><div class="action-btns">'+
        '<button class="btn btn-success btn-sm" onclick="teslimAl('+k.id+')">âœ… Ä°ade</button>'+
        '<button class="btn btn-warning btn-sm" onclick="openUzatmaModal('+k.id+')">ğŸ”„ Uzat</button>'+
        (tel?'<a href="'+waLink+'" target="_blank" class="btn btn-sm" style="background:rgba(37,211,102,.2);color:#25d366;border:1px solid rgba(37,211,102,.3);text-decoration:none">ğŸ’¬ WA</a>':'')+'</div></td>'+
    '</tr>';
  }).join('') : '<tr><td colspan="7" style="text-align:center;color:var(--text3);padding:20px">GecikmiÅŸ iade yok âœ…</td></tr>';

  // YaklaÅŸan iadeler tablosu
  const yaklasanTbl=document.getElementById('d-yaklasan-tbl');
  if(yaklasanTbl){
    const yarin3=new Date(); yarin3.setDate(yarin3.getDate()+1); const yarinStr3=yarin3.toISOString().split('T')[0];
    const yakList2=D.kiralamalar.filter(k=>k.durum==='aktif'&&k.bit>=now&&k.bit<=yarinStr3);
    yaklasanTbl.innerHTML=yakList2.length?yakList2.map(k=>{
      const o=D.oyunlar.find(x=>x.id===k.oyunId),m=D.musteriler.find(x=>x.id===k.musteriId);
      const tel=(m?.tel||'').replace(/[^0-9]/g,'').replace(/^0/,'');
      const msg=encodeURIComponent(buildWaMsg('yaklasan',{isim:(m?.ad||m?.soyad||''),oyun:(o?.ad||'')}));
      const waLink=tel?'https://wa.me/90'+tel+'?text='+msg:'';
      return '<tr style="background:rgba(255,193,7,.05)">'+
        '<td><strong>'+(o?.ad||'-')+'</strong></td>'+
        '<td><span style="cursor:pointer;color:var(--accent)" onclick="showMusteriDetay('+k.musteriId+')">'+(m?.ad||'')+' '+(m?.soyad||'')+'</span></td>'+
        '<td style="font-size:12px">'+(m?.tel||'â€”')+'</td>'+
        '<td><span class="rt-badge '+(k.tip==='primary'?'rt-primary':'rt-secondary')+'">'+k.tip+'</span></td>'+
        '<td style="color:#ffc107;font-weight:600">'+fmtDate(k.bit)+'</td>'+
        '<td><div class="action-btns">'+
          '<button class="btn btn-success btn-sm" onclick="teslimAl('+k.id+')">âœ… Ä°ade</button>'+
          '<button class="btn btn-warning btn-sm" onclick="openUzatmaModal('+k.id+')">ğŸ”„ Uzat</button>'+
          (waLink?'<a href="'+waLink+'" target="_blank" class="btn btn-sm" style="background:rgba(37,211,102,.2);color:#25d366;border:1px solid rgba(37,211,102,.3);text-decoration:none">ğŸ’¬ WA</a>':'')+
        '</div></td>'+
      '</tr>';
    }).join('') : '<tr><td colspan="6" style="text-align:center;color:var(--text3);padding:20px">YarÄ±n biten kiralama yok ğŸ‘</td></tr>';
  }

  const atbl=document.getElementById('d-aktif-tbl');
  atbl.innerHTML=aktifler.length?aktifler.map(k=>{
    const o=D.oyunlar.find(x=>x.id===k.oyunId),m=D.musteriler.find(x=>x.id===k.musteriId);
    const isG=k.bit<now;
    return `<tr ${isG?'class="overdue"':''}><td><strong>${o?.ad||'-'}</strong></td><td>${m?.ad||''} ${m?.soyad||''}</td><td><span class="rt-badge ${k.tip==='primary'?'rt-primary':'rt-secondary'}">${k.tip}</span></td><td>${fmtDate(k.bas)}</td><td ${isG?'style="color:var(--danger)"':''}>${fmtDate(k.bit)}</td><td class="profit">${fmt(k.net)}</td><td>${isG?'<span class="status s-gecikme">GecikmiÅŸ</span>':'<span class="status s-kirada">Aktif</span>'}</td></tr>`;
  }).join('') : '<tr><td colspan="7" style="text-align:center;color:var(--text3);padding:20px">Aktif kiralama yok</td></tr>';

  const sorted=[...D.oyunlar].filter(o=>o.kiralamaSayisi>0).sort((a,b)=>b.kiralamaSayisi-a.kiralamaSayisi).slice(0,6);
  const maxK=sorted[0]?.kiralamaSayisi||1;
  document.getElementById('d-top-chart').innerHTML=sorted.length?sorted.map(o=>`
    <div class="chart-bar-row">
      <div class="chart-bar-lbl">${o.ad.length>17?o.ad.slice(0,16)+'â€¦':o.ad}</div>
      <div class="chart-bar-bg"><div class="chart-bar-fill" style="width:${(o.kiralamaSayisi/maxK)*100}%;background:linear-gradient(90deg,var(--accent),var(--accent2))">${o.kiralamaSayisi>1?o.kiralamaSayisi+'x':''}</div></div>
      <div class="chart-bar-val" style="color:var(--accent)">${o.kiralamaSayisi}x</div>
    </div>`).join(''):'<div class="empty"><div class="empty-text">HenÃ¼z kiralama yok</div></div>';
}

// =================== OYUNLAR ===================
function renderOyunlar(){
  const q=(document.getElementById('oyun-search')?.value||'').toLowerCase();
  const f=filters.oyun; const now=today();
  const list=D.oyunlar.filter(o=>{
    const m=`${o.ad} ${o.platform} ${o.tur}`.toLowerCase().includes(q);
    if(!m)return false;
    if(!o.deaktifGecmisi)o.deaktifGecmisi=[];
    const belirlenecek=o.cikis&&o.cikis>now;
    const son=o.deaktifGecmisi[o.deaktifGecmisi.length-1];
    const deaktifAktif=son&&daysDiff(son.tarih,now)<182;
    if(f==='mevcut') return !belirlenecek&&(!o.durum||o.durum==='mevcut');
    if(f==='kirada') return o.durum==='kirada';
    if(f==='rezerv') return belirlenecek||D.rezervasyonlar.some(r=>r.oyunId===o.id&&r.durum!=='iptal');
    if(f==='deaktif') return !!deaktifAktif;
    if(f==='PS5') return o.platform.includes('PS5');
    if(f==='PS4') return o.platform.includes('PS4');
    return true;
  });
  const grid=document.getElementById('oyun-grid');
  if(!list.length){grid.innerHTML='<div class="empty" style="grid-column:1/-1"><div class="empty-icon">ğŸ®</div><div class="empty-text">Oyun bulunamadÄ±</div></div>';return;}
  grid.innerHTML=list.map(o=>oyunKartHTML(o)).join('');
}

function oyunKartHTML(o){
  const now=today();
  if(!o.deaktifGecmisi) o.deaktifGecmisi=[];
  if(!o.kopyalar) o.kopyalar=[];
  const henuzCikmadi=o.cikis&&o.cikis>now;
  const yeniCikti=o.cikis&&!henuzCikmadi&&daysDiff(o.cikis,now)>=0&&daysDiff(o.cikis,now)<=30;
  const aktifKira=D.kiralamalar.filter(k=>k.oyunId===o.id&&k.durum==='aktif'&&(k.kopyaIdx===undefined||k.kopyaIdx===null||k.kopyaIdx===0||!k.kopyaIdx));
  const primKiralar=aktifKira.filter(k=>k.tip==='primary');
  const secKiralar=aktifKira.filter(k=>k.tip==='secondary');
  const net=(o.toplamGelir||0)-(o.alis||0)-(D.ekMaliyetler.filter(m=>m.oyunId===o.id).reduce((s,m)=>s+m.tutar,0));
  const netClass=net>0?'profit':net<0?'loss':'neutral';
  const rezervler=D.rezervasyonlar.filter(r=>r.oyunId===o.id&&r.durum!=='iptal');

  const sonDeaktif=o.deaktifGecmisi.length>0?o.deaktifGecmisi[o.deaktifGecmisi.length-1]:null;
  const ALTI_AY_GUN=182;
  const deaktifKalanGun=sonDeaktif?Math.max(0,ALTI_AY_GUN-daysDiff(sonDeaktif.tarih,now)):0;
  const deaktifAktif=deaktifKalanGun>0;
  const deaktifDolabilir=!sonDeaktif||(daysDiff(sonDeaktif.tarih,now)>=ALTI_AY_GUN);
  const deaktifIlerleme=sonDeaktif?Math.min(100,Math.round(daysDiff(sonDeaktif.tarih,now)/ALTI_AY_GUN*100)):100;

  // Ana kopya slot render fonksiyonu
  function slotRow(tip,kira,idx,kopyaIdx){
    const kiIdx = kopyaIdx===undefined ? 0 : kopyaIdx;
    if(!kira) return '<div class="slot-row slot-empty" style="cursor:pointer" onclick="event.stopPropagation();hizliKiralaSlot('+o.id+','+kiIdx+',\''+tip+'\')">'
      +'<div class="slot-icon '+(tip==='primary'?'si-primary':'si-secondary')+'">'+(tip==='primary'?'ğŸ”µ':'ğŸŸ£')+'</div>'
      +'<div class="slot-info"><div class="slot-type">'+(tip==='primary'?'Primary'+(o.ciftPrimary&&idx===1?' #2':''):'Secondary')+'</div>'
      +'<div class="slot-free">â— MÃ¼sait â€” Kirala</div></div></div>';
    const m=D.musteriler.find(x=>x.id===kira.musteriId);
    const isG=kira.bit<now;
    return '<div class="slot-row slot-occupied '+(isG?'overdue':'')+'">'
      +'<div class="slot-icon '+(tip==='primary'?'si-primary':'si-secondary')+'">'+(tip==='primary'?'ğŸ”µ':'ğŸŸ£')+'</div>'
      +'<div class="slot-info"><div class="slot-type">'+(tip==='primary'?'Primary':'Secondary')+'</div>'
      +'<div class="slot-musteri">'+(m?.ad||'')+' '+(m?.soyad||'')+'</div>'
      +'<div class="slot-dates '+(isG?'late':'')+'">'+(isG?'âš ï¸ ':'ğŸ“… ')+fmtDate(kira.bit)+'</div></div>'
      +'<div class="slot-phone">'+(m?.tel||'')+'</div></div>';
  }

  // Ana hesap slot paneli
  // YaklaÅŸan iadeler (1 gÃ¼n iÃ§inde)
  const _now=today();
  const _yarin=new Date(); _yarin.setDate(_yarin.getDate()+1);
  const _yarinStr=_yarin.toISOString().split('T')[0];
  const yaklasanlar=[...primKiralar,...secKiralar].filter(k=>k&&k.durum==='aktif'&&k.bit>=_now&&k.bit<=_yarinStr);

  // Bekleyen mÃ¼ÅŸteriler
  const bekleyenler=D.rezervasyonlar.filter(r=>r.oyunId===o.id&&r.durum==='bekliyor');
  let slotPanelHTML = '<div class="slot-panel">'
    + slotRow('primary',primKiralar[0]||null,0,0)
    + (o.ciftPrimary ? slotRow('primary',primKiralar[1]||null,1,0) : '')
    + (secKiralar.length ? secKiralar.map(k=>slotRow('secondary',k,0,0)).join('') : slotRow('secondary',null,0,0))
    + '</div>';

  // Kopyalar iÃ§in slot panelleri
  let kopyalarHTML = '';
  (o.kopyalar||[]).forEach(function(kopya, ki) {
    if(kopya.satildi) return;
    const kIdx = ki+1;
    const kKiralar = D.kiralamalar.filter(function(k){ return k.oyunId===o.id && k.durum==='aktif' && k.kopyaIdx===kIdx; });
    const kPrimler = kKiralar.filter(function(k){ return k.tip==='primary'; });
    const kSecler = kKiralar.filter(function(k){ return k.tip==='secondary'; });
    kopyalarHTML += '<div style="margin-top:8px;border-top:1px solid rgba(255,255,255,.07);padding-top:8px">'
      + '<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:4px">'
      + '<span style="font-size:11px;color:var(--text3)">ğŸ“€ '+(kopya.not||('Kopya '+(ki+1)))+' '+(kopya.ciftPrimary?'<span style=\"color:var(--accent);font-size:10px\">[2P]</span>':'')+' <span style=\"color:var(--text3);font-size:10px\">('+fmt(kopya.alis||0)+')</span></span>'
      + '<div style="display:flex;gap:4px">'
      + '<button class="btn btn-outline btn-sm" style="font-size:10px;padding:2px 7px" onclick="event.stopPropagation();openKopyaModal('+o.id+','+(ki)+')">âœï¸</button>'
      + '<button class="btn btn-danger btn-sm" style="font-size:10px;padding:2px 7px" onclick="event.stopPropagation();deleteKopya('+o.id+','+(ki)+')">ğŸ—‘</button>'
      + '</div></div>'
      + '<div class="slot-panel">'
      + slotRow('primary',kPrimler[0]||null,0,kIdx)
      + (kopya.ciftPrimary ? slotRow('primary',kPrimler[1]||null,1,kIdx) : '')
      + (kSecler.length ? kSecler.map(function(k){ return slotRow('secondary',k,0,kIdx); }).join('') : slotRow('secondary',null,0,kIdx))
      + '</div></div>';
  });

  // Status badge - saÄŸ Ã¼st kÃ¶ÅŸe
  const statusBadge = henuzCikmadi
    ? `<span class="status s-cikmayor">ğŸ—“ ${fmtDate(o.cikis)}</span>`
    : aktifKira.length > 0
      ? `<span class="status s-kirada">Kirada</span>`
      : `<span class="status s-mevcut">âœ“ MÃ¼sait</span>`;

  const ciftBadge = o.ciftPrimary ? `<span class="double-primary-badge">2P</span>` : '';
  const deaktifBadge = deaktifAktif ? `<span style="font-size:10px;background:rgba(255,71,87,.2);color:var(--danger);border:1px solid rgba(255,71,87,.4);padding:2px 7px;border-radius:4px;font-weight:700;">ğŸ“¡ DEAKTÄ°F</span>` : '';

  return `<div class="game-card ${henuzCikmadi?'rezerv-card':''} ${deaktifAktif?'deaktif':''}" onclick="showOyunDetay(${o.id})" style="cursor:pointer">
    <div class="game-card-header">
      <div style="flex:1;min-width:0">
        <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
          <div class="game-title">${o.ad}</div>${ciftBadge}${deaktifBadge}
        </div>
        <div style="margin-top:5px;display:flex;gap:4px;flex-wrap:wrap;align-items:center">
          <span class="tag ${o.platform==='PS5'?'tag-ps5':'tag-ps4'}">${o.platform||'PS5'}</span>
          ${o.tur?`<span class="tag tag-genre">${o.tur}</span>`:''}
          ${yeniCikti?`<span class="tag" style="background:linear-gradient(135deg,rgba(0,229,160,.25),rgba(0,198,255,.2));color:var(--success);font-weight:800;border:1px solid rgba(0,229,160,.4);letter-spacing:0.5px">âœ¦ YENÄ°</span>`:''}
        </div>
      </div>
      <div style="flex-shrink:0;margin-top:2px">${statusBadge}</div>
    </div>
    <div class="game-body">
      ${slotPanelHTML}
      ${kopyalarHTML}
      ${yaklasanlar.length>0?`<div style="display:flex;align-items:center;gap:6px;padding:6px 0;border-bottom:1px solid rgba(255,193,7,.2);margin-bottom:4px;font-size:12px;color:#ffc107;background:rgba(255,193,7,.08);border-radius:6px;padding:6px 8px">ğŸ”” <strong>${yaklasanlar.length} kiralama</strong> yarÄ±n bitiyor!</div>`:""}${bekleyenler.length>0?`<div style="display:flex;align-items:center;gap:6px;padding:6px 0;border-bottom:1px solid rgba(255,255,255,.06);margin-bottom:4px;font-size:12px;color:var(--warning)">â³ <strong>${bekleyenler.length} kiÅŸi</strong> sÄ±rada bekliyor</div>`:""}
      <div class="game-stats">
        <div class="game-row"><span class="game-row-lbl">GÃ¼nlÃ¼k</span><span class="game-row-val">${fmt(o.gunluk)}</span></div>
        <div class="game-row"><span class="game-row-lbl">Toplam Gelir</span><span class="game-row-val profit">${fmt(o.toplamGelir||0)}</span></div>
        <div class="game-row"><span class="game-row-lbl">Net K/Z</span><span class="game-row-val ${netClass}">${net>=0?'â–²':'â–¼'} ${fmt(Math.abs(net))}</span></div>
      </div>
      <div style="display:flex;gap:5px;margin-top:8px;flex-wrap:wrap">
        <button class="btn btn-outline btn-sm" onclick="event.stopPropagation();editOyun(${o.id})">âœï¸</button>
        <button class="btn btn-danger btn-sm" onclick="event.stopPropagation();deleteOyun(${o.id})">ğŸ—‘</button>
        ${!henuzCikmadi?`<button class="btn btn-primary btn-sm" onclick="event.stopPropagation();hizliKirala(${o.id})">+ Kirala</button>`:`<button class="btn btn-purple btn-sm" onclick="event.stopPropagation();hizliRezerv(${o.id})">ğŸ”– Rezerv</button>`}
        ${deaktifDolabilir&&!henuzCikmadi?`<button class="btn btn-warning btn-sm" onclick="event.stopPropagation();hizliDeaktif(${o.id})" title="Uzaktan Deaktif Et">ğŸ“¡</button>`:''}
        ${(o.kopyalar||[]).length<4?`<button class="btn btn-sm" style="background:rgba(0,229,160,.12);color:var(--success);border:1px solid rgba(0,229,160,.3)" onclick="event.stopPropagation();openKopyaModal(${o.id})">ğŸ“€ +Kopya</button>`:''}
      </div>
    </div>
  </div>`;
}
function hizliKirala(oyunId){
  openKiralamaModal();
  setTimeout(()=>{
    const sel=document.getElementById('kira-oyun');
    sel.value=oyunId;
    onKiraOyunChange();
  },100);
}

function hizliRezerv(oyunId){
  openRezervModal();
  setTimeout(()=>{ document.getElementById('rezerv-oyun').value=oyunId; },100);
}

// =================== OYUN MODAL ===================
function openOyunModal(){
  document.getElementById('oyun-eid').value='';
  ['oyun-ad','oyun-alis','oyun-gunluk-pri','oyun-gunluk-sec','oyun-haftalik-pri','oyun-haftalik-sec','oyun-notlar','oyun-cikis'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('oyun-platform').value='PS5';
  document.getElementById('oyun-tur').value='Aksiyon';
  document.getElementById('oyun-cift-primary').checked=false;
  document.getElementById('modal-oyun-title').textContent='ğŸ® Yeni Oyun Ekle';
  openModal('modal-oyun');
}

function editOyun(id){
  const o=D.oyunlar.find(x=>x.id===id); if(!o)return;
  document.getElementById('oyun-eid').value=id;
  document.getElementById('oyun-ad').value=o.ad;
  document.getElementById('oyun-platform').value=o.platform;
  document.getElementById('oyun-tur').value=o.tur;
  document.getElementById('oyun-cikis').value=o.cikis||'';
  document.getElementById('oyun-alis').value=o.alis||'';
  document.getElementById('oyun-gunluk-pri').value=o.gunlukPri||o.gunluk||'';
  document.getElementById('oyun-gunluk-sec').value=o.gunlukSec||Math.round((o.gunluk||0)*0.85)||'';
  document.getElementById('oyun-haftalik-pri').value=o.haftalikPri||o.haftalik||'';
  document.getElementById('oyun-haftalik-sec').value=o.haftalikSec||'';
  document.getElementById('oyun-cift-primary').checked=!!o.ciftPrimary;
  document.getElementById('oyun-notlar').value=o.notlar||'';
  document.getElementById('modal-oyun-title').textContent='âœï¸ Oyun DÃ¼zenle';
  openModal('modal-oyun');
}

function saveOyun(){
  const ad=document.getElementById('oyun-ad').value.trim();
  if(!ad){toast('Oyun adÄ± zorunludur','error');return;}
  const eid=parseInt(document.getElementById('oyun-eid').value);
  const obj={
    ad, platform:document.getElementById('oyun-platform').value,
    tur:document.getElementById('oyun-tur').value,
    cikis:document.getElementById('oyun-cikis').value||null,
    alis:parseFloat(document.getElementById('oyun-alis').value)||0,
    gunlukPri:parseFloat(document.getElementById('oyun-gunluk-pri').value)||0,
    gunlukSec:parseFloat(document.getElementById('oyun-gunluk-sec').value)||0,
    gunluk:parseFloat(document.getElementById('oyun-gunluk-pri').value)||0,
    haftalikPri:parseFloat(document.getElementById('oyun-haftalik-pri').value)||0,
    haftalikSec:parseFloat(document.getElementById('oyun-haftalik-sec').value)||0,
    haftalik:parseFloat(document.getElementById('oyun-haftalik-pri').value)||(parseFloat(document.getElementById('oyun-gunluk-pri').value)||0)*7,
    ciftPrimary:document.getElementById('oyun-cift-primary').checked,
    notlar:document.getElementById('oyun-notlar').value
  };
  if(eid){
    const i=D.oyunlar.findIndex(x=>x.id===eid);
    if(i>=0){D.oyunlar[i]={...D.oyunlar[i],...obj};toast('GÃ¼ncellendi','success');}
  }else{
    const now=today();
    const durum=obj.cikis&&obj.cikis>now?'cikiyor':'mevcut';
    D.oyunlar.push({id:D.nextId.o++,...obj,durum,kiralamaSayisi:0,toplamGelir:0});
    toast('Oyun eklendi âœ…','success');
  }
  save();closeModal('modal-oyun');renderOyunlar();updateStats();
}

function deleteOyun(id){
  if(D.kiralamalar.some(k=>k.oyunId===id&&k.durum==='aktif')){toast('Aktif kiralamasÄ± var','error');return;}
  if(!confirm('Oyunu sil?'))return;
  D.oyunlar=D.oyunlar.filter(o=>o.id!==id);
  save();renderOyunlar();toast('Silindi','info');
}

function showOyunDetay(id){
  const o=D.oyunlar.find(x=>x.id===id); if(!o)return;
  const kiralar=D.kiralamalar.filter(k=>k.oyunId===id).sort((a,b)=>b.bas.localeCompare(a.bas));
  const ekM=D.ekMaliyetler.filter(m=>m.oyunId===id);
  const topMal=(o.alis||0)+ekM.reduce((s,m)=>s+m.tutar,0);
  const net=(o.toplamGelir||0)-topMal;
  const now=today();
  document.getElementById('mod-title').textContent=`ğŸ® ${o.ad}`;
  document.getElementById('mod-body').innerHTML=`
    <div class="two-col" style="margin-bottom:14px">
      <div class="info-box">
        <div class="info-row"><span class="info-row-lbl">Platform</span><span><span class="tag ${o.platform==='PS5'?'tag-ps5':'tag-ps4'}">${o.platform}</span></span></div>
        <div class="info-row"><span class="info-row-lbl">TÃ¼r</span><span>${o.tur}</span></div>
        <div class="info-row"><span class="info-row-lbl">Ã‡Ä±kÄ±ÅŸ Tarihi</span><span>${fmtDate(o.cikis)}</span></div>
        <div class="info-row"><span class="info-row-lbl">Ã‡ift Primary</span><span>${o.ciftPrimary?'âœ… AÃ§Ä±k':'âŒ KapalÄ±'}</span></div>
      </div>
      <div class="info-box">
        <div class="info-row"><span class="info-row-lbl">AlÄ±ÅŸ FiyatÄ±</span><span class="loss">${fmt(o.alis)}</span></div>
        <div class="info-row"><span class="info-row-lbl">Ek Maliyet</span><span class="loss">${fmt(ekM.reduce((s,m)=>s+m.tutar,0))}</span></div>
        <div class="info-row"><span class="info-row-lbl">Toplam Gelir</span><span class="profit">${fmt(o.toplamGelir||0)}</span></div>
        <div class="info-row"><span class="info-row-lbl">Net K/Z</span><span class="${net>=0?'profit':'loss'}">${net>=0?'â–² +':'â–¼ '}${fmt(Math.abs(net))}</span></div>
      </div>
    </div>
    <h4 style="font-size:11px;color:var(--text2);text-transform:uppercase;margin-bottom:8px">Kiralama GeÃ§miÅŸi (${kiralar.length})</h4>
    ${kiralar.length?`<div class="tbl-wrap"><table>
      <thead><tr><th>MÃ¼ÅŸteri</th><th>Tip</th><th>BaÅŸlangÄ±Ã§</th><th>BitiÅŸ</th><th>BrÃ¼t</th><th>Ä°ndirim</th><th>Net</th><th>Durum</th></tr></thead>
      <tbody>${kiralar.map(k=>{const m=D.musteriler.find(x=>x.id===k.musteriId);const isG=k.durum==='aktif'&&k.bit<now;
        return `<tr><td>${m?.ad||''} ${m?.soyad||''}</td><td><span class="rt-badge ${k.tip==='primary'?'rt-primary':'rt-secondary'}">${k.tip}</span></td><td>${fmtDate(k.bas)}</td><td ${isG?'style="color:var(--danger)"':''}>${fmtDate(k.bit)}</td><td>${fmt(k.ucret)}</td><td class="${k.indirim>0?'loss':'neutral'}">${k.indirim>0?'-'+fmt(k.indirim):'â€”'}</td><td class="profit">${fmt(k.net)}</td><td>${isG?'<span class="status s-gecikme">GecikmiÅŸ</span>':k.durum==='aktif'?'<span class="status s-kirada">Aktif</span>':'<span class="status s-mevcut">Teslim</span>'}</td></tr>`;
      }).join('')}</tbody>
    </table></div>`:'<div class="empty"><div class="empty-text">Kiralama yok</div></div>'}`;
  openModal('modal-oyun-detay');
}

// =================== MÃœÅTERÄ°LER ===================
function renderMusteriler(){
  const q=(document.getElementById('musteri-search')?.value||'').toLowerCase();
  const list=D.musteriler.filter(m=>`${m.ad} ${m.soyad} ${m.tel}`.toLowerCase().includes(q));
  const tbl=document.getElementById('musteri-tbl');
  if(!list.length){tbl.innerHTML='<tr><td colspan="8" style="text-align:center;color:var(--text3);padding:30px">MÃ¼ÅŸteri bulunamadÄ±</td></tr>';return;}
  tbl.innerHTML=list.map((m,i)=>{
    const kiralar=D.kiralamalar.filter(k=>k.musteriId===m.id);
    const aktif=kiralar.filter(k=>k.durum==='aktif');
    const toplam=kiralar.reduce((s,k)=>s+k.net,0);
    return `<tr>
      <td style="color:var(--text3)">${i+1}</td>
      <td><strong style="cursor:pointer;color:var(--accent)" onclick="showMusteriDetay(${m.id})">${m.ad} ${m.soyad}</strong></td>
      <td>${m.tel}</td><td style="color:var(--text2)">${m.email||'-'}</td>
      <td style="text-align:center">${kiralar.length}</td>
      <td style="text-align:center">${aktif.length?`<span class="badge">${aktif.length}</span>`:'-'}</td>
      <td class="profit">${fmt(toplam)}</td>
      <td><div class="action-btns"><button class="btn btn-outline btn-sm" onclick="editMusteri(${m.id})">âœï¸</button><button class="btn btn-danger btn-sm" onclick="deleteMusteri(${m.id})">ğŸ—‘</button>${m.tel?`<a href="https://wa.me/90${m.tel.replace(/[^0-9]/g,'').replace(/^0/,'')}" target="_blank" class="btn btn-sm" style="background:rgba(37,211,102,.2);color:#25d366;border:1px solid rgba(37,211,102,.3);text-decoration:none;padding:4px 8px;border-radius:6px">ğŸ’¬</a>`:''}
    </div></td>
    </tr>`;
  }).join('');
}

function openMusteriModal(){
  document.getElementById('musteri-eid').value='';
  ['musteri-ad','musteri-soyad','musteri-tel','musteri-email','musteri-adres','musteri-notlar'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('modal-musteri-title').textContent='ğŸ‘¤ Yeni MÃ¼ÅŸteri';
  openModal('modal-musteri');
}

function editMusteri(id){
  const m=D.musteriler.find(x=>x.id===id);if(!m)return;
  document.getElementById('musteri-eid').value=id;
  document.getElementById('musteri-ad').value=m.ad;
  document.getElementById('musteri-soyad').value=m.soyad;
  document.getElementById('musteri-tel').value=m.tel;
  document.getElementById('musteri-email').value=m.email||'';
  document.getElementById('musteri-adres').value=m.adres||'';
  document.getElementById('musteri-notlar').value=m.notlar||'';
  document.getElementById('modal-musteri-title').textContent='âœï¸ MÃ¼ÅŸteri DÃ¼zenle';
  openModal('modal-musteri');
}

function saveMusteri(){
  const ad=document.getElementById('musteri-ad').value.trim(),soyad=document.getElementById('musteri-soyad').value.trim(),tel=document.getElementById('musteri-tel').value.trim();
  if(!ad||!soyad||!tel){toast('Ad, soyad ve telefon zorunludur','error');return;}
  const eid=parseInt(document.getElementById('musteri-eid').value);
  const obj={ad,soyad,tel,email:document.getElementById('musteri-email').value,adres:document.getElementById('musteri-adres').value,notlar:document.getElementById('musteri-notlar').value};
  if(eid){const i=D.musteriler.findIndex(x=>x.id===eid);if(i>=0){D.musteriler[i]={...D.musteriler[i],...obj};toast('GÃ¼ncellendi','success');}}
  else{D.musteriler.push({id:D.nextId.m++,...obj});toast('MÃ¼ÅŸteri eklendi','success');}
  save();closeModal('modal-musteri');renderMusteriler();updateStats();
}

function deleteMusteri(id){
  if(D.kiralamalar.some(k=>k.musteriId===id&&k.durum==='aktif')){toast('Aktif kiralamasÄ± var','error');return;}
  if(!confirm('MÃ¼ÅŸteriyi sil?'))return;
  D.musteriler=D.musteriler.filter(m=>m.id!==id);save();renderMusteriler();toast('Silindi','info');
}

function showMusteriDetay(id){
  const m=D.musteriler.find(x=>x.id===id); if(!m) return;
  const kiralar=D.kiralamalar.filter(k=>k.musteriId===id).sort((a,b)=>b.bas.localeCompare(a.bas));
  const now=today();

  const toplamHarcama=kiralar.reduce((s,k)=>s+k.net,0);
  const toplamIndirim=kiralar.reduce((s,k)=>s+(k.indirim||0),0);
  const toplamGecikme=kiralar.filter(k=>(k.durum==='aktif'&&k.bit<now)||(k.durum==='teslim'&&k.teslimTarih&&k.bit<k.teslimTarih)).length;
  const uzatmalar=kiralar.reduce((s,k)=>s+(k.uzatmalar?.length||0),0);
  const sonKiralama=kiralar[0];
  const ilkKiralama=kiralar[kiralar.length-1];
  const aktifKira=kiralar.find(k=>k.durum==='aktif');
  const karaListede=(D.karaListe||[]).some(k=>k.musteriId===id);

  let skor=100;
  skor -= toplamGecikme*15;
  skor -= toplamIndirim>0?5:0;
  skor += kiralar.length>=5?10:0;
  skor += toplamHarcama>=2000?10:0;
  skor = Math.max(0,Math.min(100,skor));
  const skorRenk=skor>=80?'var(--success)':skor>=50?'var(--warning)':'var(--danger)';
  const skorLabel=skor>=80?'âœ… GÃ¼venilir':skor>=50?'âš ï¸ Orta':'ğŸš¨ Riskli';

  const tel=(m.tel||'').replace(/[^0-9]/g,'').replace(/^0/,'');
  const waLink=tel?`https://wa.me/90${tel}`:'';

  document.getElementById('mmd-title').innerHTML=
    `ğŸ‘¤ ${m.ad} ${m.soyad}${karaListede?' <span style="background:rgba(255,71,87,.2);color:var(--danger);border-radius:6px;padding:2px 8px;font-size:12px;margin-left:6px">â›” Kara Listede</span>':''}`;

  document.getElementById('mmd-body').innerHTML=`
    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px">
      ${waLink?`<a href="${waLink}" target="_blank" class="btn btn-sm" style="background:rgba(37,211,102,.2);color:#25d366;border:1px solid rgba(37,211,102,.3);text-decoration:none">ğŸ’¬ WhatsApp</a>`:''}
      ${aktifKira?`<button class="btn btn-warning btn-sm" onclick="closeModal('modal-musteri-detay');openUzatmaModal(${aktifKira.id})">ğŸ”„ Uzat</button>`:''}
      ${aktifKira?`<button class="btn btn-success btn-sm" onclick="closeModal('modal-musteri-detay');teslimAl(${aktifKira.id})">âœ… Ä°ade Al</button>`:''}
      <button class="btn btn-outline btn-sm" onclick="closeModal('modal-musteri-detay');editMusteri(${id})">âœï¸ DÃ¼zenle</button>
      ${!karaListede?`<button class="btn btn-danger btn-sm" onclick="closeModal('modal-musteri-detay');openKaraListeEkle(${id})">â›” Kara Listeye Al</button>`:''}
    </div>

    <div class="two-col" style="margin-bottom:16px">
      <div class="info-box">
        <div style="font-size:11px;font-weight:700;color:var(--text3);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px">Ä°letiÅŸim</div>
        <div class="info-row"><span class="info-row-lbl">ğŸ“ Telefon</span><span>${m.tel||'â€”'}</span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ“§ E-posta</span><span>${m.email||'â€”'}</span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ“ Adres</span><span>${m.adres||'â€”'}</span></div>
      </div>
      <div class="info-box">
        <div style="font-size:11px;font-weight:700;color:var(--text3);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px">Ã–zet</div>
        <div class="info-row"><span class="info-row-lbl">ğŸ“¦ Toplam Kiralama</span><span><strong>${kiralar.length}x</strong></span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ’° Toplam Harcama</span><span class="profit"><strong>${fmt(toplamHarcama)}</strong></span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ AldÄ±ÄŸÄ± Ä°ndirim</span><span class="${toplamIndirim>0?'loss':'neutral'}">${toplamIndirim>0?'-'+fmt(toplamIndirim):'â€”'}</span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ”„ Uzatma SayÄ±sÄ±</span><span>${uzatmalar>0?uzatmalar+'x':'â€”'}</span></div>
        <div class="info-row"><span class="info-row-lbl">â° Gecikme SayÄ±sÄ±</span><span style="color:${toplamGecikme>0?'var(--danger)':'var(--success)'};font-weight:600">${toplamGecikme>0?toplamGecikme+'x âš ï¸':'HiÃ§ yok âœ…'}</span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ“… Ä°lk Kiralama</span><span>${ilkKiralama?fmtDate(ilkKiralama.bas):'â€”'}</span></div>
        <div class="info-row"><span class="info-row-lbl">ğŸ“… Son Kiralama</span><span>${sonKiralama?fmtDate(sonKiralama.bas):'â€”'}</span></div>
      </div>
    </div>

    <div style="background:var(--surface3);border-radius:10px;padding:14px 16px;margin-bottom:16px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
        <span style="font-size:13px;font-weight:700">ğŸ›¡ï¸ GÃ¼venilirlik Skoru</span>
        <span style="font-size:22px;font-weight:900;color:${skorRenk}">${skor}<span style="font-size:12px;color:var(--text3)">/100</span> &nbsp;<span style="font-size:13px">${skorLabel}</span></span>
      </div>
      <div style="background:var(--surface2);border-radius:99px;height:9px;overflow:hidden">
        <div style="height:100%;border-radius:99px;width:${skor}%;background:${skor>=80?'linear-gradient(90deg,var(--success),#00e5a0)':skor>=50?'linear-gradient(90deg,var(--warning),#ffaa00)':'linear-gradient(90deg,var(--danger),#ff8c42)'};transition:width .5s"></div>
      </div>
      <div style="font-size:11px;color:var(--text3);margin-top:6px;line-height:1.8">
        ${toplamGecikme>0?`âš ï¸ ${toplamGecikme} gecikme (-${toplamGecikme*15} puan) &nbsp;`:''}${kiralar.length>=5?'âœ… SadÄ±k mÃ¼ÅŸteri (+10) &nbsp;':''}${toplamHarcama>=2000?'ğŸ’° YÃ¼ksek harcama (+10)':''}
      </div>
    </div>

    ${aktifKira?`<div style="background:rgba(0,230,118,.08);border:1px solid rgba(0,230,118,.25);border-radius:10px;padding:12px 16px;margin-bottom:16px;font-size:13px">
      ğŸŸ¢ <strong>Aktif kiralama:</strong> ${D.oyunlar.find(o=>o.id===aktifKira.oyunId)?.ad||'?'} &nbsp;Â·&nbsp; BitiÅŸ: <strong style="color:${aktifKira.bit<now?'var(--danger)':'var(--text1)'}">${fmtDate(aktifKira.bit)}</strong>${aktifKira.bit<now?` <span class="status s-gecikme">${daysDiff(aktifKira.bit,now)} gÃ¼n gecikmiÅŸ</span>`:''}
    </div>`:''}

    <div style="font-size:11px;font-weight:700;color:var(--text3);margin-bottom:8px;text-transform:uppercase;letter-spacing:.5px">Kiralama GeÃ§miÅŸi</div>
    ${kiralar.length?`<div class="tbl-wrap"><table>
      <thead><tr><th>Oyun</th><th>Tip</th><th>BaÅŸlangÄ±Ã§</th><th>BitiÅŸ</th><th>SÃ¼re</th><th>Net</th><th>Uzatma</th><th>Durum</th></tr></thead>
      <tbody>${kiralar.map(k=>{
        const o=D.oyunlar.find(x=>x.id===k.oyunId);
        const isG=k.durum==='aktif'&&k.bit<now;
        const gun=daysDiff(k.bas,k.bit);
        const uzSayisi=(k.uzatmalar||[]).length;
        return `<tr ${isG?'class="overdue"':''}>
          <td><strong>${o?.ad||'-'}</strong></td>
          <td><span class="rt-badge ${k.tip==='primary'?'rt-primary':'rt-secondary'}">${k.tip}</span></td>
          <td>${fmtDate(k.bas)}</td>
          <td style="${isG?'color:var(--danger);font-weight:600':''}">${fmtDate(k.bit)}${isG?` <span style="font-size:10px">(+${daysDiff(k.bit,now)}g)</span>`:''}</td>
          <td>${gun}g</td>
          <td class="profit">${fmt(k.net)}</td>
          <td>${uzSayisi>0?`<span style="color:var(--accent);font-size:12px">ğŸ”„ ${uzSayisi}x</span>`:'â€”'}</td>
          <td>${isG?'<span class="status s-gecikme">GecikmiÅŸ</span>':k.durum==='aktif'?'<span class="status s-kirada">Aktif</span>':'<span class="status s-mevcut">Teslim</span>'}</td>
        </tr>`;
      }).join('')}</tbody>
    </table></div>`:'<div class="empty"><div class="empty-text">Kiralama geÃ§miÅŸi yok</div></div>'}
    ${m.notlar?`<div style="margin-top:12px;padding:10px 14px;background:var(--surface2);border-radius:8px;font-size:13px;color:var(--text2)">ğŸ“ ${m.notlar}</div>`:''}
  

    <div style="margin-top:16px">
      <div style="font-size:11px;font-weight:700;color:var(--text3);margin-bottom:10px;text-transform:uppercase;letter-spacing:.5px">ğŸ¯ Oyun Tavsiyeleri</div>
      ${renderTavsiyeHTML(id)}
    </div>`;
  openModal('modal-musteri-detay');
}

function openKiralamaModal(){
  document.getElementById('kira-eid').value='';
  document.getElementById('kopya-secim-grup').style.display='none';
  document.getElementById('kira-kopya-idx').value='0';
  document.getElementById('kira-modal-title').textContent='ğŸ“‹ Kiralama OluÅŸtur';
  document.getElementById('kira-save-btn').textContent='âœ… Kiralama BaÅŸlat';
  document.getElementById('kira-musteri').innerHTML='<option value="">-- MÃ¼ÅŸteri --</option>'+D.musteriler.map(m=>`<option value="${m.id}">${m.ad} ${m.soyad}</option>`).join('');
  document.getElementById('kira-oyun').innerHTML='<option value="">-- Oyun --</option>'+D.oyunlar.filter(o=>!o.cikis||o.cikis<=today()).map(o=>`<option value="${o.id}">${o.ad} [${o.platform}]${o.durum==='kirada'?' âš¡':''}</option>`).join('');
  document.getElementById('kira-tip').value='primary';
  document.getElementById('kira-sure-tip').value='gunluk';
  document.getElementById('kira-bas').value=today();
  const bit=new Date();bit.setDate(bit.getDate()+7);
  document.getElementById('kira-bit').value=bit.toISOString().split('T')[0];
  ['kira-ucret','kira-indirim-pct','kira-indirim-tl','kira-net','kira-on-odeme'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('kira-notlar').value='';
  document.getElementById('kira-ozet').style.display='none';
  document.getElementById('hediye-info').style.display='block';
  document.getElementById('h0').checked=true;
  updateHediyeOptions();
  openModal('modal-kiralama');
}

function onKiraOyunChange(){
  // Kopya seÃ§imi gÃ¼ncelle
  const oyunId2=parseInt(document.getElementById('kira-oyun').value);
  const oyun2=D.oyunlar.find(o=>o.id===oyunId2);
  const kopyaGrup=document.getElementById('kopya-secim-grup');
  const kopyaSel=document.getElementById('kira-kopya-idx');
  if(oyun2&&oyun2.kopyalar&&oyun2.kopyalar.filter(k=>!k.satildi).length>0){
    kopyaGrup.style.display='';
    const aktifKopyalar=oyun2.kopyalar.map((k,i)=>({k,i})).filter(x=>!x.k.satildi);
    kopyaSel.innerHTML='<option value="0">ğŸ® Ana Hesap</option>'+
      aktifKopyalar.map(x=>'<option value="'+(x.i+1)+'">ğŸ“€ '+(x.k.not||('Kopya '+(x.i+2)))+'</option>').join('');
  } else {
    kopyaGrup.style.display='none';
    kopyaSel.innerHTML='<option value="0">ğŸ® Ana Hesap</option>';
  }
  const oyunId=parseInt(document.getElementById('kira-oyun').value);
  document.getElementById('hediye-info').style.display='block';
  document.getElementById('h0').checked=true;
  updateHediyeOptions();
  calcKira();
}

function updateHediyeOptions(){
  const gun=daysDiff(document.getElementById('kira-bas').value, document.getElementById('kira-bit').value);
  const h10=document.getElementById('h10-label');
  const h20=document.getElementById('h20-label');
  const uyari=document.getElementById('hediye-uyari');
  if(gun<10){
    h10.style.opacity='0.4';h10.style.pointerEvents='none';
    h20.style.opacity='0.4';h20.style.pointerEvents='none';
    uyari.textContent='â„¹ï¸ 10+ gÃ¼n kiralamada 5 gÃ¼n, 20+ gÃ¼nde 10 gÃ¼n hediye verilebilir';
    document.getElementById('h0').checked=true;
  } else if(gun>=10&&gun<20){
    h10.style.opacity='1';h10.style.pointerEvents='auto';
    h20.style.opacity='0.4';h20.style.pointerEvents='none';
    uyari.textContent='â„¹ï¸ 20 gÃ¼n hediye iÃ§in en az 20 gÃ¼n kiralama gerekli';
  } else {
    h10.style.opacity='1';h10.style.pointerEvents='auto';
    h20.style.opacity='1';h20.style.pointerEvents='auto';
    uyari.textContent='';
  }
}

function calcKira(){
  const oyunId=parseInt(document.getElementById('kira-oyun').value);
  const oyun=D.oyunlar.find(o=>o.id===oyunId);
  const bas=document.getElementById('kira-bas').value;
  const bit=document.getElementById('kira-bit').value;
  const tip=document.getElementById('kira-tip').value;
  const sureTip=document.getElementById('kira-sure-tip').value;
  if(!oyun||!bas||!bit)return;
  const gun=daysDiff(bas,bit);
  if(gun<=0)return;
  let ucret=0;
  const gunlukFiyat=tip==='primary'?(oyun.gunlukPri||oyun.gunluk||0):(oyun.gunlukSec||oyun.gunluk||0);
  const haftalikFiyat=tip==='primary'?(oyun.haftalikPri||oyun.haftalik||0):(oyun.haftalikSec||oyun.haftalik||0);
  if(sureTip==='gunluk') ucret=gunlukFiyat*gun;
  else if(sureTip==='haftalik') ucret=haftalikFiyat*Math.ceil(gun/7);
  // Secondary fallback %70 sadece pri/sec fiyat ayrÄ±mÄ± yoksa
  if(tip==='secondary'&&!oyun.gunlukSec) ucret=Math.round(ucret*0.7);
  if(sureTip!=='manuel') document.getElementById('kira-ucret').value=ucret;
  calcIndirim();
  document.getElementById('kira-ozet').style.display='block';
  document.getElementById('ko-sure').textContent=`${gun} gÃ¼n`;
  document.getElementById('ko-tip').textContent=tip==='primary'?'ğŸ”µ Primary':'ğŸŸ£ Secondary';
  if(document.getElementById('hediye-info').style.display!=='none') updateHediyeOptions();
}

function calcIndirim(){
  const brut=parseFloat(document.getElementById('kira-ucret').value)||0;
  const pct=parseFloat(document.getElementById('kira-indirim-pct').value)||0;
  const indTL=Math.round(brut*pct/100);
  document.getElementById('kira-indirim-tl').value=indTL||'';
  const net=brut-indTL;
  document.getElementById('kira-net').value=net>0?net:'';
  document.getElementById('ko-brut').textContent=fmt(brut);
  document.getElementById('ko-ind').textContent=fmt(indTL);
  document.getElementById('ko-net').textContent=fmt(net);
}

function calcIndirimTL(){
  const brut=parseFloat(document.getElementById('kira-ucret').value)||0;
  const indTL=parseFloat(document.getElementById('kira-indirim-tl').value)||0;
  const pct=brut>0?Math.round(indTL/brut*100):0;
  document.getElementById('kira-indirim-pct').value=pct||'';
  const net=brut-indTL;
  document.getElementById('kira-net').value=net>0?net:'';
  document.getElementById('ko-brut').textContent=fmt(brut);
  document.getElementById('ko-ind').textContent=fmt(indTL);
  document.getElementById('ko-net').textContent=fmt(net);
}

function saveKiralama(){
  const eid=parseInt(document.getElementById('kira-eid').value);
  const musteriId=parseInt(document.getElementById('kira-musteri').value);
  const oyunId=parseInt(document.getElementById('kira-oyun').value);
  const bas=document.getElementById('kira-bas').value;
  const bit=document.getElementById('kira-bit').value;
  const tip=document.getElementById('kira-tip').value;
  const ucret=parseFloat(document.getElementById('kira-ucret').value)||0;
  const indirim=parseFloat(document.getElementById('kira-indirim-tl').value)||0;
  const net=parseFloat(document.getElementById('kira-net').value)||ucret-indirim;
  const onOdeme=parseFloat(document.getElementById('kira-on-odeme').value)||0;
  const notlar=document.getElementById('kira-notlar').value;
  if(!musteriId||!oyunId||!bas||!bit){toast('Zorunlu alanlarÄ± doldurun','error');return;}
  if(daysDiff(bas,bit)<=0){toast('BitiÅŸ tarihi baÅŸlangÄ±Ã§tan sonra olmalÄ±','error');return;}
  const oyun=D.oyunlar.find(o=>o.id===oyunId);if(!oyun)return;

  // Hediye gÃ¼n â€” radio seÃ§iminden al
  const seciliHediye=parseInt(document.querySelector('input[name="hediye"]:checked')?.value||'0');

  if(eid){
    // DÃœZENLEME MODU
    const idx=D.kiralamalar.findIndex(x=>x.id===eid);
    if(idx<0)return;
    const eski=D.kiralamalar[idx];
    // Eski geliri geri al
    const eskiOyun=D.oyunlar.find(o=>o.id===eski.oyunId);
    if(eskiOyun){eskiOyun.toplamGelir=Math.max(0,eskiOyun.toplamGelir-eski.net);eskiOyun.kiralamaSayisi=Math.max(0,eskiOyun.kiralamaSayisi-1);}
    // Yeni deÄŸerleri yaz
    D.kiralamalar[idx]={...eski,oyunId,musteriId,tip,bas,bit,ucret,indirim,net,onOdeme,hediyeGun:seciliHediye,notlar};
    // Yeni geliri ekle
    oyun.toplamGelir+=net;oyun.kiralamaSayisi++;
    if(eski.durum==='aktif'){oyun.durum='kirada';}
    save();closeModal('modal-kiralama');renderKiralamalar();renderDashboard();updateStats();
    toast('Kiralama gÃ¼ncellendi âœ…','success');
  } else {
    // OLUÅTURMA MODU â€” Ã¶nce kara liste kontrolÃ¼
    const klkayit=D.karaListe.find(k=>k.musteriId===musteriId);
    if(klkayit){
      const m=D.musteriler.find(x=>x.id===musteriId);
      document.getElementById('kl-uyari-text').innerHTML=`<strong style="color:var(--text)">${m?.ad} ${m?.soyad}</strong> kara listede bulunmaktadÄ±r.<br><br><span style="color:var(--warning)">Sebep:</span> ${klkayit.sebep}<br><span style="color:var(--text2)">Eklenme: ${fmtDate(klkayit.tarih)}</span>`;
      const kopyaIdxKL=parseInt(document.getElementById('kira-kopya-idx')?.value||'0')||0;
    document.getElementById('kl-devam-btn').onclick=()=>{closeModal('modal-kl-uyari');_kiralamaOlustur(oyunId,musteriId,bas,bit,tip,ucret,indirim,net,onOdeme,seciliHediye,notlar,oyun,kopyaIdxKL);};
      openModal('modal-kl-uyari');
      return;
    }
    const kopyaIdxV=parseInt(document.getElementById('kira-kopya-idx')?.value||'0')||0;
    _kiralamaOlustur(oyunId,musteriId,bas,bit,tip,ucret,indirim,net,onOdeme,seciliHediye,notlar,oyun,kopyaIdxV);
  }
}

function _kiralamaOlustur(oyunId,musteriId,bas,bit,tip,ucret,indirim,net,onOdeme,hediyeGun,notlar,oyun,kopyaIdx){
    const kIdx = kopyaIdx || 0;
    if(tip==='primary'){
      // kIdx=0 ana hesap, kIdx>0 kopya - kendi slotunu kontrol et
      const kopya = kIdx > 0 ? (oyun.kopyalar||[])[kIdx-1] : null;
      const ciftP = kIdx > 0 ? (kopya?.ciftPrimary||false) : (oyun.ciftPrimary||false);
      const aktifPrimler=D.kiralamalar.filter(k=>k.oyunId===oyunId&&k.tip==='primary'&&k.durum==='aktif'&&(k.kopyaIdx||0)===kIdx).length;
      const maxP=ciftP?2:1;
      if(aktifPrimler>=maxP){toast('Bu hesap/kopya max '+maxP+' Primary kiralamaya izin veriyor!','error');return;}
    }
    D.kiralamalar.push({id:D.nextId.k++,oyunId,musteriId,tip,bas,bit,ucret,indirim,net,onOdeme,hediyeGun,notlar,durum:'aktif',kopyaIdx:kIdx});
    oyun.durum='kirada';oyun.kiralamaSayisi++;oyun.toplamGelir+=net;
    save();closeModal('modal-kiralama');renderKiralamalar();renderDashboard();updateStats();
    const hediyeMesaj=hediyeGun>0?` ğŸ +${hediyeGun} gÃ¼n hediye!`:'';
    toast(`Kiralama baÅŸlatÄ±ldÄ±! ${tip==='primary'?'ğŸ”µ Primary':'ğŸŸ£ Secondary'}${hediyeMesaj}`,'success');
}

function editKiralama(id){
  const k=D.kiralamalar.find(x=>x.id===id); if(!k)return;
  // Modal'Ä± aÃ§ ve tÃ¼m oyunlarÄ± listele (dÃ¼zenlemede kÄ±sÄ±tlama yok)
  document.getElementById('kira-eid').value=id;
  document.getElementById('kira-modal-title').textContent='âœï¸ Kiralama DÃ¼zenle';
  document.getElementById('kira-save-btn').textContent='ğŸ’¾ GÃ¼ncelle';
  document.getElementById('kira-musteri').innerHTML=D.musteriler.map(m=>`<option value="${m.id}" ${m.id===k.musteriId?'selected':''}>${m.ad} ${m.soyad}</option>`).join('');
  document.getElementById('kira-oyun').innerHTML=D.oyunlar.map(o=>`<option value="${o.id}" ${o.id===k.oyunId?'selected':''}>${o.ad} [${o.platform}]</option>`).join('');
  document.getElementById('kira-tip').value=k.tip;
  document.getElementById('kira-sure-tip').value='manuel';
  document.getElementById('kira-bas').value=k.bas;
  document.getElementById('kira-bit').value=k.bit;
  document.getElementById('kira-ucret').value=k.ucret;
  document.getElementById('kira-indirim-tl').value=k.indirim||'';
  document.getElementById('kira-indirim-pct').value=k.ucret>0&&k.indirim>0?Math.round(k.indirim/k.ucret*100):'';
  document.getElementById('kira-net').value=k.net;
  document.getElementById('kira-on-odeme').value=k.onOdeme||'';
  document.getElementById('kira-notlar').value=k.notlar||'';

  // Hediye
  const oyun=D.oyunlar.find(o=>o.id===k.oyunId);
  const hediyeEl=document.getElementById('hediye-info');
  if(oyun&&oyun.cikis&&daysDiff(oyun.cikis,today())>30){
    hediyeEl.style.display='block';
    const hVal=k.hediyeGun||0;
    document.querySelector(`input[name="hediye"][value="${hVal}"]`).checked=true;
    updateHediyeOptions();
  } else {
    hediyeEl.style.display='none';
    document.getElementById('h0').checked=true;
  }

  document.getElementById('kira-ozet').style.display='block';
  const gun=daysDiff(k.bas,k.bit);
  document.getElementById('ko-sure').textContent=`${gun} gÃ¼n`;
  document.getElementById('ko-tip').textContent=k.tip==='primary'?'ğŸ”µ Primary':'ğŸŸ£ Secondary';
  document.getElementById('ko-brut').textContent=fmt(k.ucret);
  document.getElementById('ko-ind').textContent=fmt(k.indirim||0);
  document.getElementById('ko-net').textContent=fmt(k.net);
  openModal('modal-kiralama');
}

function renderKiralamalar(){
  const q=(document.getElementById('kiralama-search')?.value||'').toLowerCase();
  const now=today(); const f=filters.kira;
  const list=D.kiralamalar.filter(k=>{
    const o=D.oyunlar.find(x=>x.id===k.oyunId),m=D.musteriler.find(x=>x.id===k.musteriId);
    if(!`${o?.ad||''} ${m?.ad||''} ${m?.soyad||''}`.toLowerCase().includes(q))return false;
    if(f==='aktif')return k.durum==='aktif'&&k.bit>=now;
    if(f==='gecikme')return k.durum==='aktif'&&k.bit<now;
    if(f==='teslim')return k.durum==='teslim';
    return true;
  }).sort((a,b)=>b.bas.localeCompare(a.bas));

  const tbl=document.getElementById('kiralama-tbl');
  const gecBanner=document.getElementById('kira-gecikme-banner');
  const yaklasanBanner=document.getElementById('kira-yaklasan-banner');
  const now2=today();
  const yarin2=new Date(); yarin2.setDate(yarin2.getDate()+1); const yarinStr2=yarin2.toISOString().split('T')[0];
  const gecList=D.kiralamalar.filter(k=>k.durum==='aktif'&&k.bit<now2);
  const yakList=D.kiralamalar.filter(k=>k.durum==='aktif'&&k.bit>=now2&&k.bit<=yarinStr2);
  if(gecBanner){
    if(gecList.length&&(filters.kira==='hepsi'||filters.kira==='aktif'||filters.kira==='gecikme')){
      gecBanner.style.display='';
      gecBanner.innerHTML='ğŸš¨ <strong>'+gecList.length+' gecikmiÅŸ iade var!</strong> Â· Toplam ekstra: <strong style="color:var(--danger)">'+
        fmt(gecList.reduce((s,k)=>{const o=D.oyunlar.find(x=>x.id===k.oyunId);return s+((o?.gunluk||0)*(k.tip==='secondary'?0.7:1)*daysDiff(k.bit,now2));},0))+
        '</strong>';
    } else {
      gecBanner.style.display='none';
    }
  }
  if(yaklasanBanner){
    if(yakList.length&&(filters.kira==='hepsi'||filters.kira==='aktif')){
      yaklasanBanner.style.display='';
      const isimler=yakList.map(k=>{
        const m=D.musteriler.find(x=>x.id===k.musteriId);
        const o=D.oyunlar.find(x=>x.id===k.oyunId);
        const tel=(m?.tel||'').replace(/[^0-9]/g,'').replace(/^0/,'');
        const msg=encodeURIComponent(buildWaMsg('yaklasan',{isim:(m?.ad||m?.soyad||''),oyun:(o?.ad||'')}));
        return (tel?'<a href="https://wa.me/90'+tel+'?text='+msg+'" target="_blank" style="color:#25d366;text-decoration:none">ğŸ’¬ '+(m?.ad||m?.soyad||'?')+'</a>':'<span>'+(m?.ad||m?.soyad||'?')+'</span>')+' ('+( o?.ad||'-')+')';
      }).join(' &nbsp;Â·&nbsp; ');
      yaklasanBanner.innerHTML='ğŸ”” <strong>YarÄ±n iadesi olanlar ('+yakList.length+'):</strong> '+isimler;
    } else {
      yaklasanBanner.style.display='none';
    }
  }
  if(!list.length){tbl.innerHTML='<tr><td colspan="12" style="text-align:center;color:var(--text3);padding:30px">KayÄ±t bulunamadÄ±</td></tr>';return;}
  tbl.innerHTML=list.map(k=>{
    const o=D.oyunlar.find(x=>x.id===k.oyunId),m=D.musteriler.find(x=>x.id===k.musteriId);
    const isG=k.durum==='aktif'&&k.bit<now;
    const gun=daysDiff(k.bas,k.bit);
    return `<tr ${isG?'class="overdue"':''}>
      <td style="color:var(--text3);font-size:11px">#${k.id}</td>
      <td><strong>${o?.ad||'-'}</strong><br><span style="font-size:10px;color:var(--text2)">${o?.platform||''}</span></td>
      <td><span style="cursor:pointer;color:var(--accent)" onclick="showMusteriDetay(${k.musteriId})">${m?.ad||''} ${m?.soyad||''}</span><br><span style="font-size:10px;color:var(--text2)">${m?.tel||''}</span></td>
      <td><span class="rt-badge ${k.tip==='primary'?'rt-primary':'rt-secondary'}">${k.tip}</span></td>
      <td>${fmtDate(k.bas)}</td>
      <td ${isG?'style="color:var(--danger);font-weight:600"':''}>${fmtDate(k.bit)}${isG?`<br><span style="font-size:11px;color:var(--danger)">+${daysDiff(k.bit,now)}g Â· ${fmt((o?.gunluk||0)*(k.tip==='secondary'?0.7:1)*daysDiff(k.bit,now))}</span>`:''}</td>
      <td>${gun}${k.hediyeGun>0?` <span style="color:var(--success);font-size:10px">+${k.hediyeGun}ğŸ</span>`:''}g</td>
      <td>${fmt(k.ucret)}</td>
      <td class="${k.indirim>0?'loss':'neutral'}">${k.indirim>0?'-'+fmt(k.indirim):'â€”'}</td>
      <td class="profit"><strong>${fmt(k.net)}</strong></td>
      <td>${isG?'<span class="status s-gecikme">GecikmiÅŸ</span>':k.durum==='aktif'?'<span class="status s-kirada">Aktif</span>':'<span class="status s-mevcut">Teslim</span>'}</td>
      <td><div class="action-btns">${k.durum==='aktif'?(()=>{
        const _tel=(m?.tel||'').replace(/[^0-9]/g,'');
        const _gec=isG?daysDiff(k.bit,now):0;
        const _gun=o?.gunluk||0;
        const _extra=Math.round(_gun*(k.tip==='secondary'?0.7:1)*_gec);
        const _msg=encodeURIComponent(buildWaMsg('gecikme',{isim:(m?.ad||m?.soyad||''),oyun:(o?.ad||''),gun:_gec,ucret:_extra}));
        const _wa=_tel?'https://wa.me/90'+_tel.replace(/^0/,'')+'?text='+_msg:'';
        return '<button class="btn btn-success btn-sm" onclick="teslimAl('+k.id+')">âœ… Ä°ade</button>'+
               '<button class="btn btn-warning btn-sm" onclick="openUzatmaModal('+k.id+')">ğŸ”„ Uzat</button>'+
               (isG&&_wa?'<a href="'+_wa+'" target="_blank" class="btn btn-sm" style="background:rgba(37,211,102,.2);color:#25d366;border:1px solid rgba(37,211,102,.3);text-decoration:none">ğŸ’¬ WA</a>':'');
      })():''}<button class="btn btn-outline btn-sm" onclick="editKiralama(${k.id})">âœï¸</button><button class="btn btn-danger btn-sm" onclick="deleteKira(${k.id})">ğŸ—‘</button></div></td>
    </tr>`;
  }).join('');
}

function teslimAl(id){
  const k=D.kiralamalar.find(x=>x.id===id);if(!k)return;
  k.durum='teslim';
  const o=D.oyunlar.find(x=>x.id===k.oyunId);
  if(o&&!D.kiralamalar.some(x=>x.id!==id&&x.oyunId===k.oyunId&&x.durum==='aktif')) o.durum='mevcut';
  save();renderKiralamalar();renderDashboard();updateStats();
  // Bekleyen var mÄ±?
  const bekleyenler=D.rezervasyonlar.filter(r=>r.oyunId===k.oyunId&&r.durum==='bekliyor');
  if(bekleyenler.length>0){
    const ilk=bekleyenler[0];
    const m=D.musteriler.find(x=>x.id===ilk.musteriId);
    const ad=m?((m.ad||'')+' '+(m.soyad||'')).trim():'?';
    const tel=m&&m.tel?' ('+m.tel+')':'';
    setTimeout(function(){
      toast('ğŸ”” '+o?.ad+' iÃ§in '+bekleyenler.length+' kiÅŸi bekliyor! SÄ±radaki: '+ad+tel,'warning');
    },400);
  } else {
    toast('Ä°ade alÄ±ndÄ± âœ…','success');
  }
}

function deleteKira(id){
  if(!confirm('KaydÄ± sil?'))return;
  const k=D.kiralamalar.find(x=>x.id===id);
  if(k){
    const o=D.oyunlar.find(x=>x.id===k.oyunId);
    if(o&&k.durum==='aktif'){
      o.toplamGelir=Math.max(0,o.toplamGelir-k.net);
      o.kiralamaSayisi=Math.max(0,o.kiralamaSayisi-1);
      if(!D.kiralamalar.some(x=>x.id!==id&&x.oyunId===k.oyunId&&x.durum==='aktif')) o.durum='mevcut';
    }
  }
  D.kiralamalar=D.kiralamalar.filter(x=>x.id!==id);
  save();renderKiralamalar();renderDashboard();toast('Silindi','info');
}

// =================== REZERVASYON ===================
function openRezervModal(){
  document.getElementById('rezerv-musteri').innerHTML='<option value="">-- MÃ¼ÅŸteri --</option>'+D.musteriler.map(m=>`<option value="${m.id}">${m.ad} ${m.soyad}</option>`).join('');
  document.getElementById('rezerv-oyun').innerHTML='<option value="">-- Oyun --</option>'+D.oyunlar.map(o=>`<option value="${o.id}">${o.ad} [${o.platform}]${o.cikis&&o.cikis>today()?' ğŸ”œ':''}</option>`).join('');
  document.getElementById('rezerv-not').value='';
  document.getElementById('rezerv-tarih').value='';
  openModal('modal-rezerv');
}

function saveRezervason(){
  const musteriId=parseInt(document.getElementById('rezerv-musteri').value);
  const oyunId=parseInt(document.getElementById('rezerv-oyun').value);
  const tip=document.getElementById('rezerv-tip').value;
  const tarih=document.getElementById('rezerv-tarih').value;
  const notlar=document.getElementById('rezerv-not').value;
  if(!musteriId||!oyunId){toast('MÃ¼ÅŸteri ve oyun seÃ§in','error');return;}
  // AynÄ± mÃ¼ÅŸteri aynÄ± oyun iÃ§in zaten bekliyor mu?
  const zatenVar=D.rezervasyonlar.some(r=>r.oyunId===oyunId&&r.musteriId===musteriId&&r.durum==='bekliyor');
  if(zatenVar){toast('Bu mÃ¼ÅŸteri zaten bu oyun iÃ§in bekliyor!','error');return;}
  D.rezervasyonlar.push({id:D.nextId.r++,oyunId,musteriId,tip,tarih,notlar,alinantarih:today(),durum:'bekliyor'});
  save();closeModal('modal-rezerv');renderRezervasyonlar();updateStats();
  toast('Bekleme listesine eklendi â³','success');
}

function renderRezervasyonlar(){
  const q=(document.getElementById('rezerv-search')?.value||'').toLowerCase();
  const aktif=D.rezervasyonlar.filter(r=>{
    if(r.durum!=='bekliyor') return false;
    const o=D.oyunlar.find(x=>x.id===r.oyunId),m=D.musteriler.find(x=>x.id===r.musteriId);
    return ((o?.ad||'')+' '+(m?.ad||'')+' '+(m?.soyad||'')+' '+(m?.tel||'')).toLowerCase().includes(q);
  });
  const container=document.getElementById('bekleyen-gruplar');
  const uyariEl=document.getElementById('bekleyen-uyari');
  if(!aktif.length){
    container.innerHTML='<div style="text-align:center;color:var(--text3);padding:60px 20px;font-size:14px">â³ Bekleme listesi boÅŸ</div>';
    uyariEl.style.display='none';
    return;
  }
  const gruplar={};
  aktif.forEach(r=>{if(!gruplar[r.oyunId])gruplar[r.oyunId]=[];gruplar[r.oyunId].push(r);});
  uyariEl.style.display='block';
  uyariEl.innerHTML='â³ Toplam <strong>'+aktif.length+' kiÅŸi</strong> '+Object.keys(gruplar).length+' oyun iÃ§in bekliyor';
  container.innerHTML=Object.entries(gruplar).map(function(entry){
    const oyunId=entry[0], rezervler=entry[1];
    const o=D.oyunlar.find(x=>x.id===parseInt(oyunId));
    const musait=!D.kiralamalar.some(k=>k.oyunId===parseInt(oyunId)&&k.durum==='aktif');
    const rowsHTML=rezervler.map(function(r,i){
      const m=D.musteriler.find(x=>x.id===r.musteriId);
      const ad=m?((m.ad||'')+' '+(m.soyad||'')).trim():'-';
      const tel=m&&m.tel?m.tel:'';
      const gun=r.alinantarih?Math.floor((Date.now()-new Date(r.alinantarih))/(86400000)):null;
      const siraClass=i===0?'bekleyen-sira first':'bekleyen-sira';
      return '<div class="bekleyen-row">'
        +'<div class="'+siraClass+'">'+(i+1)+'</div>'
        +'<div class="bekleyen-info">'
          +'<div class="bekleyen-musteri">'+ad+'</div>'
          +'<div class="bekleyen-meta">'+(r.tip==='primary'?'ğŸ”µ Primary':'ğŸŸ£ Secondary')+(tel?' Â· '+tel:'')+(r.tarih?' Â· '+fmtDate(r.tarih):'')+(gun!==null?' Â· <span style="color:var(--warning)">'+gun+' gÃ¼ndÃ¼r bekliyor</span>':'')+'</div>'
          +(r.notlar?'<div style="font-size:11px;color:var(--text3);margin-top:2px">ğŸ“ '+r.notlar+'</div>':'')
        +'</div>'
        +'<div class="bekleyen-actions">'
          +(i===0?'<button class="btn btn-success btn-sm" onclick="rezervKirala('+r.id+')">âœ… Kirala</button>':'')
          +'<button class="btn btn-danger btn-sm" onclick="rezervIptal('+r.id+')">âœ•</button>'
        +'</div>'
      +'</div>';
    }).join('');
    const platformTag=o?'<span class="tag '+(o.platform==='PS5'?'tag-ps5':'tag-ps4')+'" style="font-size:10px;vertical-align:middle">'+o.platform+'</span>':'';
    const durumRenk=musait?'var(--success)':'var(--text3)';
    const durumText=musait?'âœ“ Oyun mÃ¼sait â€” kirala!':'Kirada, sÄ±ra bekleniyor';
    return '<div class="bekleyen-grup">'
      +'<div class="bekleyen-grup-head">'
        +'<div>'
          +'<div class="bekleyen-grup-title">'+(o?o.ad:'?')+' '+platformTag+'</div>'
          +'<div style="font-size:11px;margin-top:2px;color:'+durumRenk+'">'+durumText+'</div>'
        +'</div>'
        +'<span class="bekleyen-badge">'+rezervler.length+' kiÅŸi</span>'
      +'</div>'
      +rowsHTML
    +'</div>';
  }).join('');
}

function rezervKirala(id){
  const r=D.rezervasyonlar.find(x=>x.id===id);if(!r)return;
  r.durum='iptal'; // kaydÄ± pasifleÅŸtir
  save(); openKiralamaModal();
  setTimeout(()=>{
    document.getElementById('kira-musteri').value=r.musteriId;
    document.getElementById('kira-oyun').value=r.oyunId;
    document.getElementById('kira-tip').value=r.tip;
    onKiraOyunChange(); calcKira();
  },100);
  closeModal('modal-rezerv');toast('Rezervasyon kiralama formuna aktarÄ±ldÄ±','info');
}

function rezervIptal(id){
  if(!confirm('Rezervasyonu iptal et?'))return;
  D.rezervasyonlar=D.rezervasyonlar.filter(r=>r.id!==id);
  save();renderRezervasyonlar();updateStats();toast('Ä°ptal edildi','info');
}

// =================== MALÄ°YET ===================
function openMaliyetModal(){
  document.getElementById('maliyet-oyun').innerHTML=D.oyunlar.map(o=>`<option value="${o.id}">${o.ad} [${o.platform}]</option>`).join('');
  document.getElementById('maliyet-aciklama').value='';
  document.getElementById('maliyet-tutar').value='';
  document.getElementById('maliyet-tarih').value=today();
  openModal('modal-maliyet');
}

function saveMaliyet(){
  const oyunId=parseInt(document.getElementById('maliyet-oyun').value);
  const aciklama=document.getElementById('maliyet-aciklama').value.trim();
  const tutar=parseFloat(document.getElementById('maliyet-tutar').value)||0;
  const tarih=document.getElementById('maliyet-tarih').value;
  if(!aciklama||!tutar||!tarih){toast('TÃ¼m alanlarÄ± doldurun','error');return;}
  D.ekMaliyetler.push({id:D.nextId.mal++,oyunId,aciklama,tutar,tarih});
  save();closeModal('modal-maliyet');renderRaporlar();toast('Maliyet kaydedildi','success');
}

function deleteMaliyet(id){
  if(!confirm('Sil?'))return;
  D.ekMaliyetler=D.ekMaliyetler.filter(m=>m.id!==id);
  save();renderRaporlar();toast('Silindi','info');
}

// =================== RAPORLAR ===================
function renderRaporlar(){
  const {s,e}=periodRange();
  const periodKiralar=D.kiralamalar.filter(k=>k.bas>=s&&k.bas<=e);
  const periodGelir=periodKiralar.reduce((x,k)=>x+k.net,0);
  const periodIndirim=periodKiralar.reduce((x,k)=>x+(k.indirim||0),0);
  const periodHediye=periodKiralar.reduce((x,k)=>x+(k.hediyeGun||0),0);
  const periodEkGelir=(D.ekGelirler||[]).filter(g=>g.tarih>=s&&g.tarih<=e).reduce((x,g)=>x+g.tutar,0);
  const toplamAlis=D.oyunlar.reduce((x,o)=>x+(o.alis||0),0);
  const toplamDlc=D.ekMaliyetler.reduce((x,m)=>x+m.tutar,0);
  const toplamMaliyet=toplamAlis+toplamDlc;
  const toplamPSGelir=D.kiralamalar.reduce((x,k)=>x+k.net,0);
  const toplamEkGelir=(D.ekGelirler||[]).reduce((x,g)=>x+g.tutar,0);
  const net=(toplamPSGelir+toplamEkGelir)-toplamMaliyet;

  // Genel kar/zarar paneli
  const karzPS = document.getElementById('karz-ps-gelir');
  if(karzPS){
    document.getElementById('karz-ps-gelir').textContent = fmt(toplamPSGelir);
    document.getElementById('karz-ek-gelir').textContent = fmt(toplamEkGelir);
    document.getElementById('karz-alis').textContent = fmt(toplamAlis);
    document.getElementById('karz-dlc').textContent = fmt(toplamDlc);
    const toplamGelir = toplamPSGelir + toplamEkGelir;
    document.getElementById('karz-toplam-gelir-lbl').textContent = fmt(toplamGelir);
    document.getElementById('karz-toplam-maliyet-lbl').textContent = fmt(toplamMaliyet);
    const netLbl = document.getElementById('karz-net-lbl');
    netLbl.textContent = (net>=0?'+':'')+fmt(net);
    netLbl.style.color = net>=0 ? 'var(--success)' : 'var(--danger)';
    const badge = document.getElementById('karz-net-badge');
    badge.textContent = net>=0 ? 'âœ… KÃ¢rdasÄ±n' : 'âš ï¸ Zararda';
    badge.style.background = net>=0 ? 'rgba(0,230,118,.15)' : 'rgba(255,71,87,.15)';
    badge.style.color = net>=0 ? 'var(--success)' : 'var(--danger)';
    const oran = toplamMaliyet>0 ? Math.round((toplamGelir/toplamMaliyet)*100) : 0;
    document.getElementById('karz-oran-lbl').textContent = '%'+oran;
    const bar = document.getElementById('karz-oran-bar');
    bar.style.width = Math.min(oran,100)+'%';
    bar.style.background = oran>=100 ? 'linear-gradient(90deg,var(--success),#00e5a0)' : oran>=75 ? 'linear-gradient(90deg,var(--accent),var(--success))' : 'linear-gradient(90deg,var(--danger),#ff8c42)';
    const kalan = toplamMaliyet - toplamGelir;
    const mesajEl = document.getElementById('karz-amorti-mesaj');
    if(oran>=100) mesajEl.textContent = 'ğŸ† TÃ¼m maliyetler karÅŸÄ±landÄ±, net kÃ¢r: '+fmt(net);
    else mesajEl.textContent = 'ğŸ“Œ Maliyeti karÅŸÄ±lamak iÃ§in '+fmt(kalan)+' daha gerekiyor (%'+oran+' tamamlandÄ±)';
    mesajEl.style.color = oran>=100 ? 'var(--success)' : 'var(--text3)';
  }

  document.getElementById('rep-gelir').textContent=fmt(periodGelir);
  document.getElementById('rep-ek-gelir').textContent=fmt(periodEkGelir);
  document.getElementById('rep-maliyet').textContent=fmt(toplamMaliyet);
  document.getElementById('rep-mal-sub').textContent=`AlÄ±ÅŸ: ${fmt(toplamAlis)} + DLC: ${fmt(toplamDlc)}`;
  const netEl=document.getElementById('rep-net');
  netEl.textContent=(net>=0?'+':'-')+fmt(Math.abs(net));netEl.style.color=net>=0?'var(--success)':'var(--danger)';
  document.getElementById('rep-kira-sayisi').textContent=periodKiralar.length;
  document.getElementById('rep-indirim').textContent=fmt(periodIndirim);
  document.getElementById('rep-hediye').textContent=periodHediye?periodHediye+'g':'-';

  // Oyun bazlÄ±
  const oyunStats=D.oyunlar.map(o=>{
    const tGelir=D.kiralamalar.filter(k=>k.oyunId===o.id).reduce((x,k)=>x+k.net,0);
    const pGelir=periodKiralar.filter(k=>k.oyunId===o.id).reduce((x,k)=>x+k.net,0);
    const ekM=D.ekMaliyetler.filter(m=>m.oyunId===o.id).reduce((x,m)=>x+m.tutar,0);
    const topM=(o.alis||0)+ekM;
    const netO=tGelir-topM;
    const ratio=topM>0?tGelir/topM:0;
    const kat=Math.floor(ratio);
    const barPct=topM>0?((ratio-kat)*100):0;
    const pct=topM>0?Math.round(ratio*100):0;
    const katRenk=['var(--warning)','var(--success)','var(--accent)','var(--accent2)','var(--accent3)','#f0c040','#ff69b4'];
    const barRenk=katRenk[Math.min(kat,katRenk.length-1)];
    const karsiladi=ratio>=1;
    return{...o,tGelir,pGelir,ekM,topM,netO,ratio,kat,barPct,pct,barRenk,karsiladi};
  });

  // Arama filtresi
  const repQ=(document.getElementById('rep-oyun-search')?.value||'').toLowerCase();
  // Durum filtresi
  const sortVal=document.getElementById('rep-oyun-sort')?.value||'net-desc';
  let filteredStats=oyunStats.filter(o=>{
    if(repQ&&!o.ad.toLowerCase().includes(repQ)) return false;
    if(repOyunFilter==='karsil') return o.karsiladi;
    if(repOyunFilter==='karsil-degil') return !o.karsiladi;
    if(repOyunFilter==='super') return o.ratio>=2;
    if(repOyunFilter==='efsane') return o.ratio>=5;
    return true;
  });
  // SÄ±ralama
  filteredStats.sort((a,b)=>{
    if(sortVal==='net-desc') return b.netO-a.netO;
    if(sortVal==='net-asc') return a.netO-b.netO;
    if(sortVal==='ratio-desc') return b.ratio-a.ratio;
    if(sortVal==='gelir-desc') return b.tGelir-a.tGelir;
    if(sortVal==='kira-desc') return (b.kiralamaSayisi||0)-(a.kiralamaSayisi||0);
    if(sortVal==='maliyet-desc') return b.topM-a.topM;
    if(sortVal==='ad-asc') return a.ad.localeCompare(b.ad,'tr');
    return b.netO-a.netO;
  });

  if(!filteredStats.length){
    document.getElementById('rep-oyun-tbl').innerHTML='<tr><td colspan="9" style="text-align:center;color:var(--text3);padding:30px">Filtreyle eÅŸleÅŸen oyun bulunamadÄ±</td></tr>';
  } else {
  document.getElementById('rep-oyun-tbl').innerHTML=filteredStats.map(o=>{
    // Renk etiketi iÃ§in tur sayÄ±sÄ± rozeti
    const katBadge=o.kat>=1
      ?`<span style="font-size:11px;font-weight:700;color:${o.barRenk};margin-left:6px">${o.kat}x âœ“</span>`
      :'';
    // Bar: dolu kÄ±sÄ±mlar iÃ§in segment gÃ¶sterimi
    const segmentler=[];
    const katRenkListesi=['var(--warning)','var(--success)','var(--accent)','var(--accent2)','var(--accent3)','#f0c040','#ff69b4'];
    // GeÃ§miÅŸ tam turlar â€” ince Ã§izgi olarak gÃ¶ster
    const gecmisTurText=o.kat>0?`<div style="font-size:10px;color:var(--text3);margin-top:2px">${Array.from({length:Math.min(o.kat,6)},(_,i)=>`<span style="color:${katRenkListesi[i+1]||'#f0c040'}">â—</span>`).join('')} ${o.kat} tam tur</div>`:'';
    const barHTML=`
      <div class="progress-wrap" title="${o.ratio.toFixed(2)}x maliyet karÅŸÄ±landÄ± (${fmt(o.tGelir)} / ${fmt(o.topM)})">
        <div class="progress-bg" style="position:relative;height:7px">
          <!-- GeÃ§miÅŸ tur Ã§izgileri -->
          ${Array.from({length:Math.min(o.kat,5)},(_,i)=>`<div style="position:absolute;left:0;top:0;height:100%;width:100%;background:${katRenkListesi[i+1]||'#f0c040'};border-radius:3px;opacity:0.18"></div>`).join('')}
          <!-- Mevcut tur doluluk barÄ± -->
          <div class="progress-fill" style="width:${o.kat===0&&o.topM===0?0:o.topM===0?100:o.barPct}%;background:${o.barRenk};position:relative;z-index:1;height:100%;border-radius:3px"></div>
        </div>
      </div>
      ${gecmisTurText}`;
    const durum=!o.karsiladi
      ?(o.pct>=75?'<span class="status s-kirada">ğŸ”œ YakÄ±n</span>':'<span class="status s-gecikme">â³ KarÅŸÄ±lanmadÄ±</span>')
      :o.kat>=5?'<span class="status" style="background:rgba(240,192,64,.2);color:#f0c040;border:1px solid rgba(240,192,64,.4)">ğŸ† Efsane</span>'
      :o.kat>=3?'<span class="status" style="background:rgba(123,47,255,.2);color:var(--accent2);border:1px solid rgba(123,47,255,.4)">ğŸ’ SÃ¼per</span>'
      :o.kat>=2?'<span class="status" style="background:rgba(0,198,255,.2);color:var(--accent);border:1px solid rgba(0,198,255,.4)">â­ Harika</span>'
      :'<span class="status s-karsil">âœ… KarÅŸÄ±landÄ±</span>';
    return `<tr>
    <td><strong style="cursor:pointer;color:var(--accent)" onclick="showOyunDetay(${o.id})">${o.ad}</strong><br><span class="tag ${o.platform==='PS5'?'tag-ps5':'tag-ps4'}">${o.platform}</span></td>
    <td class="loss">${fmt(o.alis)}</td>
    <td>${o.ekM>0?`<span class="loss">${fmt(o.ekM)}</span>`:'-'}</td>
    <td><strong class="loss">${fmt(o.topM)}</strong></td>
    <td class="profit">${fmt(o.pGelir)}</td>
    <td class="profit">${fmt(o.tGelir)}${katBadge}${barHTML}</td>
    <td class="${o.netO>=0?'profit':'loss'}"><strong>${o.netO>=0?'â–² +':'â–¼ '}${fmt(Math.abs(o.netO))}</strong></td>
    <td>${durum}</td>
    <td><button class="btn btn-warning btn-sm" onclick="openMaliyetForOyun(${o.id})">+ DLC</button></td>
  </tr>`;
  }).join('');
  } // end filteredStats

  document.getElementById('rep-dlc-tbl').innerHTML=D.ekMaliyetler.length
    ?D.ekMaliyetler.slice().sort((a,b)=>b.tarih.localeCompare(a.tarih)).map(m=>{
      const o=D.oyunlar.find(x=>x.id===m.oyunId);
      return `<tr><td><strong>${o?.ad||'?'}</strong></td><td>${m.aciklama}</td><td>${fmtDate(m.tarih)}</td><td class="loss">${fmt(m.tutar)}</td><td><button class="btn btn-danger btn-sm" onclick="deleteMaliyet(${m.id})">ğŸ—‘</button></td></tr>`;
    }).join(''):'<tr><td colspan="5" style="text-align:center;color:var(--text3);padding:16px">DLC kaydÄ± yok</td></tr>';

  renderPeriodChart(periodKiralar,s,e);
  renderMusRapor();
}

function openMaliyetForOyun(id){
  document.getElementById('maliyet-oyun').innerHTML=D.oyunlar.map(o=>`<option value="${o.id}" ${o.id===id?'selected':''}>${o.ad} [${o.platform}]</option>`).join('');
  document.getElementById('maliyet-aciklama').value='';
  document.getElementById('maliyet-tutar').value='';
  document.getElementById('maliyet-tarih').value=today();
  openModal('modal-maliyet');
}



function renderMusRapor() {
  const {s,e} = periodRange();
  const sortBy = (document.getElementById('rep-mus-sort')?.value) || 'gelir';
  const pk = D.kiralamalar.filter(k => k.bas >= s && k.bas <= e);

  // MÃ¼ÅŸteri bazlÄ± topla
  const map = {};
  pk.forEach(k => {
    if (!map[k.musteriId]) map[k.musteriId] = {id:k.musteriId, sayi:0, gelir:0, pri:0, sec:0, oyunlar:{}, son:''};
    const m = map[k.musteriId];
    m.sayi++;
    m.gelir += (k.net||0);
    if (k.tip==='primary') m.pri++; else m.sec++;
    m.oyunlar[k.oyunId] = (m.oyunlar[k.oyunId]||0)+1;
    if (!m.son || k.bas > m.son) m.son = k.bas;
  });

  let list = Object.values(map);

  const podiumEl = document.getElementById('rep-mus-podium');
  const tbodyEl  = document.getElementById('rep-mus-tbl');
  const footerEl = document.getElementById('rep-mus-footer');
  if (!podiumEl || !tbodyEl) return;

  if (!list.length) {
    podiumEl.innerHTML = '';
    tbodyEl.innerHTML = '<tr><td colspan="8" style="text-align:center;color:var(--text3);padding:24px">Bu dÃ¶nemde kiralama yapan mÃ¼ÅŸteri yok</td></tr>';
    footerEl.textContent = '';
    return;
  }

  // MÃ¼ÅŸteri adÄ±
  const mAd = id => {
    const m = D.musteriler.find(x => x.id === id);
    if (!m) return '?';
    const ad = ((m.ad||'')+' '+(m.soyad||'')).trim();
    return ad || m.tel || ('MÃ¼ÅŸteri #'+id);
  };

  // Favori oyun
  const favOyun = oyunlar => {
    const top = Object.entries(oyunlar).sort((a,b)=>b[1]-a[1])[0];
    if (!top) return {ad:'-', kez:0};
    const o = D.oyunlar.find(x => x.id == top[0]);
    return {ad: o ? o.ad : '-', kez: top[1]};
  };

  // SÄ±rala
  list.sort((a,b) => {
    if (sortBy==='gelir')    return b.gelir - a.gelir;
    if (sortBy==='sayi')     return b.sayi  - a.sayi;
    if (sortBy==='ortalama') return (b.gelir/b.sayi) - (a.gelir/a.sayi);
    if (sortBy==='son')      return (b.son||'').localeCompare(a.son||'');
    return 0;
  });

  const podiumColors = ['#f0c040','#b0b0b0','#cd7f32'];
  const podiumIcons  = ['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];

  // Podium top 3
  podiumEl.innerHTML = list.slice(0,3).map((m,i) => {
    const avg = m.sayi > 0 ? m.gelir/m.sayi : 0;
    return '<div style="background:var(--surface2);border:1px solid var(--border);border-radius:12px;padding:14px;text-align:center">' +
      '<div style="font-size:24px">' + podiumIcons[i] + '</div>' +
      '<div style="font-weight:700;font-size:13px;color:var(--text);margin:6px 0 2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">' + mAd(m.id) + '</div>' +
      '<div style="font-size:17px;font-weight:800;color:' + podiumColors[i] + '">' + fmt(m.gelir) + '</div>' +
      '<div style="font-size:11px;color:var(--text3);margin-top:2px">' + m.sayi + ' kiralama Â· Ort. ' + fmt(avg) + '</div>' +
    '</div>';
  }).join('');

  // Tablo
  tbodyEl.innerHTML = list.map((m,i) => {
    const avg = m.sayi > 0 ? m.gelir/m.sayi : 0;
    const fav = favOyun(m.oyunlar);
    const tipHtml = (m.pri>0 && m.sec>0)
      ? '<span style="font-size:10px;color:var(--accent)">ğŸ”µ' + m.pri + '</span>&nbsp;<span style="font-size:10px;color:var(--accent2)">ğŸŸ£' + m.sec + '</span>'
      : m.pri>0
        ? '<span style="font-size:11px;color:var(--accent)">ğŸ”µ P</span>'
        : '<span style="font-size:11px;color:var(--accent2)">ğŸŸ£ S</span>';
    const rankTd = i < 3
      ? '<td style="text-align:center;font-size:16px">' + podiumIcons[i] + '</td>'
      : '<td style="text-align:center;color:var(--text3);font-size:12px">' + (i+1) + '</td>';
    return '<tr>' + rankTd +
      '<td style="font-weight:600">' + mAd(m.id) + '</td>' +
      '<td style="text-align:right">' + m.sayi + '</td>' +
      '<td style="text-align:right;color:var(--success);font-weight:700">' + fmt(m.gelir) + '</td>' +
      '<td style="text-align:right;color:var(--text2)">' + fmt(avg) + '</td>' +
      '<td style="font-size:12px;color:var(--text2);max-width:130px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">' + fav.ad + (fav.kez>1?' ('+fav.kez+'Ã—)':'') + '</td>' +
      '<td style="text-align:center">' + tipHtml + '</td>' +
      '<td style="font-size:12px;color:var(--text3)">' + fmtDate(m.son) + '</td>' +
    '</tr>';
  }).join('');

  const totGelir = list.reduce((s,m)=>s+m.gelir,0);
  const totSayi  = list.reduce((s,m)=>s+m.sayi,0);
  footerEl.textContent = list.length + ' mÃ¼ÅŸteri Â· ' + totSayi + ' kiralama Â· Toplam ' + fmt(totGelir);
}

function renderPeriodChart(kiralar,s,e){
  const groups={};
  const getLabel=(bas)=>{
    if(reportPeriod==='gunluk') return fmtDate(bas);
    if(reportPeriod==='haftalik') return fmtDate(bas);
    if(reportPeriod==='aylik'){
      // GÃ¼nlÃ¼k kÄ±rÄ±lÄ±m, aynÄ± ay iÃ§indeyiz
      return fmtDate(bas);
    }
    if(reportPeriod==='yillik'){
      // AylÄ±k kÄ±rÄ±lÄ±m
      const [y,m]=bas.split('-');
      return `${m}/${y}`;
    }
    if(reportPeriod==='ozel') return fmtDate(bas);
    return fmtDate(bas);
  };
  kiralar.forEach(k=>{const lbl=getLabel(k.bas);if(!groups[lbl])groups[lbl]={gelir:0,kira:0,indirim:0};groups[lbl].gelir+=k.net;groups[lbl].kira++;groups[lbl].indirim+=(k.indirim||0);});
  const keys=Object.keys(groups).sort();
  const maxG=Math.max(...keys.map(k=>groups[k].gelir),1);
  const periodLabels={gunluk:'GÃ¼nlÃ¼k',haftalik:'HaftalÄ±k',aylik:'AylÄ±k',yillik:'YÄ±llÄ±k',ozel:'Ã–zel DÃ¶nem'};
  const title=periodLabels[reportPeriod]||'DÃ¶nem';
  document.getElementById('rep-chart-title').textContent=`ğŸ“Š ${title} Gelir DaÄŸÄ±lÄ±mÄ±`;

  const periRange=periodRange();
  const donemBilgi=`<div style="font-size:11px;color:var(--text2);margin-bottom:12px;padding:8px 12px;background:var(--surface2);border-radius:6px;display:inline-block">
    ğŸ“… DÃ¶nem: <strong style="color:var(--text)">${fmtDate(periRange.s)} â€” ${fmtDate(periRange.e)}</strong>
    &nbsp;Â·&nbsp; ${kiralar.length} kiralama &nbsp;Â·&nbsp; 
    Toplam: <strong class="profit">${fmt(kiralar.reduce((s,k)=>s+k.net,0))}</strong>
    ${kiralar.some(k=>k.indirim>0)?`&nbsp;Â·&nbsp; Ä°ndirim: <strong class="loss">-${fmt(kiralar.reduce((s,k)=>s+(k.indirim||0),0))}</strong>`:''}
  </div>`;

  document.getElementById('rep-chart').innerHTML=keys.length
    ?donemBilgi+`<div class="chart-bar-wrap">${keys.map(k=>`
      <div class="chart-bar-row">
        <div class="chart-bar-lbl">${k}</div>
        <div class="chart-bar-bg"><div class="chart-bar-fill" style="width:${(groups[k].gelir/maxG)*100}%;background:linear-gradient(90deg,var(--success),#00a870)"><span style="font-size:10px">${groups[k].kira>0?groups[k].kira+'x':''}</span></div></div>
        <div class="chart-bar-val profit">${fmt(groups[k].gelir)}</div>
      </div>`).join('')}</div>`
    :donemBilgi+'<div class="empty" style="padding:20px"><div class="empty-text">Bu dÃ¶nemde kiralama yok</div></div>';
}

// =================== UZAKTAN DEAKTÄ°F ===================
function hizliDeaktif(oyunId){
  document.getElementById('deaktif-oyun').innerHTML=D.oyunlar.map(o=>`<option value="${o.id}" ${o.id===oyunId?'selected':''}>${o.ad}</option>`).join('');
  document.getElementById('deaktif-tarih').value=today();
  document.getElementById('deaktif-not').value='';
  openModal('modal-deaktif');
}

function openDeaktifModal(){
  document.getElementById('deaktif-oyun').innerHTML=D.oyunlar.filter(o=>{
    if(!o.deaktifGecmisi)o.deaktifGecmisi=[];
    const son=o.deaktifGecmisi[o.deaktifGecmisi.length-1];
    return !son||daysDiff(son.tarih,today())>=182;
  }).map(o=>`<option value="${o.id}">${o.ad}</option>`).join('');
  if(!document.getElementById('deaktif-oyun').options.length){toast('Deaktif edilebilecek oyun yok (6 ay dolmadÄ±)','warning');return;}
  document.getElementById('deaktif-tarih').value=today();
  document.getElementById('deaktif-not').value='';
  openModal('modal-deaktif');
}

function saveDeaktif(){
  const oyunId=parseInt(document.getElementById('deaktif-oyun').value);
  const tarih=document.getElementById('deaktif-tarih').value;
  const not=document.getElementById('deaktif-not').value;
  const o=D.oyunlar.find(x=>x.id===oyunId);if(!o)return;
  if(!o.deaktifGecmisi)o.deaktifGecmisi=[];
  const son=o.deaktifGecmisi[o.deaktifGecmisi.length-1];
  if(son&&daysDiff(son.tarih,today())<182){toast('6 ay dolmadan tekrar deaktif edilemez!','error');return;}
  o.deaktifGecmisi.push({tarih,not});
  save();closeModal('modal-deaktif');renderOyunlar();
  toast(`${o.ad} deaktif edildi â€” bir sonraki deaktif: ${fmtDate(addDays(tarih,182))}`,'warning');
}

// =================== KARA LÄ°STE ===================
function openKLModal(presetMusteriId){
  const zatenKL=D.karaListe.map(k=>k.musteriId);
  const uygunlar=D.musteriler.filter(m=>!zatenKL.includes(m.id));
  if(!uygunlar.length){toast('TÃ¼m mÃ¼ÅŸteriler zaten kara listede veya mÃ¼ÅŸteri yok','warning');return;}
  document.getElementById('kl-musteri').innerHTML=uygunlar.map(m=>`<option value="${m.id}">${m.ad} ${m.soyad} â€” ${m.tel}</option>`).join('');
  if(presetMusteriId) document.getElementById('kl-musteri').value=presetMusteriId;
  document.getElementById('kl-sebep').value='';
  openModal('modal-kl-ekle');
}
function openKaraListeEkle(musteriId){ openKLModal(musteriId); }

function saveKL(){
  const musteriId=parseInt(document.getElementById('kl-musteri').value);
  const sebep=document.getElementById('kl-sebep').value.trim();
  if(!musteriId||!sebep){toast('MÃ¼ÅŸteri ve sebep zorunludur','error');return;}
  if(D.karaListe.find(k=>k.musteriId===musteriId)){toast('Bu mÃ¼ÅŸteri zaten kara listede','warning');return;}
  D.karaListe.push({id:D.nextId.kl++,musteriId,sebep,tarih:today()});
  save();closeModal('modal-kl-ekle');renderKaraListe();updateStats();
  toast('MÃ¼ÅŸteri kara listeye eklendi ğŸš«','warning');
}

function renderKaraListe(){
  if(!D.karaListe)D.karaListe=[];
  const q=(document.getElementById('kl-search')?.value||'').toLowerCase();
  const list=D.karaListe.filter(k=>{
    const m=D.musteriler.find(x=>x.id===k.musteriId);
    return `${m?.ad||''} ${m?.soyad||''} ${m?.tel||''} ${k.sebep}`.toLowerCase().includes(q);
  });
  document.getElementById('badge-kl').textContent=D.karaListe.length;
  document.getElementById('badge-kl').style.display=D.karaListe.length?'':'none';
  const tbl=document.getElementById('kl-tbl');
  if(!list.length){tbl.innerHTML='<tr><td colspan="5" style="text-align:center;color:var(--text3);padding:30px">Kara listede kimse yok âœ…</td></tr>';return;}
  tbl.innerHTML=list.map(k=>{
    const m=D.musteriler.find(x=>x.id===k.musteriId);
    return `<tr>
      <td><strong>${m?.ad||'?'} ${m?.soyad||''}</strong><br><span class="blacklist-badge">ğŸš« KARA LÄ°STE</span></td>
      <td>${m?.tel||'-'}</td>
      <td>${fmtDate(k.tarih)}</td>
      <td style="color:var(--text2);font-size:12px;max-width:250px">${k.sebep}</td>
      <td><button class="btn btn-success btn-sm" onclick="klCikar(${k.id})">âœ… Listeden Ã‡Ä±kar</button></td>
    </tr>`;
  }).join('');
}

function klCikar(id){
  if(!confirm('Bu kiÅŸiyi kara listeden Ã§Ä±karmak istiyor musunuz?'))return;
  D.karaListe=D.karaListe.filter(k=>k.id!==id);
  save();renderKaraListe();updateStats();toast('Kara listeden Ã§Ä±karÄ±ldÄ±','success');
}

// =================== EK GELÄ°R ===================
function openEkGelirModal(){
  document.getElementById('eg-eid').value='';
  document.getElementById('eg-modal-title').textContent='ğŸ’µ Ek Gelir Ekle';
  document.getElementById('eg-save-btn').textContent='ğŸ’¾ Kaydet';
  document.getElementById('eg-aciklama').value='';
  document.getElementById('eg-kaynak').value='';
  document.getElementById('eg-tutar').value='';
  document.getElementById('eg-tarih').value=today();
  openModal('modal-eg');
}

function editEkGelir(id){
  const g=D.ekGelirler.find(x=>x.id===id);if(!g)return;
  document.getElementById('eg-eid').value=id;
  document.getElementById('eg-modal-title').textContent='âœï¸ Ek Gelir DÃ¼zenle';
  document.getElementById('eg-save-btn').textContent='ğŸ’¾ GÃ¼ncelle';
  document.getElementById('eg-aciklama').value=g.aciklama;
  document.getElementById('eg-kaynak').value=g.kaynak||'';
  document.getElementById('eg-tutar').value=g.tutar;
  document.getElementById('eg-tarih').value=g.tarih;
  openModal('modal-eg');
}

function saveEkGelir(){
  const aciklama=document.getElementById('eg-aciklama').value.trim();
  const kaynak=document.getElementById('eg-kaynak').value.trim();
  const tutar=parseFloat(document.getElementById('eg-tutar').value)||0;
  const tarih=document.getElementById('eg-tarih').value;
  if(!aciklama||!tutar||!tarih){toast('AÃ§Ä±klama, tutar ve tarih zorunludur','error');return;}
  const eid=parseInt(document.getElementById('eg-eid').value);
  if(eid){
    const i=D.ekGelirler.findIndex(x=>x.id===eid);
    if(i>=0)D.ekGelirler[i]={...D.ekGelirler[i],aciklama,kaynak,tutar,tarih};
    toast('GÃ¼ncellendi','success');
  }else{
    D.ekGelirler.push({id:D.nextId.eg++,aciklama,kaynak,tutar,tarih});
    toast('Ek gelir kaydedildi ğŸ’µ','success');
  }
  save();closeModal('modal-eg');renderEkGelir();updateStats();
}

function deleteEkGelir(id){
  if(!confirm('Bu kaydÄ± sil?'))return;
  D.ekGelirler=D.ekGelirler.filter(g=>g.id!==id);
  save();renderEkGelir();updateStats();toast('Silindi','info');
}

function renderEkGelir(){
  if(!D.ekGelirler)D.ekGelirler=[];
  const q=(document.getElementById('eg-search')?.value||'').toLowerCase();
  const list=D.ekGelirler.filter(g=>`${g.aciklama} ${g.kaynak}`.toLowerCase().includes(q)).sort((a,b)=>b.tarih.localeCompare(a.tarih));
  const thisMonth=today().slice(0,7);
  const toplam=D.ekGelirler.reduce((s,g)=>s+g.tutar,0);
  const buAy=D.ekGelirler.filter(g=>g.tarih.startsWith(thisMonth)).reduce((s,g)=>s+g.tutar,0);
  document.getElementById('eg-toplam').textContent=fmt(toplam);
  document.getElementById('eg-bu-ay').textContent=fmt(buAy);
  document.getElementById('eg-kayit').textContent=D.ekGelirler.length;
  const tbl=document.getElementById('eg-tbl');
  if(!list.length){tbl.innerHTML='<tr><td colspan="5" style="text-align:center;color:var(--text3);padding:30px">Ek gelir kaydÄ± yok</td></tr>';return;}
  tbl.innerHTML=list.map(g=>`<tr>
    <td>${fmtDate(g.tarih)}</td>
    <td><strong>${g.aciklama}</strong></td>
    <td><span class="status s-ekgelir">${g.kaynak||'DiÄŸer'}</span></td>
    <td class="profit">${fmt(g.tutar)}</td>
    <td><div class="action-btns"><button class="btn btn-outline btn-sm" onclick="editEkGelir(${g.id})">âœï¸</button><button class="btn btn-danger btn-sm" onclick="deleteEkGelir(${g.id})">ğŸ—‘</button></div></td>
  </tr>`).join('');
}

function updateStats(){
  if(!D.karaListe)D.karaListe=[];
  if(!D.ekGelirler)D.ekGelirler=[];
  const now=today();
  const aktifler=D.kiralamalar.filter(k=>k.durum==='aktif');
  document.getElementById('hs-kira').textContent=aktifler.length;
  document.getElementById('hs-musteri').textContent=D.musteriler.length;
  const thisMonth=now.slice(0,7);
  const ayPS=D.kiralamalar.filter(k=>k.bas.startsWith(thisMonth)).reduce((s,k)=>s+k.net,0);
  const ayEk=D.ekGelirler.filter(g=>g.tarih.startsWith(thisMonth)).reduce((s,g)=>s+g.tutar,0);
  document.getElementById('hs-gelir').textContent=fmt(ayPS+ayEk);
  document.getElementById('hs-rezerv').textContent=D.rezervasyonlar.filter(r=>r.durum!=='iptal').length;
  document.getElementById('badge-gecikme').textContent=aktifler.filter(k=>k.bit<now).length;
  document.getElementById('badge-gecikme').style.display=aktifler.some(k=>k.bit<now)?'':'none';
  document.getElementById('badge-kl').textContent=D.karaListe.length;
  document.getElementById('badge-kl').style.display=D.karaListe.length?'':'none';
}

// =================== INIT ===================
document.getElementById('header-date').textContent=new Date().toLocaleDateString('tr-TR',{weekday:'long',year:'numeric',month:'long',day:'numeric'});
document.getElementById('rep-baslangic').value=addDays(today(),-30);
document.getElementById('rep-bitis').value=today();
// Oyunlar sayfasÄ±na deaktif butonu ekle
document.querySelector('.nav-btn[onclick*="oyunlar"]')?.addEventListener('click',()=>{});
// Deaktif modal'Ä± oyunlar sayfasÄ±nda da aÃ§abilelim
function openDeaktifFromOyunlar(){openDeaktifModal();}
// Firebase auth bekleniyor - init Firebase callback'inden Ã§aÄŸrÄ±lacak
function init(){sampleData();renderDashboard();updateStats();}

async function doLogin() {
  const email = document.getElementById('login-email').value.trim();
  const pass = document.getElementById('login-pass').value;
  const errEl = document.getElementById('login-error');
  const loadEl = document.getElementById('login-loading');
  errEl.style.display = 'none';
  loadEl.style.display = 'block';
  try {
    await auth.signInWithEmailAndPassword(email, pass);
  } catch(e) {
    loadEl.style.display = 'none';
    console.error('Login error code:', e.code, 'message:', e.message);
    const msgs = {
      'auth/wrong-password': 'âŒ Åifre hatalÄ±',
      'auth/user-not-found': 'âŒ Bu e-posta kayÄ±tlÄ± deÄŸil',
      'auth/invalid-credential': 'âŒ E-posta veya ÅŸifre hatalÄ±',
      'auth/invalid-email': 'âŒ GeÃ§ersiz e-posta formatÄ±',
      'auth/user-disabled': 'âŒ Bu hesap devre dÄ±ÅŸÄ±',
      'auth/too-many-requests': 'âŒ Ã‡ok fazla deneme, lÃ¼tfen bekleyin',
      'auth/network-request-failed': 'âŒ Ä°nternet baÄŸlantÄ±sÄ± yok',
      'auth/operation-not-allowed': 'âŒ Email/Password giriÅŸi aktif deÄŸil! Firebase Console â†’ Authentication â†’ Sign-in method â†’ Email/Password â†’ Enable yapÄ±n',
    };
    errEl.textContent = msgs[e.code] || ('âŒ Hata: ' + e.code + ' - ' + e.message);
    errEl.style.display = 'block';
  }
}

function doLogout() {
  if(confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')) auth.signOut();
}

// Firestore'dan yÃ¼kle
async function loadFromFirestore() {
  try {
    setSyncStatus('loading');
    const doc = await db.collection('users').doc(currentUser.uid).collection('data').doc('psrental').get();
    if (doc.exists) {
      D = doc.data();
      // Eksik alanlarÄ± tamamla
      if (!D.karaListe) D.karaListe = [];
      if (!D.ekGelirler) D.ekGelirler = [];
      if (!D.rezervasyonlar) D.rezervasyonlar = [];
      if (!D.ekMaliyetler) D.ekMaliyetler = [];
      D.oyunlar.forEach(o => { if (!o.deaktifGecmisi) o.deaktifGecmisi = []; });
      // Tekrar eden oyunlarÄ± temizle
      const seen = new Set();
      D.oyunlar = D.oyunlar.filter(o => {
        const key = o.ad.trim().toLowerCase();
        if (seen.has(key)) return false;
        seen.add(key);
        return true;
      });
      localStorage.setItem('psv4', JSON.stringify(D));
    } else {
      // Ä°lk kez giriÅŸ - realData'yÄ± kullan
      load();
      await saveToFirestore();
    }
    setSyncStatus('ok');
  } catch(e) {
    console.error('Firestore yÃ¼kleme hatasÄ±:', e);
    setSyncStatus('error');
    load(); // localStorage'dan yÃ¼kle
  }
}

// Firestore'a kaydet (debounced)
function save() {
  localStorage.setItem('psv4', JSON.stringify(D));
  if (!currentUser) return;
  clearTimeout(saveTimeout);
  setSyncStatus('saving');
  saveTimeout = setTimeout(async () => {
    await saveToFirestore();
  }, 1500); // 1.5 saniye bekle, toplu kaydet
}

async function saveToFirestore() {
  if (!currentUser || isSyncing) return;
  isSyncing = true;
  try {
    await db.collection('users').doc(currentUser.uid).collection('data').doc('psrental').set(D);
    setSyncStatus('ok');
  } catch(e) {
    console.error('Firestore kayÄ±t hatasÄ±:', e);
    setSyncStatus('error');
  }
  isSyncing = false;
}

function setSyncStatus(status) {
  const el = document.getElementById('sync-status');
  if (!el) return;
  if (status === 'ok') { el.textContent = 'â˜ï¸ Senkronize'; el.style.color = 'var(--success)'; el.style.background = 'rgba(0,229,160,.15)'; el.style.borderColor = 'rgba(0,229,160,.3)'; }
  else if (status === 'saving') { el.textContent = 'ğŸ”„ Kaydediliyor...'; el.style.color = 'var(--warning)'; el.style.background = 'rgba(255,193,7,.1)'; el.style.borderColor = 'rgba(255,193,7,.3)'; }
  else if (status === 'loading') { el.textContent = 'â³ YÃ¼kleniyor...'; el.style.color = 'var(--text3)'; el.style.background = 'rgba(255,255,255,.05)'; el.style.borderColor = 'var(--border)'; }
  else if (status === 'error') { el.textContent = 'âš ï¸ Hata'; el.style.color = '#ff4757'; el.style.background = 'rgba(255,71,87,.1)'; el.style.borderColor = 'rgba(255,71,87,.3)'; }
}

// Auth state deÄŸiÅŸince
auth.onAuthStateChanged(async (user) => {
  if (user) {
    currentUser = user;
    document.getElementById('login-overlay').style.display = 'none';
    const syncEl = document.getElementById('sync-status');
    const logoutEl = document.getElementById('logout-btn');
    if(syncEl) syncEl.style.display = 'block';
    if(logoutEl) logoutEl.style.display = 'block';
    await loadFromFirestore();
    init();
  } else {
    currentUser = null;
    document.getElementById('login-overlay').style.display = 'flex';
    const syncEl = document.getElementById('sync-status');
    const logoutEl = document.getElementById('logout-btn');
    if(syncEl) syncEl.style.display = 'none';
    if(logoutEl) logoutEl.style.display = 'none';
  }
});

// =================== KOPYA SÄ°STEMÄ° ===================

function hizliKiralaSlot(oyunId, kopyaIdx, tip) {
  openKiralamaModal();
  setTimeout(function(){
    const oSel = document.getElementById('kira-oyun');
    if(oSel){ oSel.value = oyunId; onKiraOyunChange(); }
    // Kopya seÃ§imini ayarla (onKiraOyunChange sonrasÄ± select dolar)
    setTimeout(function(){
      const kSel = document.getElementById('kira-kopya-idx');
      if(kSel) kSel.value = kopyaIdx;
      const tipSel = document.getElementById('kira-tip');
      if(tipSel){ tipSel.value = tip; calcKira(); }
    }, 100);
  }, 150);
}

function openKopyaModal(oyunId, kopyaIdx) {
  const o = D.oyunlar.find(x=>x.id===oyunId);
  if(!o) return;
  if(!o.kopyalar) o.kopyalar = [];
  
  document.getElementById('kopya-oyun-id').value = oyunId;
  
  const duzenleme = kopyaIdx !== undefined && kopyaIdx !== null && kopyaIdx !== '';
  document.getElementById('modal-kopya-title').textContent = duzenleme ? 'ğŸ“€ Kopya DÃ¼zenle' : 'ğŸ“€ Kopya Ekle';
  document.getElementById('kopya-satildi-wrap').style.display = duzenleme ? 'block' : 'none';
  
  if(duzenleme) {
    document.getElementById('kopya-idx').value = kopyaIdx;
    const kopya = o.kopyalar[kopyaIdx];
    document.getElementById('kopya-not').value = kopya.not || '';
    document.getElementById('kopya-alis').value = kopya.alis || '';
    document.getElementById('kopya-cift-primary').checked = kopya.ciftPrimary || false;
    document.getElementById('kopya-satildi').checked = kopya.satildi || false;
  } else {
    document.getElementById('kopya-idx').value = '';
    document.getElementById('kopya-not').value = '';
    document.getElementById('kopya-alis').value = '';
    document.getElementById('kopya-cift-primary').checked = false;
  }
  
  openModal('modal-kopya');
}

function saveKopya() {
  const oyunId = parseInt(document.getElementById('kopya-oyun-id').value);
  const kopyaIdxVal = document.getElementById('kopya-idx').value;
  const not = document.getElementById('kopya-not').value.trim();
  const alis = parseFloat(document.getElementById('kopya-alis').value) || 0;
  const ciftPrimary = document.getElementById('kopya-cift-primary').checked;
  const satildi = document.getElementById('kopya-satildi').checked;
  
  const o = D.oyunlar.find(x=>x.id===oyunId);
  if(!o) return;
  if(!o.kopyalar) o.kopyalar = [];
  
  const duzenleme = kopyaIdxVal !== '';
  
  if(duzenleme) {
    const ki = parseInt(kopyaIdxVal);
    const eskiAlis = o.kopyalar[ki].alis || 0;
    o.kopyalar[ki] = { not, alis, ciftPrimary, satildi };
    // Maliyet farkÄ±nÄ± ana oyuna yansÄ±t
    o.alis = Math.max(0, (o.alis || 0) - eskiAlis + alis);
    toast('Kopya gÃ¼ncellendi âœ…', 'success');
  } else {
    if(o.kopyalar.length >= 4) { toast('En fazla 4 kopya eklenebilir', 'error'); return; }
    o.kopyalar.push({ not, alis, ciftPrimary, satildi: false });
    // Yeni kopya maliyetini ana oyuna ekle
    o.alis = (o.alis || 0) + alis;
    toast('Kopya eklendi âœ…', 'success');
  }
  
  save();
  closeModal('modal-kopya');
  renderOyunlar();
}

function deleteKopya(oyunId, kopyaIdx) {
  const o = D.oyunlar.find(x=>x.id===oyunId);
  if(!o || !o.kopyalar) return;
  
  // Bu kopyaya ait aktif kiralama var mÄ±?
  const aktifVar = D.kiralamalar.some(k=>k.oyunId===oyunId && k.kopyaIdx===(kopyaIdx+1) && k.durum==='aktif');
  if(aktifVar) { toast('Bu kopyada aktif kiralama var, Ã¶nce teslim alÄ±n', 'error'); return; }
  
  if(!confirm('Bu kopyayÄ± silmek istediÄŸinize emin misiniz?')) return;
  const silKopya = o.kopyalar[kopyaIdx];
  o.alis = Math.max(0, (o.alis || 0) - (silKopya.alis || 0));
  o.kopyalar.splice(kopyaIdx, 1);
  save();
  renderOyunlar();
  toast('Kopya silindi', 'info');
}











// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KÄ°RALAMA UZATMA SÄ°STEMÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function openUzatmaModal(kiraId){
  const k=D.kiralamalar.find(x=>x.id===kiraId);
  if(!k) return;
  const o=D.oyunlar.find(x=>x.id===k.oyunId);
  const m=D.musteriler.find(x=>x.id===k.musteriId);

  document.getElementById('uzatma-kira-id').value=kiraId;
  document.getElementById('uzatma-gun').value='';
  document.getElementById('uzatma-ucret').value='';
  document.getElementById('uzatma-not').value='';
  document.getElementById('uzatma-yeni-bit').textContent='â€”';
  document.getElementById('uzatma-yeni-bit').style.color='var(--success)';

  // Bilgi kartÄ±
  const uzSayisi=(k.uzatmalar||[]).length;
  const ad=m?((m.ad||'')+' '+(m.soyad||'')).trim():'-';
  document.getElementById('uzatma-bilgi').innerHTML=
    '<strong>'+(o?o.ad:'-')+'</strong> &middot; '+(k.tip==='primary'?'ğŸ”µ Primary':'ğŸŸ£ Secondary')+'<br>'+
    '<span style="color:var(--text3)">MÃ¼ÅŸteri:</span> '+ad+(m&&m.tel?' Â· '+m.tel:'')+'<br>'+
    '<span style="color:var(--text3)">Mevcut bitiÅŸ:</span> <strong style="color:var(--warning)">'+fmtDate(k.bit)+'</strong>'+
    (uzSayisi>0?'<br><span style="color:var(--accent)">ğŸ“Œ Daha Ã¶nce '+uzSayisi+' kez uzatÄ±ldÄ±</span>':'');

  // 2. uzatmada bekleyen uyarÄ±sÄ±
  const uyariEl=document.getElementById('uzatma-uyari');
  if(uzSayisi>=1){
    const bekleyenler=(D.rezervasyonlar||[]).filter(r=>r.oyunId===k.oyunId&&r.durum==='bekliyor'&&r.musteriId!==k.musteriId);
    if(bekleyenler.length>0){
      const isimler=bekleyenler.map(r=>{
        const bm=D.musteriler.find(x=>x.id===r.musteriId);
        return bm?((bm.ad||'')+' '+(bm.soyad||'')).trim():'?';
      }).join(', ');
      uyariEl.innerHTML='âš ï¸ <strong>Dikkat!</strong> Bu oyun iÃ§in '+bekleyenler.length+' kiÅŸi sÄ±rada bekliyor: <strong>'+isimler+'</strong>';
      uyariEl.style.display='block';
    } else {
      uyariEl.style.display='none';
    }
  } else {
    uyariEl.style.display='none';
  }

  openModal('modal-uzatma');
}

function calcUzatma(){
  const kiraId=parseInt(document.getElementById('uzatma-kira-id').value);
  const gun=parseInt(document.getElementById('uzatma-gun').value)||0;
  if(!gun||gun<1){ document.getElementById('uzatma-yeni-bit').textContent='â€”'; return; }

  const k=D.kiralamalar.find(x=>x.id===kiraId);
  if(!k) return;
  const o=D.oyunlar.find(x=>x.id===k.oyunId);

  // Yeni bitiÅŸ tarihi
  const mevcutBit=new Date(k.bit+'T12:00:00');
  mevcutBit.setDate(mevcutBit.getDate()+gun);
  const yeniBit=mevcutBit.toISOString().split('T')[0];
  document.getElementById('uzatma-yeni-bit').textContent=fmtDate(yeniBit);

  // Ãœcret hesapla
  if(o){
    const gunluk=k.tip==='primary'?(o.gunlukPri||o.gunluk||0):(o.gunlukSec||Math.round((o.gunlukPri||o.gunluk||0)*0.7));
    document.getElementById('uzatma-ucret').value=gunluk*gun;
  }
}

function saveUzatma(){
  const kiraId=parseInt(document.getElementById('uzatma-kira-id').value);
  const gun=parseInt(document.getElementById('uzatma-gun').value)||0;
  const ucret=parseFloat(document.getElementById('uzatma-ucret').value)||0;
  const not=document.getElementById('uzatma-not').value.trim();

  if(!gun||gun<1){ toast('GÃ¼n sayÄ±sÄ± giriniz','error'); return; }

  const k=D.kiralamalar.find(x=>x.id===kiraId);
  if(!k) return;
  const o=D.oyunlar.find(x=>x.id===k.oyunId);

  // Yeni bitiÅŸ tarihi
  const mevcutBit=new Date(k.bit+'T12:00:00');
  mevcutBit.setDate(mevcutBit.getDate()+gun);
  k.bit=mevcutBit.toISOString().split('T')[0];

  // Uzatma kaydÄ±
  if(!k.uzatmalar) k.uzatmalar=[];
  k.uzatmalar.push({gun,ucret,tarih:today(),not});

  // Gelir gÃ¼ncelle
  k.ucret=(k.ucret||0)+ucret;
  k.net=(k.net||0)+ucret;
  if(o) o.toplamGelir=(o.toplamGelir||0)+ucret;

  save();
  closeModal('modal-uzatma');
  renderKiralamalar();
  renderDashboard();
  updateStats();
  setTimeout(autoCheckNotif, 2000);
  toast('Kiralama '+gun+' gÃ¼n uzatÄ±ldÄ±! +'+fmt(ucret),'success');
}





function openWhatsApp(musteriId, kiraId){
  const m=D.musteriler.find(x=>x.id===musteriId);
  const k=kiraId?D.kiralamalar.find(x=>x.id===kiraId):null;
  const o=k?D.oyunlar.find(x=>x.id===k.oyunId):null;
  const tel=(m?.tel||'').replace(/[^0-9]/g,'');
  if(!tel){ toast('MÃ¼ÅŸterinin telefon numarasÄ± yok','error'); return; }

  const now=today();
  const isGec=k&&k.durum==='aktif'&&k.bit<now;
  const gecGun=isGec?daysDiff(k.bit,now):0;
  const gunluk=k&&o?(o.gunluk||0)*(k.tip==='secondary'?0.7:1):0;
  const ekstra=Math.round(gunluk*gecGun);
  const vars={isim:(m.ad||m.soyad||''), oyun:(o?.ad||''), gun:gecGun, ucret:ekstra};

  let msg='';
  if(isGec) msg=buildWaMsg('gecikme',vars);
  else if(k) msg=buildWaMsg('yaklasan',vars);
  else msg=buildWaMsg('genel',vars);

  const waNum='90'+tel.replace(/^0/,'');
  window.open('https://wa.me/'+waNum+'?text='+encodeURIComponent(msg),'_blank');
}

function openHedefModal(){
  const hedef=parseInt(localStorage.getItem('aylikHedef')||'0');
  document.getElementById('hedef-input').value=hedef||'';
  openModal('modal-hedef');
}

function saveHedef(){
  const val=parseInt(document.getElementById('hedef-input').value)||0;
  localStorage.setItem('aylikHedef', val);
  closeModal('modal-hedef');
  renderDashboard();
  toast('Hedef gÃ¼ncellendi ğŸ¯','success');
}

function renderHedefBar(ayGelir){
  const hedef=parseInt(localStorage.getItem('aylikHedef')||'0');
  const wrap=document.getElementById('hedef-bar-wrap');
  if(!wrap) return;

  if(!hedef){
    document.getElementById('hedef-progress').style.width='0%';
    document.getElementById('hedef-oran-lbl').textContent='â€”';
    document.getElementById('hedef-rakam-lbl').textContent='Hedef belirlenmedi';
    document.getElementById('hedef-mesaj').textContent='Hedef belirlemek iÃ§in âœï¸ DÃ¼zenle butonuna tÄ±klayÄ±n.';
    document.getElementById('hedef-mesaj').style.color='var(--text3)';
    return;
  }

  const oran=Math.min(Math.round((ayGelir/hedef)*100),100);
  const kalan=Math.max(hedef-ayGelir,0);
  const bar=document.getElementById('hedef-progress');

  // Renk
  let renk='linear-gradient(90deg,var(--success),#00c8ff)';
  if(oran>=100) renk='linear-gradient(90deg,#ffd700,#ffaa00)';
  else if(oran>=75) renk='linear-gradient(90deg,var(--success),#00e5a0)';
  else if(oran<30) renk='linear-gradient(90deg,var(--danger),#ff8c42)';
  bar.style.background=renk;
  bar.style.width=Math.max(oran,2)+'%';

  document.getElementById('hedef-oran-lbl').textContent='%'+oran;
  document.getElementById('hedef-oran-lbl').style.color=oran>=100?'#ffd700':oran>=75?'var(--success)':oran<30?'var(--danger)':'var(--accent)';
  document.getElementById('hedef-rakam-lbl').textContent=fmt(ayGelir)+' / '+fmt(hedef);

  let mesaj='';
  if(oran>=100) mesaj='ğŸ† Tebrikler! Bu ayÄ±n hedefini aÅŸtÄ±n!';
  else if(oran>=75) mesaj='ğŸ’ª Hedefe Ã§ok yakÄ±nsÄ±n! '+fmt(kalan)+' kaldÄ±.';
  else if(oran>=50) mesaj='ğŸ“ˆ YarÄ± yoldasÄ±n. '+fmt(kalan)+' daha lazÄ±m.';
  else if(oran>=25) mesaj='ğŸš€ Devam et! Hedefe '+fmt(kalan)+' kaldÄ±.';
  else mesaj='ğŸ“Œ Hedefe ulaÅŸmak iÃ§in '+fmt(kalan)+' daha gerekiyor.';
  const mesajEl=document.getElementById('hedef-mesaj');
  mesajEl.textContent=mesaj;
  mesajEl.style.color=oran>=100?'#ffd700':oran>=75?'var(--success)':'var(--text3)';
}



// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AYARLAR & WA ÅABLONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SABLO_DEFAULTS = {
  gecikme: 'Merhaba {isim}! ğŸ‘‹\n{oyun} kiralama sÃ¼reniz {gun} gÃ¼n Ã¶nce doldu.\nEkstra Ã¼cret: â‚º{ucret}\nOyunu iade etmenizi rica ederiz. TeÅŸekkÃ¼rler! ğŸ™',
  yaklasan: 'Merhaba {isim}! ğŸ‘‹\n{oyun} kiralama sÃ¼reniz yarÄ±n dolacak.\nUzatmak ister misiniz? ğŸ®',
  genel: 'Merhaba {isim}! ğŸ‘‹\nPlayStation oyun kiralama hakkÄ±nda gÃ¶rÃ¼ÅŸmek istiyoruz.'
};

function getSablo(tip){
  return localStorage.getItem('sablo_'+tip) || SABLO_DEFAULTS[tip] || '';
}

function buildWaMsg(tip, vars){
  let msg = getSablo(tip);
  msg = msg.replace(/\{isim\}/g, vars.isim||'');
  msg = msg.replace(/\{oyun\}/g, vars.oyun||'');
  msg = msg.replace(/\{gun\}/g, vars.gun||'');
  msg = msg.replace(/\{ucret\}/g, vars.ucret||'0');
  return msg;
}

function renderAyarlar(){
  renderYedekBilgi();
  renderNotifDurumu();
  const g = document.getElementById('sablo-gecikme');
  const y = document.getElementById('sablo-yaklasan');
  const n = document.getElementById('sablo-genel');
  if(g) g.value = getSablo('gecikme');
  if(y) y.value = getSablo('yaklasan');
  if(n) n.value = getSablo('genel');
}

function saveAyarlar(){
  const g = document.getElementById('sablo-gecikme')?.value.trim();
  const y = document.getElementById('sablo-yaklasan')?.value.trim();
  const n = document.getElementById('sablo-genel')?.value.trim();
  if(g) localStorage.setItem('sablo_gecikme', g);
  if(y) localStorage.setItem('sablo_yaklasan', y);
  if(n) localStorage.setItem('sablo_genel', n);
  toast('Åablonlar kaydedildi âœ…','success');
}

function resetSablonlar(){
  if(!confirm('Åablonlar varsayÄ±lana dÃ¶necek, emin misiniz?')) return;
  localStorage.removeItem('sablo_gecikme');
  localStorage.removeItem('sablo_yaklasan');
  localStorage.removeItem('sablo_genel');
  renderAyarlar();
  toast('VarsayÄ±lan ÅŸablonlar yÃ¼klendi','info');
}





// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VERÄ° YEDEKLEMESÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function exportData(){
  try{
    const now = new Date();
    const tarih = now.getFullYear()+'-'+
      String(now.getMonth()+1).padStart(2,'0')+'-'+
      String(now.getDate()).padStart(2,'0');
    const veri = JSON.stringify(D, null, 2);
    const blob = new Blob([veri], {type:'application/json'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'gamerental-yedek-'+tarih+'.json';
    a.click();
    URL.revokeObjectURL(url);
    toast('Yedek dosyasÄ± indirildi âœ…','success');
    renderYedekBilgi();
  } catch(e){
    toast('DÄ±ÅŸa aktarma hatasÄ±: '+e.message,'error');
  }
}

function importData(event){
  const file = event.target.files[0];
  if(!file) return;
  if(!confirm('âš ï¸ DÄ°KKAT!\n\nMevcut tÃ¼m veriler silinecek ve bu dosyadaki veriler yÃ¼klenecek.\n\nDevam etmek istiyor musunuz?')){
    event.target.value='';
    return;
  }
  const reader = new FileReader();
  reader.onload = function(e){
    try{
      const parsed = JSON.parse(e.target.result);
      // Temel yapÄ± kontrolÃ¼
      if(!parsed.oyunlar || !parsed.musteriler || !parsed.kiralamalar){
        toast('GeÃ§ersiz yedek dosyasÄ±!','error');
        return;
      }
      D = parsed;
      save();
      renderDashboard();
      toast('Veriler baÅŸarÄ±yla yÃ¼klendi! ğŸ‰ ('+parsed.oyunlar.length+' oyun, '+parsed.musteriler.length+' mÃ¼ÅŸteri, '+parsed.kiralamalar.length+' kiralama)','success');
      renderYedekBilgi();
    } catch(err){
      toast('Dosya okunamadÄ±: '+err.message,'error');
    }
    event.target.value='';
  };
  reader.readAsText(file);
}

function renderYedekBilgi(){
  const el = document.getElementById('yedek-bilgi-text');
  if(!el) return;
  const boyut = Math.round(JSON.stringify(D).length / 1024);
  el.innerHTML = 'ğŸ“Š <strong>'+D.oyunlar.length+'</strong> oyun &nbsp;Â·&nbsp; '+
    '<strong>'+D.musteriler.length+'</strong> mÃ¼ÅŸteri &nbsp;Â·&nbsp; '+
    '<strong>'+D.kiralamalar.length+'</strong> kiralama &nbsp;Â·&nbsp; '+
    'Veri boyutu: <strong>~'+boyut+' KB</strong> &nbsp;Â·&nbsp; '+
    'Son kayÄ±t: <strong>'+new Date().toLocaleString('tr-TR')+'</strong>';
}





// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BÄ°LDÄ°RÄ°M SÄ°STEMÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function requestNotifPermission(){
  if(!('Notification' in window)){
    toast('Bu tarayÄ±cÄ± bildirimleri desteklemiyor','error'); return false;
  }
  if(Notification.permission==='granted') return true;
  if(Notification.permission==='denied'){
    toast('Bildirim izni reddedilmiÅŸ. TarayÄ±cÄ± ayarlarÄ±ndan aÃ§abilirsiniz.','warning'); return false;
  }
  const result = await Notification.requestPermission();
  return result==='granted';
}

async function sendNotif(title, body, tag){
  if(Notification.permission!=='granted') return;
  const sw = await navigator.serviceWorker?.ready.catch(()=>null);
  if(sw?.showNotification){
    sw.showNotification(title,{body,tag:tag||'gamerental',icon:'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ®</text></svg>',badge:'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ®</text></svg>',data:{url:location.href}});
  } else {
    new Notification(title,{body,tag:tag||'gamerental',icon:'data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ®</text></svg>'});
  }
}

function checkAndNotify(){
  if(Notification.permission!=='granted') return;
  const now=today();
  const yarin=new Date(); yarin.setDate(yarin.getDate()+1);
  const yarinStr=yarin.toISOString().split('T')[0];

  const gecikme=D.kiralamalar.filter(k=>k.durum==='aktif'&&k.bit<now);
  const yarinBiten=D.kiralamalar.filter(k=>k.durum==='aktif'&&k.bit>=now&&k.bit<=yarinStr);

  if(gecikme.length>0){
    const isimler=gecikme.slice(0,3).map(k=>{
      const m=D.musteriler.find(x=>x.id===k.musteriId);
      const o=D.oyunlar.find(x=>x.id===k.oyunId);
      return `${m?.ad||'?'} (${o?.ad||'?'})`;
    }).join(', ')+(gecikme.length>3?` +${gecikme.length-3} daha`:'');
    sendNotif(`ğŸš¨ ${gecikme.length} GecikmiÅŸ Ä°ade`,isimler,'gecikme');
  }

  if(yarinBiten.length>0){
    const isimler=yarinBiten.slice(0,3).map(k=>{
      const m=D.musteriler.find(x=>x.id===k.musteriId);
      const o=D.oyunlar.find(x=>x.id===k.oyunId);
      return `${m?.ad||'?'} (${o?.ad||'?'})`;
    }).join(', ')+(yarinBiten.length>3?` +${yarinBiten.length-3} daha`:'');
    sendNotif(`ğŸ”” ${yarinBiten.length} Kiralama YarÄ±n Bitiyor`,isimler,'yaklasan');
  }

  // Son kontrol zamanÄ±nÄ± kaydet
  localStorage.setItem('sonNotifKontrol', now);
}

function autoCheckNotif(){
  // GÃ¼nde bir kez kontrol (aynÄ± gÃ¼nde tekrar Ã§alÄ±ÅŸmasÄ±n)
  const son=localStorage.getItem('sonNotifKontrol');
  const now=today();
  if(son===now) return;
  checkAndNotify();
}

function renderNotifDurumu(){
  const el=document.getElementById('notif-durum');
  if(!el) return;
  if(!('Notification' in window)){
    el.innerHTML='<span style="color:var(--text3)">Bu cihaz bildirimleri desteklemiyor.</span>';
    return;
  }
  const izin=Notification.permission;
  if(izin==='granted'){
    const son=localStorage.getItem('sonNotifKontrol')||'â€”';
    el.innerHTML=`<span style="color:var(--success)">âœ… Bildirimler aktif</span> &nbsp;Â·&nbsp; <span style="color:var(--text3);font-size:12px">Son kontrol: ${son}</span>
    <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
      <button class="btn btn-outline btn-sm" onclick="checkAndNotify();toast('Kontrol yapÄ±ldÄ±','success')">ğŸ”” Åimdi Kontrol Et</button>
      <button class="btn btn-danger btn-sm" onclick="localStorage.setItem('notifKapat','1');renderNotifDurumu();toast('Bildirimler kapatÄ±ldÄ±','info')">Kapat</button>
    </div>`;
  } else if(izin==='denied'){
    el.innerHTML='<span style="color:var(--danger)">â›” Ä°zin reddedilmiÅŸ.</span> TarayÄ±cÄ± ayarlarÄ±ndan bu site iÃ§in bildirimlere izin verin.';
  } else {
    el.innerHTML=`<span style="color:var(--text3)">HenÃ¼z izin verilmedi.</span>
    <div style="margin-top:10px">
      <button class="btn btn-primary btn-sm" onclick="requestNotifPermission().then(ok=>{if(ok){localStorage.removeItem('notifKapat');autoCheckNotif();}renderNotifDurumu()})">ğŸ”” Bildirimlere Ä°zin Ver</button>
    </div>`;
  }
}

</script>

<!-- PWA Service Worker -->
<script>
if('serviceWorker' in navigator){
  const swCode = `
    const CACHE='gamerental-v2';
    self.addEventListener('install',e=>e.waitUntil(caches.open(CACHE).then(c=>c.addAll(['.']))));
    self.addEventListener('fetch',e=>e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(res=>{caches.open(CACHE).then(c=>c.put(e.request,res.clone()));return res;}).catch(()=>caches.match('.')))));
    self.addEventListener('notificationclick',e=>{
      e.notification.close();
      e.waitUntil(clients.openWindow(e.notification.data?.url||'/'));
    });
  `;
  const blob = new Blob([swCode],{type:'application/javascript'});
  const url = URL.createObjectURL(blob);
  navigator.serviceWorker.register(url).catch(()=>{});
}
</script>

<!-- KOPYA MODAL -->
<div class="modal-overlay" id="modal-kopya">
  <div class="modal" style="max-width:460px">
    <div class="modal-head">
      <div class="modal-title" id="modal-kopya-title">ğŸ“€ Kopya Ekle</div>
      <button class="modal-close" onclick="closeModal('modal-kopya')">âœ•</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="kopya-oyun-id">
      <input type="hidden" id="kopya-idx">
      <div class="form-grid">
        <div class="form-group full">
          <label>Kopya Notu (opsiyonel)</label>
          <input type="text" id="kopya-not" placeholder="Ã–rn: 2. Hesap, Yedek Kopya...">
        </div>
        <div class="form-group">
          <label>AlÄ±ÅŸ FiyatÄ± (â‚º) *</label>
          <input type="number" id="kopya-alis" placeholder="0" min="0">
        </div>
        <div class="form-group">
          <label>Ã‡ift Primary</label>
          <div class="toggle-wrap">
            <label class="toggle"><input type="checkbox" id="kopya-cift-primary"><span class="toggle-slider"></span></label>
            <span style="font-size:12px;color:var(--text2)">2 Primary verebilir</span>
          </div>
        </div>
        <div class="form-group full" id="kopya-satildi-wrap" style="display:none">
          <label style="color:var(--warning)">âš ï¸ KopyayÄ± sat (slotlar kapanÄ±r)</label>
          <div class="toggle-wrap">
            <label class="toggle"><input type="checkbox" id="kopya-satildi"><span class="toggle-slider"></span></label>
            <span style="font-size:12px;color:var(--text2)">SatÄ±ldÄ± olarak iÅŸaretle</span>
          </div>
        </div>
      </div>
      <div style="display:flex;gap:8px;margin-top:4px">
        <button class="btn btn-outline" onclick="closeModal('modal-kopya')" style="flex:1">Ä°ptal</button>
        <button class="btn btn-primary" onclick="saveKopya()" style="flex:2">âœ… Kaydet</button>
      </div>
    </div>
  </div>
</div>

<script>
function getTavsiyeler(musteriId, limit){
  limit = limit || 5;
  var kiralar = D.kiralamalar.filter(function(k){ return k.musteriId === musteriId; });
  var kiraladigi = new Set(kiralar.map(function(k){ return k.oyunId; }));
  var musaitOyunlar = D.oyunlar.filter(function(o){ return !kiraladigi.has(o.id); });
  if(!musaitOyunlar.length) return [];
  var benzerlik = new Map();
  D.kiralamalar.forEach(function(k){
    if(k.musteriId === musteriId) return;
    if(kiraladigi.has(k.oyunId)) benzerlik.set(k.musteriId, (benzerlik.get(k.musteriId)||0)+1);
  });
  var colSkor = new Map();
  D.kiralamalar.forEach(function(k){
    if(k.musteriId === musteriId || kiraladigi.has(k.oyunId)) return;
    var b = benzerlik.get(k.musteriId)||0;
    if(b>0) colSkor.set(k.oyunId, (colSkor.get(k.oyunId)||0)+b);
  });
  var popSkor = new Map();
  D.kiralamalar.forEach(function(k){
    if(!kiraladigi.has(k.oyunId)){
      if(!popSkor.has(k.oyunId)) popSkor.set(k.oyunId, new Set());
      popSkor.get(k.oyunId).add(k.musteriId);
    }
  });
  return musaitOyunlar.map(function(o){
    var col=colSkor.get(o.id)||0, pop=popSkor.has(o.id)?popSkor.get(o.id).size:0;
    return {oyun:o, col:col, pop:pop, birlesik:(col*3)+pop};
  }).filter(function(s){return s.birlesik>0;})
  .sort(function(a,b){return b.birlesik-a.birlesik;})
  .slice(0,limit);
}

function buildKiralaOnclick(oyunId, musteriId){
  return "closeModal('modal-musteri-detay');openKiralamaModal();setTimeout(function(){"
    + "var os=document.getElementById('kira-oyun');if(os){os.value=" + oyunId + ";onKiraOyunChange();}"
    + "var ms=document.getElementById('kira-musteri');if(ms)ms.value=" + musteriId + ";},150)";
}

function renderTavsiyeHTML(musteriId){
  var tavsiyeler = getTavsiyeler(musteriId, 5);
  if(!tavsiyeler.length){
    return '<div style="color:var(--text3);font-size:13px;padding:8px 0">Ã–neri oluÅŸturmak iÃ§in yeterli veri yok. MÃ¼ÅŸteri daha fazla kiralama yaptÄ±kÃ§a tavsiyeler Ã§Ä±kacak.</div>';
  }
  return tavsiyeler.map(function(t){
    var o = t.oyun;
    var musait = !o.durum || o.durum === 'mevcut';
    var etiket = t.col > 0
      ? ('ğŸ‘¥ ' + t.col + ' ortak puan Â· ğŸ”¥ ' + t.pop + ' kiralama')
      : ('ğŸ”¥ ' + t.pop + ' farklÄ± mÃ¼ÅŸteri kiraladÄ±');
    var renk = t.col > 0 ? 'var(--accent)' : 'var(--success)';
    var kiralaBtn = musait
      ? '<button class="btn btn-primary btn-sm" onclick="' + buildKiralaOnclick(o.id, musteriId) + '">+ Kirala</button>'
      : '<span style="font-size:11px;color:var(--warning)">Kirada</span>';
    return '<div style="display:flex;align-items:center;gap:12px;padding:10px 14px;background:var(--surface3);border-radius:10px;margin-bottom:8px">'
      + '<div style="flex:1;min-width:0">'
      + '<div style="font-size:13px;font-weight:700;color:var(--text1)">' + o.ad + '</div>'
      + '<div style="font-size:11px;margin-top:2px">' + (o.platform||'') + ' &nbsp;Â·&nbsp; <span style="color:' + renk + '">' + etiket + '</span></div>'
      + '</div>'
      + '<div style="text-align:right;flex-shrink:0">'
      + '<div style="font-size:12px;color:var(--text2);margin-bottom:4px">' + fmt(o.gunluk) + '<span style="color:var(--text3)">/gÃ¼n</span></div>'
      + kiralaBtn
      + '</div></div>';
  }).join('');
}

</script>
</body>
</html>
